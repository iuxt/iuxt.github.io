<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>杂烩饭 - 张理坤的博客 - 运维技术分享</title><meta name="author" content="张理坤"><meta name="copyright" content="张理坤"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="张理坤的个人技术博客, 致力于分享运维开发等技术经验, 由系统运维、脚本编程、devops等分类组成, 涵盖了Docker、k8s、Python、Linux、Shell脚本、MySQL、Prometheus、ElasticSearch、虚拟化、Django、vue等内容。">
<meta property="og:type" content="website">
<meta property="og:title" content="杂烩饭">
<meta property="og:url" content="https://zahui.fan/page/10/">
<meta property="og:site_name" content="杂烩饭">
<meta property="og:description" content="张理坤的个人技术博客, 致力于分享运维开发等技术经验, 由系统运维、脚本编程、devops等分类组成, 涵盖了Docker、k8s、Python、Linux、Shell脚本、MySQL、Prometheus、ElasticSearch、虚拟化、Django、vue等内容。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://static.zahui.fan/public/dog.svg">
<meta property="article:author" content="张理坤">
<meta property="article:tag" content="Kubernetes,Prometheus,ElasticSearch,OPS,DevOps,运维,MySQL,Linux,云原生">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://static.zahui.fan/public/dog.svg"><link rel="shortcut icon" href="https://static.zahui.fan/public/boob.svg"><link rel="canonical" href="https://zahui.fan/page/10/"><link rel="preconnect"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?50b516d50102c8c9ac5f80529b81ca17";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-YN0WWZGVYN"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-YN0WWZGVYN');
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"此文章距离发布已经","messageNext":"天了，内容可能已经过时，请自行判断是否可用或联系博主更新。"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '杂烩饭',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-10-15 14:32:41'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="杂烩饭" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/dog.svg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">315</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">208</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://file.babudiu.com/"><i class="fa-fw fa-solid fa-file"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page fixed" id="page-header" style="background-image: url('/img/top_img.svg')"><nav id="nav"><span id="blog-info"><a href="/" title="杂烩饭"><img class="site-icon" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/boob.svg"/><span class="site-name">杂烩饭</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://file.babudiu.com/"><i class="fa-fw fa-solid fa-file"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">杂烩饭</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/iuxt" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:x@zahui.fan" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/165330963" rel="external nofollow noreferrer" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="https://stackoverflow.com/users/15620461/" rel="external nofollow noreferrer" target="_blank" title="StackOverflow"><i class="fa-brands fa-stack-overflow"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-square-rss"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/posts/c1f1096a/" title="在Windows下以服务方式运行MySQL"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在Windows下以服务方式运行MySQL"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/c1f1096a/" title="在Windows下以服务方式运行MySQL">在Windows下以服务方式运行MySQL</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-07-24T14:41:51.000Z" title="发表于 2023-07-24 22:41:51">2023-07-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Windows/">Windows</a></span></div><div class="content">下载本文安装的是 zip 包, 安装方式更灵活
下载地址: https://dev.mysql.com/downloads/mysql/

创建配置文件在 mysql 根目录下创建 my.ini 文件,输入以下内容 (根据自己需求调整, 如果不知道参数是做什么的, 那就不要配置, 不要瞎 “ 调优 “):
123456789101112131415161718192021[mysql]# 设置mysql客户端默认字符集default-character-set=utf8mb4[mysqld]#设置3306端口port = 13306# 设置mysql的安装目录, 这里也可以用相对路径表示, 如 . 表示当前目录basedir=C:\Users\iuxt\OneDrive\1\mysqld# 设置mysql数据库的数据的存放目录, 也可以用相对路径, 如 datadatadir=C:\Users\iuxt\OneDrive\1\mysqld\data# 允许最大连接数max_connections=200# 设置服务端使用的字符集character-set-server=utf8mb4# ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/1da8e73d/" title="编译安装Redis记录"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/redis.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="编译安装Redis记录"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/1da8e73d/" title="编译安装Redis记录">编译安装Redis记录</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-07-21T08:37:32.000Z" title="发表于 2023-07-21 16:37:32">2023-07-21</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%9F%BA%E7%A1%80%E8%BF%90%E7%BB%B4/">基础运维</a></span></div><div class="content">下载解压123wget https://download.redis.io/releases/redis-6.0.9.tar.gztar xf redis-6.0.9.tar.gzcd redis-6.2.13

编译编译需要 gcc
1make

安装123sudo mkdir -p /usr/local/redis/&#123;bin,conf&#125;sudo cp src/&#123;redis-benchmark,redis-check-aof,redis-check-rdb,redis-cli,redis-server&#125; /usr/local/redis/bin/sudo cp redis.conf /usr/local/redis/conf/redis.conf

启动1/usr/local/redis/bin/redis-server /usr/local/redis/conf/redis.conf

通过 systemd 管理vim &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;redis.service ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/af97998/" title="Kubernetes的3中探针readinessProbe、livenessProbe和startupProbe"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/kubernetes.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes的3中探针readinessProbe、livenessProbe和startupProbe"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/af97998/" title="Kubernetes的3中探针readinessProbe、livenessProbe和startupProbe">Kubernetes的3中探针readinessProbe、livenessProbe和startupProbe</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-07-20T08:41:33.000Z" title="发表于 2023-07-20 16:41:33">2023-07-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AE%B9%E5%99%A8/">容器</a></span></div><div class="content">探针K8S 提供了 3 种探针
startupProbe 启动检查（1.16 版本新增）livenessProbe 存活检查readinessProbe 就绪检查
startupProbekubernetes 1.16 版本新增功能，用于判断容器内应用程序是否已经启动，如果配置了 startuprobe，就会先禁用其他的探测，直到它成功为止，成功后将不再进行探测。
1234567891011startupProbe:                     # 健康检查方式：[readinessProbe,livenessProbe,StartupProbe]  failureThreshold: 3             # 检测失败3次表示未就绪  httpGet:                        # 请求方式    path: /health                 # 请求路径    port: 8080                    # 请求端口    scheme: HTTP                  # 请求协议  initialD ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/d7f12bf0/" title="MySQL慢查询日志"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/MySQL.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL慢查询日志"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/d7f12bf0/" title="MySQL慢查询日志">MySQL慢查询日志</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-07-20T08:31:08.000Z" title="发表于 2023-07-20 16:31:08">2023-07-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span></div><div class="content">慢 SQL 一般都是指慢查询
开启慢查询会带来一定的性能影响。参考: http://c.biancheng.net/view/7782.html
查询慢查询日志功能状态默认情况下，慢查询日志功能是关闭的。可以通过以下命令查看是否开启慢查询日志功能。命令和执行过程如下：
12345678910111213141516mysql&gt; SHOW VARIABLES LIKE &#x27;slow_query%&#x27;;+---------------------+---------------------------------------------------------------------+| Variable_name       | Value                                                               |+---------------------+---------------------------------------------------------------------+| slow_qu ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/1e91b84d/" title="webdav使用记录"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="webdav使用记录"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/1e91b84d/" title="webdav使用记录">webdav使用记录</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-07-03T23:23:12.000Z" title="发表于 2023-07-04 07:23:12">2023-07-04</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></span></div><div class="content">在 windows 挂载到 z 盘12:: 映射坚果云webdav, PERSISTENT:no表示不会记忆映射, 重启会丢失.net use Z: https://dav.jianguoyun.com/dav/ /user:iuxt@qq.com &lt;密码&gt; /PERSISTENT:no

通过 curl 使用 webdav上传文件12345# 本地的test-new.zip文件上传到远程为test.zipcurl --user x@zahui.fan:&lt;密码&gt; https://file.babudiu.com/dav/test.zip -T ./test-new.zip # 保留文件名不变curl --user x@zahui.fan:&lt;密码&gt; https://file.babudiu.com/dav/ -T ./test-new.zip 

创建目录12# 创建根目录 xxxxxxxcurl --user x@zahui.fan:&lt;密码&gt; -X MKCOL https://file.babudiu.com/dav/xxxxxxx/

 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/5d196648/" title="python处理字符串"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/python.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="python处理字符串"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/5d196648/" title="python处理字符串">python处理字符串</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-06-30T11:50:38.000Z" title="发表于 2023-06-30 19:50:38">2023-06-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BC%80%E5%8F%91/">开发</a></span></div><div class="content">读取多行字符串使用字符串的 splitlines 方法
12345678data = &#x27;&#x27;&#x27;1 2 34 5 67 8 9&#x27;&#x27;&#x27;# data.splitlines()  --&gt;  [&#x27;1 2 3&#x27;, &#x27;4 5 6&#x27;, &#x27;7 8 9&#x27;]for line in data.splitlines():    i = [i for i in line.split(&#x27; &#x27;) if i] # 去除列表中的空值    print(i)

字符串格式化使用 % 这种格式化方式即将被废弃, 可以使用 &#123;&#125; 这种占位符, 更直观
使用位置替换12345678910&gt;&gt;&gt; &#x27;&#123;0&#125;, &#123;1&#125;, &#123;2&#125;&#x27;.format(&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;)&#x27;a, b, c&#x27;&gt; ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/6f69bd6/" title="在ubuntu22.04或LinuxMint21上安装深信服Easyconnect"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/vpn.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在ubuntu22.04或LinuxMint21上安装深信服Easyconnect"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/6f69bd6/" title="在ubuntu22.04或LinuxMint21上安装深信服Easyconnect">在ubuntu22.04或LinuxMint21上安装深信服Easyconnect</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-06-28T11:01:53.000Z" title="发表于 2023-06-28 19:01:53">2023-06-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></span></div><div class="content">正常在 ubuntu22.04 或者 linuxmint21 上安装 Easyconnect, 可以安装, 但是无法启动.
是因为 pango 这个库版本较高导致. 需要手动将低版本的动态链接库放到 easyconnect 程序目录下.
只想安装的朋友, 直接使用一键安装脚本即可, 不用看完这篇文章.
一键安装脚本
LinuxMint21 测试通过

1234curl -OL -C - https://download.sangfor.com.cn/download/product/sslvpn/pkg/linux_767/EasyConnect_x64_7_6_7_3.debcurl -OL -C - https://file.babudiu.com/f/AQHE/EasyConnect_pango.tar.gzcurl -OL -C - https://file.babudiu.com/f/B1I8/install.shsudo bash ./install.sh

查看链接库12cd /usr/share/sangfor/EasyConnectldd EasyConnect |  ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/e367d008/" title="Python列表操作"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/python.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python列表操作"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/e367d008/" title="Python列表操作">Python列表操作</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-06-27T07:36:51.000Z" title="发表于 2023-06-27 15:36:51">2023-06-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BC%80%E5%8F%91/">开发</a></span></div><div class="content">列表去除空值123i = [ &quot;a&quot;, &quot;&quot;, &quot;&quot;, &quot;b&quot;, &quot;&quot;, &quot;c&quot;, &quot;&quot; ]i = [ tmp for tmp in i if tmp ]print(i)
</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/52feaa76/" title="kubernetes节点维护流程"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/kubernetes.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="kubernetes节点维护流程"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/52feaa76/" title="kubernetes节点维护流程">kubernetes节点维护流程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-06-26T15:06:49.000Z" title="发表于 2023-06-26 23:06:49">2023-06-26</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AE%B9%E5%99%A8/">容器</a></span></div><div class="content">
节点设置为 SchedulingDisabled 其实就是打上污点 node.kubernetes.io/unschedulable:NoSchedule




命令
说明



kubectl cordon 
将 node 设置为 SchedulingDisabled, 不允许新的 pod 调度上来, 旧的 pod 不受影响


kubectl drain 
先驱逐 node 上的 pod, k8s 会在其他节点重新创建, 然后将节点设置为 SchedulingDisabled


kubectl uncordon 
恢复调度, 删除 SchedulingDisabled 污点


操作流程常规操作将节点上现有的 pod 驱逐, 不追求优雅
1kubectl drain &lt;node&gt; --delete-local-data=true --ignore-daemonsets=true --force

操作完毕后, 将节点恢复调度
1kubectl uncordon &lt;node&gt;

对集群无影响的操作先针对节点执行
1kubectl cordon &lt;n ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/posts/67853ccb/" title="二进制部署Kuberntes"><img class="post-bg" src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/kubernetes.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="二进制部署Kuberntes"></a></div><div class="recent-post-info"><a class="article-title" href="/posts/67853ccb/" title="二进制部署Kuberntes">二进制部署Kuberntes</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-06-13T09:53:43.000Z" title="发表于 2023-06-13 17:53:43">2023-06-13</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%AE%B9%E5%99%A8/">容器</a></span></div><div class="content">一些基本信息我这里以 AlmaLinux9 系统为例，类似 CentOS9 或 RHEL9 ，其他系统部分操作需要根据情况修改。



主机名称
IP 地址
说明
Kubernetes 组件
其他软件



master1
10.0.0.11
master 节点
kube-apiserver、kube-controller-manager、kube-scheduler、etcd、kubelet、kube-proxy
haproxy、keepalived、containerd


master2
10.0.0.12
master 节点
kube-apiserver、kube-controller-manager、kube-scheduler、etcd、kubelet、kube-proxy
haproxy、keepalived、containerd


master3
10.0.0.13
master 节点
kube-apiserver、kube-controller-manager、kube-scheduler、etcd、kubelet、kube-proxy
haproxy、keepal ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/9/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/#content-inner">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/#content-inner">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/#content-inner">32</a><a class="extend next" rel="next" href="/page/11/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src="https://static.zahui.fan/public/dog.svg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">张理坤</div><div class="author-info__description">张理坤的博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">315</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">208</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/iuxt"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/iuxt" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:x@zahui.fan" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/165330963" rel="external nofollow noreferrer" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="https://stackoverflow.com/users/15620461/" rel="external nofollow noreferrer" target="_blank" title="StackOverflow"><i class="fa-brands fa-stack-overflow"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-square-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">此博客为我记录运维工作总结所用，供网友阅读参考，如有侵权，请通知我，我会核实后进行处理。
本站内容若出现语句磕磕绊绊、错字连篇、胡言乱语等问题，皆系本人文化水平低之缘故，与所用输入法无关，特此声明。
</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/lm9yw00q/" title="Linux终端复用器Screen和tmux">Linux终端复用器Screen和tmux</a><time datetime="2024-10-15T06:31:40.000Z" title="更新于 2024-10-15 14:31:40">2024-10-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/2de1df7e/" title="Linux定时执行任务crontab">Linux定时执行任务crontab</a><time datetime="2024-10-14T11:06:52.000Z" title="更新于 2024-10-14 19:06:52">2024-10-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/63d10d9c/" title="Linux的crontab无法执行的一些问题">Linux的crontab无法执行的一些问题</a><time datetime="2024-10-14T11:06:52.000Z" title="更新于 2024-10-14 19:06:52">2024-10-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/sl8dop/" title="Grafana 接入 LDAP 认证">Grafana 接入 LDAP 认证</a><time datetime="2024-10-12T08:09:12.000Z" title="更新于 2024-10-12 16:09:12">2024-10-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/542f557/" title="Windows搜索工具everything">Windows搜索工具everything</a><time datetime="2024-09-30T10:13:01.000Z" title="更新于 2024-09-30 18:13:01">2024-09-30</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Windows/"><span class="card-category-list-name">Windows</span><span class="card-category-list-count">46</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%9F%BA%E7%A1%80%E8%BF%90%E7%BB%B4/"><span class="card-category-list-name">基础运维</span><span class="card-category-list-count">116</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%AE%B9%E5%99%A8/"><span class="card-category-list-name">容器</span><span class="card-category-list-count">60</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/"><span class="card-category-list-name">工具</span><span class="card-category-list-count">37</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%BC%80%E5%8F%91/"><span class="card-category-list-name">开发</span><span class="card-category-list-count">20</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="card-category-list-name">数据库</span><span class="card-category-list-count">14</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%97%A5%E5%BF%97/"><span class="card-category-list-name">日志</span><span class="card-category-list-count">9</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%9B%91%E6%8E%A7/"><span class="card-category-list-name">监控</span><span class="card-category-list-count">13</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Script/" style="font-size: 1.34em; color: #99a3b0">Script</a> <a href="/tags/Monitor/" style="font-size: 1.14em; color: #999b9d">Monitor</a> <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="font-size: 1.1em; color: #999">大数据</a> <a href="/tags/mysql/" style="font-size: 1.18em; color: #999ca1">mysql</a> <a href="/tags/%E4%BB%93%E5%BA%93/" style="font-size: 1.1em; color: #999">仓库</a> <a href="/tags/harbor/" style="font-size: 1.1em; color: #999">harbor</a> <a href="/tags/wsl2/" style="font-size: 1.14em; color: #999b9d">wsl2</a> <a href="/tags/hexo/" style="font-size: 1.22em; color: #999ea4">hexo</a> <a href="/tags/Bash/" style="font-size: 1.14em; color: #999b9d">Bash</a> <a href="/tags/MQ/" style="font-size: 1.14em; color: #999b9d">MQ</a> <a href="/tags/gpg/" style="font-size: 1.1em; color: #999">gpg</a> <a href="/tags/%E5%8D%87%E7%BA%A7%E7%89%88%E6%9C%AC/" style="font-size: 1.1em; color: #999">升级版本</a> <a href="/tags/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" style="font-size: 1.14em; color: #999b9d">配置文件</a> <a href="/tags/lrzsz/" style="font-size: 1.14em; color: #999b9d">lrzsz</a> <a href="/tags/vscode/" style="font-size: 1.1em; color: #999">vscode</a> <a href="/tags/prometheus/" style="font-size: 1.38em; color: #99a4b4">prometheus</a> <a href="/tags/Python/" style="font-size: 1.42em; color: #99a6b7">Python</a> <a href="/tags/log/" style="font-size: 1.1em; color: #999">log</a> <a href="/tags/RemoteControl/" style="font-size: 1.1em; color: #999">RemoteControl</a> <a href="/tags/Kubernetes/" style="font-size: 1.46em; color: #99a7bb">Kubernetes</a> <a href="/tags/linux/" style="font-size: 1.1em; color: #999">linux</a> <a href="/tags/cmd/" style="font-size: 1.22em; color: #999ea4">cmd</a> <a href="/tags/Kafka/" style="font-size: 1.18em; color: #999ca1">Kafka</a> <a href="/tags/%E7%BC%96%E8%AF%91/" style="font-size: 1.14em; color: #999b9d">编译</a> <a href="/tags/Kernel/" style="font-size: 1.18em; color: #999ca1">Kernel</a> <a href="/tags/Tools/" style="font-size: 1.1em; color: #999">Tools</a> <a href="/tags/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/" style="font-size: 1.3em; color: #99a1ac">常用操作</a> <a href="/tags/NFS/" style="font-size: 1.14em; color: #999b9d">NFS</a> <a href="/tags/Elasticsearch/" style="font-size: 1.26em; color: #999fa8">Elasticsearch</a> <a href="/tags/Flask/" style="font-size: 1.1em; color: #999">Flask</a> <a href="/tags/Disk/" style="font-size: 1.18em; color: #999ca1">Disk</a> <a href="/tags/node-exporter/" style="font-size: 1.14em; color: #999b9d">node_exporter</a> <a href="/tags/%E7%BC%96%E7%A0%81/" style="font-size: 1.18em; color: #999ca1">编码</a> <a href="/tags/nacos/" style="font-size: 1.1em; color: #999">nacos</a> <a href="/tags/Automatic/" style="font-size: 1.22em; color: #999ea4">Automatic</a> <a href="/tags/%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/" style="font-size: 1.5em; color: #99a9bf">配置记录</a> <a href="/tags/docker/" style="font-size: 1.14em; color: #999b9d">docker</a> <a href="/tags/database/" style="font-size: 1.1em; color: #999">database</a> <a href="/tags/OpenLDAP/" style="font-size: 1.14em; color: #999b9d">OpenLDAP</a> <a href="/tags/SQL/" style="font-size: 1.1em; color: #999">SQL</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><span class="card-archive-list-count">6</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">315</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-10-15T06:32:40.240Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text"><a target="_blank" rel="noopener external nofollow noreferrer" href='https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral'>
  本网站由<img src= "https://static.zahui.fan/public/windmill.svg" data-lazy-src='https://static.zahui.fan/public/upyun.svg' alt='又拍云' width='70' height='28' style="vertical-align:bottom">
  提供CDN加速/云存储服务
</a>
</br>
<a href="https://beian.miit.gov.cn/" rel="external nofollow noreferrer" target="_blank">沪ICP备2021015230号-1</a>
</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('/pluginsSrc/typed.js/dist/typed.umd.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["♥ Do have faith in what you're doing.","欲穷千里目，更上一层楼。","学而不思则罔，思而不学则殆。"])
  } else {
    document.getElementById("subtitle").textContent = "♥ Do have faith in what you're doing."
  }
}
typedJSFn.run(subtitleType)</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="/pluginsSrc/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>