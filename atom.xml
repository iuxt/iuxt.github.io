<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>杂烩饭</title>
  <icon>https://zahui.fan/icon.png</icon>
  <subtitle>张理坤的博客 - 运维技术分享</subtitle>
  <link href="https://zahui.fan/atom.xml" rel="self"/>
  
  <link href="https://zahui.fan/"/>
  <updated>2024-11-19T07:18:26.000Z</updated>
  <id>https://zahui.fan/</id>
  
  <author>
    <name>张理坤</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>生产环境Prometheus监控架构记录</title>
    <link href="https://zahui.fan/posts/sn6pu2/"/>
    <id>https://zahui.fan/posts/sn6pu2/</id>
    <published>2024-11-19T06:25:14.000Z</published>
    <updated>2024-11-19T07:18:26.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;比如有 30 家客户，每一个客户都有自己的 Kubernetes 集群，部署方式千差万别，还有客户不使用 Kubernetes 的，使用虚拟机部署，那么怎么对这么多客户的机器、服务进行有效的监控，本文记录一下监控的架构方案。&lt;/p&gt;
&lt;h2 id=&quot;监控架构图&quot;&gt;&lt;a</summary>
        
      
    
    
    
    <category term="监控" scheme="https://zahui.fan/categories/%E7%9B%91%E6%8E%A7/"/>
    
    
  </entry>
  
  <entry>
    <title>使用snmp exporter对交换机、服务器等进行监控</title>
    <link href="https://zahui.fan/posts/smz2c9/"/>
    <id>https://zahui.fan/posts/smz2c9/</id>
    <published>2024-11-15T03:14:33.000Z</published>
    <updated>2024-11-15T05:09:58.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h2&gt;&lt;p&gt;到 GitHub 下载一个可执行文件，直接运行即可，或者使用 systemd 来运行，也可以直接部署到 Kubernetes</summary>
        
      
    
    
    
    <category term="监控" scheme="https://zahui.fan/categories/%E7%9B%91%E6%8E%A7/"/>
    
    
    <category term="prometheus" scheme="https://zahui.fan/tags/prometheus/"/>
    
    <category term="snmp" scheme="https://zahui.fan/tags/snmp/"/>
    
  </entry>
  
  <entry>
    <title>Windows 开机自启动配置位置</title>
    <link href="https://zahui.fan/posts/smvb2h/"/>
    <id>https://zahui.fan/posts/smvb2h/</id>
    <published>2024-11-13T02:32:40.000Z</published>
    <updated>2024-11-19T09:24:48.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h2 id=&quot;注册表方式&quot;&gt;&lt;a href=&quot;#注册表方式&quot; class=&quot;headerlink&quot; title=&quot;注册表方式&quot;&gt;&lt;/a&gt;注册表方式&lt;/h2&gt;&lt;h4 id=&quot;系统&quot;&gt;&lt;a href=&quot;#系统&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="Windows" scheme="https://zahui.fan/categories/Windows/"/>
    
    
  </entry>
  
  <entry>
    <title>Windows常见注册表位置</title>
    <link href="https://zahui.fan/posts/smvadg/"/>
    <id>https://zahui.fan/posts/smvadg/</id>
    <published>2024-11-13T02:17:40.000Z</published>
    <updated>2024-11-19T02:07:01.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h2 id=&quot;oem-信息&quot;&gt;&lt;a href=&quot;#oem-信息&quot; class=&quot;headerlink&quot; title=&quot;oem 信息&quot;&gt;&lt;/a&gt;oem 信息&lt;/h2&gt;&lt;h3 id=&quot;添加-oem-信息&quot;&gt;&lt;a href=&quot;#添加-oem-信息&quot;</summary>
        
      
    
    
    
    <category term="Windows" scheme="https://zahui.fan/categories/Windows/"/>
    
    
  </entry>
  
  <entry>
    <title>Prometheus的瞬时向量(Instant vector)和区间向量(Range vector)</title>
    <link href="https://zahui.fan/posts/smrno6/"/>
    <id>https://zahui.fan/posts/smrno6/</id>
    <published>2024-11-11T03:14:30.000Z</published>
    <updated>2024-11-11T03:25:17.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;在 Prometheus 的表达式语言中，表达式或子表达式包括以下四种类型之一：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;瞬时向量（Instant vector） ：</summary>
        
      
    
    
    
    <category term="监控" scheme="https://zahui.fan/categories/%E7%9B%91%E6%8E%A7/"/>
    
    
    <category term="prometheus" scheme="https://zahui.fan/tags/prometheus/"/>
    
  </entry>
  
  <entry>
    <title>mRemoteNG 如何显示保存的密码</title>
    <link href="https://zahui.fan/posts/sm0nds/"/>
    <id>https://zahui.fan/posts/sm0nds/</id>
    <published>2024-10-27T13:13:04.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;mRemoteNG 是一款比较好用的 Windows 平台的连接 RDP 的管理工具，非常好用，支持选项卡，配置文件管理，账号密码管理等。虽然现在 xshell 8 也支持连接 rdp 了，但是没有这个好用。mRemoteNG 也支持连接 vnc 和</summary>
        
      
    
    
    
    <category term="工具" scheme="https://zahui.fan/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="rdp" scheme="https://zahui.fan/tags/rdp/"/>
    
  </entry>
  
  <entry>
    <title>快速部署单节点kafka</title>
    <link href="https://zahui.fan/posts/slhl3q/"/>
    <id>https://zahui.fan/posts/slhl3q/</id>
    <published>2024-10-17T06:09:25.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;如果需要集群部署的文档你可以在站内搜搜，之前写过。&lt;/p&gt;
&lt;p&gt;单节点部署，不考虑高可用性，只求快速搭建出环境，一般都是自己开发或者运维做测试使用。或者业务的测试环境为了节省服务器资源采取的方案。不过我不一样，我们测试环境资源充足，我只是单纯的懒。&lt;/p&gt;
&lt;h2</summary>
        
      
    
    
    
    <category term="基础运维" scheme="https://zahui.fan/categories/%E5%9F%BA%E7%A1%80%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="Docker" scheme="https://zahui.fan/tags/Docker/"/>
    
    <category term="Kafka" scheme="https://zahui.fan/tags/Kafka/"/>
    
  </entry>
  
  <entry>
    <title>yaml多行文本的写法和区别</title>
    <link href="https://zahui.fan/posts/sldz99/"/>
    <id>https://zahui.fan/posts/sldz99/</id>
    <published>2024-10-15T07:24:45.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;直接看效果（&lt;code&gt;pip install pyyaml&lt;/code&gt;）：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span</summary>
        
      
    
    
    
    <category term="开发" scheme="https://zahui.fan/categories/%E5%BC%80%E5%8F%91/"/>
    
    
  </entry>
  
  <entry>
    <title>Grafana 接入 LDAP 认证</title>
    <link href="https://zahui.fan/posts/sl8dop/"/>
    <id>https://zahui.fan/posts/sl8dop/</id>
    <published>2024-10-12T06:50:48.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;&lt;code&gt;Grafana&lt;/code&gt; 是一个非常好用的展示数据软件，我一直以为可以直接在设置里增加 ldap 配置，没想到啊没想到 必须要修改配置文件才能接入到 &lt;code&gt;LDAP&lt;/code&gt;，还是记录一下吧，免得下次部署浪费时间。&lt;/p&gt;
&lt;p&gt;我是在</summary>
        
      
    
    
    
    <category term="监控" scheme="https://zahui.fan/categories/%E7%9B%91%E6%8E%A7/"/>
    
    
    <category term="OpenLDAP" scheme="https://zahui.fan/tags/OpenLDAP/"/>
    
    <category term="grafana" scheme="https://zahui.fan/tags/grafana/"/>
    
  </entry>
  
  <entry>
    <title>用Prometheus对nacos集群进行监控</title>
    <link href="https://zahui.fan/posts/skma0p/"/>
    <id>https://zahui.fan/posts/skma0p/</id>
    <published>2024-09-30T08:24:24.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;参考官方文档：&lt;a href=&quot;https://nacos.io/zh-cn/docs/monitor-guide.html&quot;&gt;https://nacos.io/zh-cn/docs/monitor-guide.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;暴露</summary>
        
      
    
    
    
    <category term="监控" scheme="https://zahui.fan/categories/%E7%9B%91%E6%8E%A7/"/>
    
    
    <category term="prometheus" scheme="https://zahui.fan/tags/prometheus/"/>
    
    <category term="nacos" scheme="https://zahui.fan/tags/nacos/"/>
    
  </entry>
  
  <entry>
    <title>在Kubernetes下收集ingress日志到Elasticsearch</title>
    <link href="https://zahui.fan/posts/skk1ln/"/>
    <id>https://zahui.fan/posts/skk1ln/</id>
    <published>2024-09-29T03:27:22.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;本文 ingress 用的是 Nginx-ingress，普通的 Nginx 原理是一样的。容器运行时是 Docker。&lt;/p&gt;
&lt;h2 id=&quot;ingress-配置&quot;&gt;&lt;a href=&quot;#ingress-配置&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="日志" scheme="https://zahui.fan/categories/%E6%97%A5%E5%BF%97/"/>
    
    
    <category term="Elasticsearch" scheme="https://zahui.fan/tags/Elasticsearch/"/>
    
    <category term="Kafka" scheme="https://zahui.fan/tags/Kafka/"/>
    
    <category term="filebeat" scheme="https://zahui.fan/tags/filebeat/"/>
    
    <category term="logstash" scheme="https://zahui.fan/tags/logstash/"/>
    
  </entry>
  
  <entry>
    <title>Grafana中自定义Legend的名字和自定义value的显示</title>
    <link href="https://zahui.fan/posts/skf07c/"/>
    <id>https://zahui.fan/posts/skf07c/</id>
    <published>2024-09-26T10:09:12.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h2 id=&quot;针对-value-的值进行修改解释&quot;&gt;&lt;a href=&quot;#针对-value-的值进行修改解释&quot; class=&quot;headerlink&quot; title=&quot;针对 value 的值进行修改解释&quot;&gt;&lt;/a&gt;针对 value 的值进行修改解释&lt;/h2&gt;&lt;p&gt;举个例子：使用</summary>
        
      
    
    
    
    <category term="监控" scheme="https://zahui.fan/categories/%E7%9B%91%E6%8E%A7/"/>
    
    
    <category term="prometheus" scheme="https://zahui.fan/tags/prometheus/"/>
    
    <category term="grafana" scheme="https://zahui.fan/tags/grafana/"/>
    
  </entry>
  
  <entry>
    <title>Nginx Ingress 暴露没有定义Host的ingress的Metrics数据</title>
    <link href="https://zahui.fan/posts/sk5u8v/"/>
    <id>https://zahui.fan/posts/sk5u8v/</id>
    <published>2024-09-21T11:22:06.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h2 id=&quot;指定默认的-ingress-后端&quot;&gt;&lt;a href=&quot;#指定默认的-ingress-后端&quot; class=&quot;headerlink&quot; title=&quot;指定默认的 ingress 后端&quot;&gt;&lt;/a&gt;指定默认的 ingress</summary>
        
      
    
    
    
    <category term="容器" scheme="https://zahui.fan/categories/%E5%AE%B9%E5%99%A8/"/>
    
    
    <category term="Nginx" scheme="https://zahui.fan/tags/Nginx/"/>
    
    <category term="ingress" scheme="https://zahui.fan/tags/ingress/"/>
    
    <category term="prometheus" scheme="https://zahui.fan/tags/prometheus/"/>
    
  </entry>
  
  <entry>
    <title>Kubernetes配置镜像仓库认证imagePullSecrets</title>
    <link href="https://zahui.fan/posts/sjmzr1/"/>
    <id>https://zahui.fan/posts/sjmzr1/</id>
    <published>2024-09-11T07:06:36.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h2 id=&quot;创建-secret&quot;&gt;&lt;a href=&quot;#创建-secret&quot; class=&quot;headerlink&quot; title=&quot;创建 secret&quot;&gt;&lt;/a&gt;创建 secret&lt;/h2&gt;&lt;p&gt;可以在 namespace 里用一个全局的 image pull</summary>
        
      
    
    
    
    <category term="容器" scheme="https://zahui.fan/categories/%E5%AE%B9%E5%99%A8/"/>
    
    
    <category term="配置记录" scheme="https://zahui.fan/tags/%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>fail2ban失效排查</title>
    <link href="https://zahui.fan/posts/sjcnkn/"/>
    <id>https://zahui.fan/posts/sjcnkn/</id>
    <published>2024-09-05T17:07:35.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h2 id=&quot;selinux&quot;&gt;&lt;a href=&quot;#selinux&quot; class=&quot;headerlink&quot; title=&quot;selinux&quot;&gt;&lt;/a&gt;selinux&lt;/h2&gt;&lt;p&gt;容易忽略的一点，selinux 会限制 fail2ban 的执行， 手动运行</summary>
        
      
    
    
    
    <category term="基础运维" scheme="https://zahui.fan/categories/%E5%9F%BA%E7%A1%80%E8%BF%90%E7%BB%B4/"/>
    
    
  </entry>
  
  <entry>
    <title>Prometheus中查询无数据提供默认值</title>
    <link href="https://zahui.fan/posts/sjaoe0/"/>
    <id>https://zahui.fan/posts/sjaoe0/</id>
    <published>2024-09-04T15:30:00.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;单一时间序列（时间戳）的样本。具体来说，&lt;code&gt;vector(0)&lt;/code&gt; 将创建一个包含值 0 的瞬时向量（即在某个时间点的时间序列）。&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td</summary>
        
      
    
    
    
    <category term="监控" scheme="https://zahui.fan/categories/%E7%9B%91%E6%8E%A7/"/>
    
    
  </entry>
  
  <entry>
    <title>kubectl导出的yaml忽略指定字段</title>
    <link href="https://zahui.fan/posts/sj8cec/"/>
    <id>https://zahui.fan/posts/sj8cec/</id>
    <published>2024-09-03T09:15:48.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;kubectl 指定 -o yaml 输出的 yaml 文件包含一些默认字段，这些字段我们是不需要的，可以使用 yq 来进行去除这些字段，生成的 yaml 文件可以用于迁移&amp;#x2F;部署服务等。&lt;/p&gt;
&lt;h2 id=&quot;安装-yq&quot;&gt;&lt;a href=&quot;#安装-yq&quot;</summary>
        
      
    
    
    
    <category term="容器" scheme="https://zahui.fan/categories/%E5%AE%B9%E5%99%A8/"/>
    
    
  </entry>
  
  <entry>
    <title>MySQL进行文件操作</title>
    <link href="https://zahui.fan/posts/sio0v4/"/>
    <id>https://zahui.fan/posts/sio0v4/</id>
    <published>2024-08-23T09:54:40.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;我执行了这条命令：&lt;/p&gt;
&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td</summary>
        
      
    
    
    
    <category term="数据库" scheme="https://zahui.fan/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
  </entry>
  
  <entry>
    <title>PyCharm配合WSL进行开发</title>
    <link href="https://zahui.fan/posts/sik0ul/"/>
    <id>https://zahui.fan/posts/sik0ul/</id>
    <published>2024-08-21T06:03:57.000Z</published>
    <updated>2024-10-31T03:20:09.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;本文使用 WSL2，WSL2 里面安装了 Docker， PyCharm 支持的配合 wsl 进行使用的方法有很多种，这里提供几个思路&lt;/p&gt;
&lt;p&gt;方法 1: WSL 远程开发（目前 BETA 版）&lt;br&gt;方法 2: 代码放在 Windows 上，Python 解释器在</summary>
        
      
    
    
    
    <category term="工具" scheme="https://zahui.fan/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="开发工具配置" scheme="https://zahui.fan/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>使用Python开发一个Prometheus exporter</title>
    <link href="https://zahui.fan/posts/siij5o/"/>
    <id>https://zahui.fan/posts/siij5o/</id>
    <published>2024-08-20T10:44:11.000Z</published>
    <updated>2024-11-19T07:18:26.000Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;需求：需要监控指定的邮箱发送邮件是否正常，使用 Prometheus 官方的 Python sdk，代码如下：&lt;/p&gt;
&lt;h2 id=&quot;代码&quot;&gt;&lt;a href=&quot;#代码&quot; class=&quot;headerlink&quot; title=&quot;代码&quot;&gt;&lt;/a&gt;代码&lt;/h2&gt;&lt;figure</summary>
        
      
    
    
    
    <category term="监控" scheme="https://zahui.fan/categories/%E7%9B%91%E6%8E%A7/"/>
    
    
  </entry>
  
</feed>
