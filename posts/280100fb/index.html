<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux平台文本编辑器vim | 杂烩饭</title><meta name="author" content="张理坤"><meta name="copyright" content="张理坤"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="常用快捷键   快捷键 说明    i 在当前光标之前插入   a 在当前光标之后插入   I 在当前行 最前面插入   o 在下方新建一行, 然后插入   O 在上方新建一行, 然后插入   G 跳到最后面   gg 跳到最前面   $ 跳到行尾   ^ 跳到行首   v 多选   ctrl v 块选   V 行选   yy 复制一行   p 在光标后粘贴   P 在光标前粘贴   dd 截切">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux平台文本编辑器vim">
<meta property="og:url" content="https://zahui.fan/posts/280100fb/">
<meta property="og:site_name" content="杂烩饭">
<meta property="og:description" content="常用快捷键   快捷键 说明    i 在当前光标之前插入   a 在当前光标之后插入   I 在当前行 最前面插入   o 在下方新建一行, 然后插入   O 在上方新建一行, 然后插入   G 跳到最后面   gg 跳到最前面   $ 跳到行尾   ^ 跳到行首   v 多选   ctrl v 块选   V 行选   yy 复制一行   p 在光标后粘贴   P 在光标前粘贴   dd 截切">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://static.zahui.fan/public/vim.svg">
<meta property="article:published_time" content="2024-12-02T04:51:42.000Z">
<meta property="article:modified_time" content="2024-12-31T03:51:12.000Z">
<meta property="article:author" content="张理坤">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://static.zahui.fan/public/vim.svg"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://zahui.fan/posts/280100fb/"><link rel="preconnect"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/site.webmanifest"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?50b516d50102c8c9ac5f80529b81ca17";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-YN0WWZGVYN"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-YN0WWZGVYN')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-YN0WWZGVYN', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"此文章距离发布已经","messageNext":"天了，内容可能已经过时，请自行判断是否可用或联系博主更新。"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux平台文本编辑器vim',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-12-31 11:51:12'
}</script><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="杂烩饭" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://static.zahui.fan/public/dog.svg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">343</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">215</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://file.babudiu.com/"><i class="fa-fw fa-solid fa-file"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(https://static.zahui.fan/public/vim.svg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="https://static.zahui.fan/public/boob.png" alt="Logo"><span class="site-name">杂烩饭</span></a><a class="nav-page-title" href="/"><span class="site-name">Linux平台文本编辑器vim</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://file.babudiu.com/"><i class="fa-fw fa-solid fa-file"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Linux平台文本编辑器vim</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-12-02T04:51:42.000Z" title="发表于 2024-12-02 12:51:42">2024-12-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-12-31T03:51:12.000Z" title="更新于 2024-12-31 11:51:12">2024-12-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%9F%BA%E7%A1%80%E8%BF%90%E7%BB%B4/">基础运维</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><img src= "https://static.zahui.fan/public/nes.gif" data-lazy-src="https://static.zahui.fan/images/vim_keymap.png" alt="keymap"></p>
<h2 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h2><table>
<thead>
<tr>
<th>快捷键</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>i</td>
<td>在当前光标之前插入</td>
</tr>
<tr>
<td>a</td>
<td>在当前光标之后插入</td>
</tr>
<tr>
<td>I</td>
<td>在当前行 最前面插入</td>
</tr>
<tr>
<td>o</td>
<td>在下方新建一行, 然后插入</td>
</tr>
<tr>
<td>O</td>
<td>在上方新建一行, 然后插入</td>
</tr>
<tr>
<td>G</td>
<td>跳到最后面</td>
</tr>
<tr>
<td>gg</td>
<td>跳到最前面</td>
</tr>
<tr>
<td>$</td>
<td>跳到行尾</td>
</tr>
<tr>
<td>^</td>
<td>跳到行首</td>
</tr>
<tr>
<td>v</td>
<td>多选</td>
</tr>
<tr>
<td>ctrl v</td>
<td>块选</td>
</tr>
<tr>
<td>V</td>
<td>行选</td>
</tr>
<tr>
<td>yy</td>
<td>复制一行</td>
</tr>
<tr>
<td>p</td>
<td>在光标后粘贴</td>
</tr>
<tr>
<td>P</td>
<td>在光标前粘贴</td>
</tr>
<tr>
<td>dd</td>
<td>截切一行</td>
</tr>
<tr>
<td>e</td>
<td>多选模式下   向后一个单词</td>
</tr>
<tr>
<td>b</td>
<td>多选模式下   向前一个单词</td>
</tr>
<tr>
<td>d^</td>
<td>删除到行首</td>
</tr>
<tr>
<td>d$</td>
<td>删除到行尾</td>
</tr>
<tr>
<td>D</td>
<td>删除到行尾</td>
</tr>
</tbody></table>
<h2 id="替换文本"><a href="#替换文本" class="headerlink" title="替换文本"></a>替换文本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接进行全文替换</span></span><br><span class="line">:%s<span class="comment">#原文本#替换后的文本#g</span></span><br><span class="line">:%s/原文本/替换后的文本/g</span><br><span class="line">:%s@原文本@替换后的文本@g</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换前提示用户</span></span><br><span class="line">:%s<span class="comment">#原文本#替换后的文本#gc</span></span><br></pre></td></tr></table></figure>

<h2 id="匹配删除"><a href="#匹配删除" class="headerlink" title="匹配删除"></a>匹配删除</h2><p>删除包含特定字符的行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">:g/pattern/d            <span class="comment"># 全局范围内</span></span><br><span class="line">:1,20g/pattern/d        <span class="comment"># 删除1~20行内匹配的行</span></span><br></pre></td></tr></table></figure>

<p>删除以#开头的注释</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g/^#/d</span><br></pre></td></tr></table></figure>

<p>删除空行</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g/^\s*$/d</span><br></pre></td></tr></table></figure>

<p>删除#后面的行</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g/#.*/d</span><br></pre></td></tr></table></figure>

<p>删除不匹配的行</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">:v/pattern/d</span><br><span class="line">:g!/pattern/d</span><br></pre></td></tr></table></figure>

<blockquote>
<p>patton 里面可以是正则表达式，比如说 ^10.104</p>
</blockquote>
<h3 id="每一行最后添加一个字符"><a href="#每一行最后添加一个字符" class="headerlink" title="每一行最后添加一个字符"></a>每一行最后添加一个字符</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/$/,/</span><br></pre></td></tr></table></figure>

<h3 id="用-sudo-打开"><a href="#用-sudo-打开" class="headerlink" title="用 sudo 打开"></a>用 sudo 打开</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">w</span> !sudo tee %</span><br></pre></td></tr></table></figure>

<h2 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">wq</span>     保存退出</span><br><span class="line">:q      不保存退出</span><br><span class="line">:q!     强制不保存退出</span><br><span class="line">:<span class="keyword">x</span>      保存退出</span><br><span class="line"></span><br><span class="line">ZZ      保存退出，相当于:<span class="keyword">wq</span></span><br><span class="line">ZQ      不保存退出，相当于:q!</span><br></pre></td></tr></table></figure>

<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><blockquote>
<p>全局配置文件 <code>/etc/vim/vimrc</code><br>当前用户配置文件 <code>~/.vimrc</code></p>
</blockquote>
<h3 id="鼠标模式"><a href="#鼠标模式" class="headerlink" title="鼠标模式"></a>鼠标模式</h3><blockquote>
<p>Vim7.1 使用鼠标时会默认进入虚拟选中模式 (visual mode)，就好像通过 v 选中的一样。</p>
</blockquote>
<p>命令模式执行：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">set</span> mouse-=<span class="keyword">a</span></span><br></pre></td></tr></table></figure>

<p>或者将其写入配置文件里</p>
<h2 id="分屏操作"><a href="#分屏操作" class="headerlink" title="分屏操作"></a>分屏操作</h2><table>
<thead>
<tr>
<th>操作</th>
<th>命令</th>
</tr>
</thead>
<tbody><tr>
<td>横向分屏</td>
<td>:sp</td>
</tr>
<tr>
<td>纵向分屏</td>
<td>:vsp</td>
</tr>
<tr>
<td>横向分屏并打开新文件</td>
<td>:sp test.sh</td>
</tr>
<tr>
<td>纵向分屏并打开新文件</td>
<td>:vsp test.sh</td>
</tr>
<tr>
<td>切到其他分屏</td>
<td>先按 Ctrl w 再按 hjkl 调整光标方向</td>
</tr>
</tbody></table>
<h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/preservim/nerdtree.git ~/.vim/pack/vendor/start/nerdtree</span><br><span class="line">vim -u NONE -c <span class="string">&quot;helptags ~/.vim/pack/vendor/start/nerdtree/doc&quot;</span> -c q</span><br></pre></td></tr></table></figure>

<p>vim ~&#x2F;.vimrc</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let NERDTreeWinPos=&quot;left&quot;</span><br><span class="line">noremap &lt;F10&gt; :NERDTreeToggle&lt;CR&gt;</span><br><span class="line">let g:NERDTreeDirArrowExpandable = &#x27;▸&#x27;</span><br><span class="line">let g:NERDTreeDirArrowCollapsible = &#x27;▾&#x27;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>快捷键设置为 F10</p>
</blockquote>
<h2 id="vim-打开中文乱码"><a href="#vim-打开中文乱码" class="headerlink" title="vim 打开中文乱码"></a>vim 打开中文乱码</h2><p>在 <code>~/.vimrc</code> 里增加几行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> termencoding=utf-8</span><br><span class="line"><span class="built_in">set</span> encoding=utf8</span><br><span class="line"><span class="built_in">set</span> fileencodings=utf8,ucs-bom,gbk,cp936,gb2312,gb18030</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://zahui.fan">张理坤</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://zahui.fan/posts/280100fb/">https://zahui.fan/posts/280100fb/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://zahui.fan" target="_blank">杂烩饭</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post-share"><div class="social-share" data-image="https://static.zahui.fan/public/vim.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/lmojvw5l/" title="使用RedisShake进行Redis迁移"><img class="cover" src="https://static.zahui.fan/public/redis.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">使用RedisShake进行Redis迁移</div></div><div class="info-2"><div class="info-item-1">对于自建的 redis, 我们可以将 rdb&#x2F;aof 文件拷贝到目的 redis, 启动恢复, 但是云 redis 或者某些特殊情况, 比如没有云平台的权限等等情况, 可以使用工具来进行迁移. RedisShake 是阿里云 Tair 团队 积极维护的一个项目。它的演变可以追溯到其初始版本，该版本是从 redis-port 分支出来的。官方文档https://tair-opensource.github.io/RedisShake/zh/guide/introduction.html 安装12wget https://github.com/tair-opensource/RedisShake/releases/download/v4.0.0/redis-shake-linux-amd64.tar.gztar xf redis-shake-linux-amd64.tar.gz  同步迁移创建一个配置文件 redis_sync.toml 12345678910111213[sync_reader]cluster = false            #...</div></div></div></a><a class="pagination-related" href="/posts/snui2r/" title="Elasticsearch索引生命周期配置"><img class="cover" src="https://static.zahui.fan/public/elasticsearch.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Elasticsearch索引生命周期配置</div></div><div class="info-2"><div class="info-item-1">参考https://www.cnblogs.com/feifuzeng/p/13563430.htmlhttps://blog.csdn.net/feiying0canglang/article/details/129789161 这里以 Elasticsearch 7.17.14 为例，7.8 版本之前与之后有一点区别。7.8 之后的 API 是：_index_template，7.8 之前的命令是：_template 设置索引模板模板是为了让创建的索引按照一定的规则，比如索引按天分割，手动给每个索引做配置太麻烦 创建生命周期策略1234567891011121314151617# 设置ingress日志保留14天，超过14天删除。PUT _ilm/policy/ingress-log-retention-policy&#123;  &quot;policy&quot;: &#123;    &quot;phases&quot;: &#123;      &quot;hot&quot;: &#123;        &quot;actions&quot;:...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/57e7c794/" title="打造一个赏心悦目的终端"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">打造一个赏心悦目的终端</div></div><div class="info-2"><div class="info-item-1"> 本文基于 Windows 平台，系统用的是 WSL(ubuntu 20.04)，shell 用的是 zsh，linux 系统应该类似  先看效果：Windows Terminal: VsCode: oh-my-zsh 官方页面：https://ohmyz.sh/github 地址：https://github.com/ohmyzsh/ohmyzsh  安装12apt install zshsh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;  配置主题我使用的是https://github.com/romkatv/powerlevel10k 1git clone --depth=1 https://github.com/romkatv/powerlevel10k.git...</div></div></div></a><a class="pagination-related" href="/posts/f4ea28c3/" title="LVM逻辑卷管理"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">LVM逻辑卷管理</div></div><div class="info-2"><div class="info-item-1">LVM 是 Logical Volume Manager 的缩写，中文逻辑卷管理，LVM 是建立在磁盘分区和文件系统之间的一个逻辑层，LVM 会更加灵活，可以动态扩容缩容分区大小。调整分区大小有风险，请做好充分测试再决定是否执行。如果没有启用 lvm，请查看 linux磁盘扩容 - 非LVM那么怎么知道机器有没有启用 LVM 呢，可以执行 sudo lvdisplay 查看有没有已存在的 LV，对比 df -hT 里面的 Filesystem，也可以用 lsblk 查看有没有 lvm。 记住一点， 如果你的磁盘没有分区并已经在使用中， 那么千万不要使用 fdisk 来分区，会损坏数据！！！   LVM 的一些概念PV： 物理卷，比如一个分区，一个磁盘VG： 卷组，将多个 PV 整合在一起，形成一个大的池子LV： 逻辑卷，从 VG 划分出来一个个空间，可以当作分区来看待，可以格式化，可以挂载 常用命令    查看 查看详细信息 扩展 创建    卷组 VG vgs vgdisplay vgextend vgcreate   逻辑卷...</div></div></div></a><a class="pagination-related" href="/posts/23ada041/" title="Linux下tmp目录的管理"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Linux下tmp目录的管理</div></div><div class="info-2"><div class="info-item-1">生成临时文件可以使用 mktemp 命令生成 tmp 文件，mktemp -d 生成临时目录，避免临时目录重复使用的问题 123456#!/bin/bashtmp_file=&quot;$(mktemp)&quot;tmp_folder=&quot;$(mktemp -d)&quot;echo $tmp_fileecho $tmp_folder  tmp 目录定时清理这个是由 systemd 的几个模块实现的， 在 centos7 中： 123systemd-tmpfiles-setup.service  ：Create Volatile Files and Directoriessystemd-tmpfiles-setup-dev.service：Create static device nodes in /devsystemd-tmpfiles-clean.service ：Cleanup of Temporary Directories  配置文件也有 3...</div></div></div></a><a class="pagination-related" href="/posts/2c88f7f6/" title="Linux使用nologin用户执行命令"><img class="cover" src="https://static.zahui.fan/public/bash.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Linux使用nologin用户执行命令</div></div><div class="info-2"><div class="info-item-1"> 我们知道可以通过编辑 /etc/passwd 给某些用户设置 shell 为 nologin 或 false 可以阻止这些用户登录但某些时候需要特定的用户来执行命令，可以使用 sudo 或 su 来临时切换用户执行  使用 susu -s 是指定 shell，这里 www 用户默认 shell 是 nologin 这里指定使用 /bin/bash, -c 后面接需要运行的命令 1su www -s /bin/bash -c &quot;mkdir /tmp/111&quot;  使用 sudo使用 www 用户来执行 mkdir /tmp/111 1sudo -u www mkdir /tmp/111 </div></div></div></a><a class="pagination-related" href="/posts/1b957a56/" title="Linux内核参数"><img class="cover" src="https://static.zahui.fan/public/linux.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Linux内核参数</div></div><div class="info-2"><div class="info-item-1">修改内核参数临时修改修改&#x2F;proc 目录1echo 2048 &gt; /proc/sys/net/core/somaxconn   &#x2F;proc&#x2F;sys&#x2F; 目录是 Linux 内核启动后生成的伪目录，其目录下的 net 文件夹中存放了当前系统中生效的所有内核参数、目录树结构与参数的完整名称相关，如 net.ipv4.tcp_tw_recycle，它对应的文件是 &#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv4&#x2F;tcp_tw_recycle，文件的内容就是参数值。  sysctl 命令修改1sysctl -w net.ipv4.tcp_tw_recycle=&quot;0&quot;  永久修改123vim /etc/sysctl.confnet.core.somaxconn = 2048sysctl -p  查看内核参数查看&#x2F;proc&#x2F;目录1cat /proc/sys/net/ipv4/tcp_tw_recycle  sysctl 查看12sysctl -a            ...</div></div></div></a><a class="pagination-related" href="/posts/lra06cl1/" title="Linux大文件分割与合并"><img class="cover" src="https://static.zahui.fan/public/bash.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Linux大文件分割与合并</div></div><div class="info-2"><div class="info-item-1">服务器上有个文件需要下载到本地, 但是文件较大, 我们都是通过 jumpserver 连接的, 通过 jumpserver 下载难免会遇到网络波动等导致下载失败, 我们可以通过分割大文件成一个个小文件, 然后下载后再在本地合并. 用到的命令是 split split 分割大文件1split -b 1024M -d -a 3 2023.tar.gz tmp.  参数说明:    参数 说明    -b 指定每个文件的大小, 支持 K M G   -d 指定后缀编码为数字，默认编码为字母   -a 指定后缀长度,3 表示 3 位数, 比如上面的命令, 生成的文件就是 tmp.000 …   .&#x2F;tmp. 这个是生成的文件名前面的部分   如果报错 split: output file suffixes exhausted 说明后缀不够用了, 比如参数 -a 1  支持的后缀为 0 - 9 , 如果文件太大, 超过了 9, 就会报这个错. 使用 cat 合并大文件1cat tmp.* &gt; 2023.tar.gz  合并完成再验证一下 MD5 值,...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://static.zahui.fan/public/dog.svg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">张理坤</div><div class="author-info-description">张理坤的博客</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">343</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">215</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/iuxt"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/iuxt" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:x@zahui.fan" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/165330963" rel="external nofollow noreferrer" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="https://stackoverflow.com/users/15620461/" rel="external nofollow noreferrer" target="_blank" title="StackOverflow"><i class="fa-brands fa-stack-overflow"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-square-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">此博客为我记录运维工作总结所用，供网友阅读参考，如有侵权，请通知我，我会核实后进行处理。</br>
<strong style="color: red;">欢迎加入技术交流群：</strong>
<div class="aside-qrcode" >
<img src="https://src.babudiu.com/card/wechat_ops_group.JPG" title="微信群" width="100%" height="auto">
</div>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-number">1.</span> <span class="toc-text">常用快捷键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%E6%96%87%E6%9C%AC"><span class="toc-number">2.</span> <span class="toc-text">替换文本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D%E5%88%A0%E9%99%A4"><span class="toc-number">3.</span> <span class="toc-text">匹配删除</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%8F%E4%B8%80%E8%A1%8C%E6%9C%80%E5%90%8E%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6"><span class="toc-number">3.1.</span> <span class="toc-text">每一行最后添加一个字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8-sudo-%E6%89%93%E5%BC%80"><span class="toc-number">3.2.</span> <span class="toc-text">用 sudo 打开</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.</span> <span class="toc-text">命令模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">5.</span> <span class="toc-text">配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E6%A8%A1%E5%BC%8F"><span class="toc-number">5.1.</span> <span class="toc-text">鼠标模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%B1%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">6.</span> <span class="toc-text">分屏操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6"><span class="toc-number">7.</span> <span class="toc-text">安装插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vim-%E6%89%93%E5%BC%80%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81"><span class="toc-number">8.</span> <span class="toc-text">vim 打开中文乱码</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/a3a12a0e/" title="Windows镜像编辑工具（dism和imagex）"><img src="https://static.zahui.fan/public/Windows-old.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Windows镜像编辑工具（dism和imagex）"/></a><div class="content"><a class="title" href="/posts/a3a12a0e/" title="Windows镜像编辑工具（dism和imagex）">Windows镜像编辑工具（dism和imagex）</a><time datetime="2025-02-17T15:45:14.000Z" title="更新于 2025-02-17 23:45:14">2025-02-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/8d88b8c4/" title="Kubernetes回滚应用之kubectl rollout"><img src="https://static.zahui.fan/public/kubernetes.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes回滚应用之kubectl rollout"/></a><div class="content"><a class="title" href="/posts/8d88b8c4/" title="Kubernetes回滚应用之kubectl rollout">Kubernetes回滚应用之kubectl rollout</a><time datetime="2025-02-14T10:12:16.000Z" title="更新于 2025-02-14 18:12:16">2025-02-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/srnwhe/" title="Nacos 2.0.3 集群升级为 2.1.0"><img src="https://static.zahui.fan/public/Nacos.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nacos 2.0.3 集群升级为 2.1.0"/></a><div class="content"><a class="title" href="/posts/srnwhe/" title="Nacos 2.0.3 集群升级为 2.1.0">Nacos 2.0.3 集群升级为 2.1.0</a><time datetime="2025-02-14T07:40:13.000Z" title="更新于 2025-02-14 15:40:13">2025-02-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/sgajkk/" title="在Kubernetes中部署nacos 2.3.2"><img src="https://static.zahui.fan/public/Nacos.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在Kubernetes中部署nacos 2.3.2"/></a><div class="content"><a class="title" href="/posts/sgajkk/" title="在Kubernetes中部署nacos 2.3.2">在Kubernetes中部署nacos 2.3.2</a><time datetime="2025-02-14T07:22:20.000Z" title="更新于 2025-02-14 15:22:20">2025-02-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/sebxm6/" title="在Kubernetes中部署nacos 2.1.0"><img src="https://static.zahui.fan/public/Nacos.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在Kubernetes中部署nacos 2.1.0"/></a><div class="content"><a class="title" href="/posts/sebxm6/" title="在Kubernetes中部署nacos 2.1.0">在Kubernetes中部署nacos 2.1.0</a><time datetime="2025-02-14T07:22:15.000Z" title="更新于 2025-02-14 15:22:15">2025-02-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text"><a target="_blank" rel="noopener external nofollow noreferrer" href='https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral'>
  本网站由<img src='https://static.zahui.fan/public/upyun.svg' alt='又拍云' width='70' height='28' style="vertical-align:bottom">
  提供CDN加速/云存储服务
</a>
</br>
<a href="https://beian.miit.gov.cn/" rel="external nofollow noreferrer" target="_blank">沪ICP备2021015230号-1</a>
</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(()=>{
  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const loadGiscus = () => {
    const config = Object.assign({
      src: 'https://giscus.babudiu.com/client.js',
      'data-repo': 'iuxt/iuxt.github.io',
      'data-repo-id': 'R_kgDOMszkdA',
      'data-category-id': 'DIC_kwDOMszkdM4CiMyw',
      'data-mapping': 'pathname',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true
    },null)

    const ele = document.createElement('script')
    for (let key in config) {
      ele.setAttribute(key, config[key])
    }
    document.getElementById('giscus-wrap').appendChild(ele)
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.babudiu.com')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment= loadGiscus
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜搜搜" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>