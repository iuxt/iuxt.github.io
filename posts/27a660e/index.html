<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ubuntu常用配置 | 杂烩饭</title><meta name="author" content="张理坤"><meta name="copyright" content="张理坤"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="修改国内源什么是 DEB822 (.sources) 文件格式？自新版本的 Debian 与 Ubuntu 起，例如：  Debian 12 的容器镜像 Ubuntu 24.04  默认预装的系统中 APT 的系统源配置文件不再是传统的 &#x2F;etc&#x2F;apt&#x2F;sources.list。传统格式（又被称为 One-Line-Style 格式）类似如下： 1deb http:&#x2F;&#x2F;mirrors.ustc.">
<meta property="og:type" content="article">
<meta property="og:title" content="ubuntu常用配置">
<meta property="og:url" content="https://zahui.fan/posts/27a660e/">
<meta property="og:site_name" content="杂烩饭">
<meta property="og:description" content="修改国内源什么是 DEB822 (.sources) 文件格式？自新版本的 Debian 与 Ubuntu 起，例如：  Debian 12 的容器镜像 Ubuntu 24.04  默认预装的系统中 APT 的系统源配置文件不再是传统的 &#x2F;etc&#x2F;apt&#x2F;sources.list。传统格式（又被称为 One-Line-Style 格式）类似如下： 1deb http:&#x2F;&#x2F;mirrors.ustc.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://static.zahui.fan/public/Ubuntu.svg">
<meta property="article:published_time" content="2021-02-18T10:35:12.000Z">
<meta property="article:modified_time" content="2024-10-31T03:20:09.000Z">
<meta property="article:author" content="张理坤">
<meta property="article:tag" content="配置记录">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Crontab">
<meta property="article:tag" content="Ubuntu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://static.zahui.fan/public/Ubuntu.svg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ubuntu常用配置",
  "url": "https://zahui.fan/posts/27a660e/",
  "image": "https://static.zahui.fan/public/Ubuntu.svg",
  "datePublished": "2021-02-18T10:35:12.000Z",
  "dateModified": "2024-10-31T03:20:09.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "张理坤",
      "url": "https://zahui.fan/"
    }
  ]
}</script><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://zahui.fan/posts/27a660e/"><link rel="preconnect"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/site.webmanifest"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?50b516d50102c8c9ac5f80529b81ca17";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-YN0WWZGVYN"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-YN0WWZGVYN')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-YN0WWZGVYN', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ubuntu常用配置',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="杂烩饭" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://static.zahui.fan/public/dog.svg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">346</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">215</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://file.babudiu.com/"><i class="fa-fw fa-solid fa-file"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(https://static.zahui.fan/public/Ubuntu.svg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="https://static.zahui.fan/public/boob.png" alt="Logo"><span class="site-name">杂烩饭</span></a><a class="nav-page-title" href="/"><span class="site-name">ubuntu常用配置</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://file.babudiu.com/"><i class="fa-fw fa-solid fa-file"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">ubuntu常用配置</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-02-18T10:35:12.000Z" title="发表于 2021-02-18 18:35:12">2021-02-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-10-31T03:20:09.000Z" title="更新于 2024-10-31 11:20:09">2024-10-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%9F%BA%E7%A1%80%E8%BF%90%E7%BB%B4/">基础运维</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;此文章距离发布已经&quot;,&quot;messageNext&quot;:&quot;天了，内容可能已经过时，请自行判断是否可用或联系博主更新。&quot;,&quot;postUpdate&quot;:&quot;2024-10-31 11:20:09&quot;}" hidden></div><h2 id="修改国内源"><a href="#修改国内源" class="headerlink" title="修改国内源"></a>修改国内源</h2><h3 id="什么是-DEB822-sources-文件格式？"><a href="#什么是-DEB822-sources-文件格式？" class="headerlink" title="什么是 DEB822 (.sources) 文件格式？"></a>什么是 DEB822 (.sources) 文件格式？</h3><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>自新版本的 Debian 与 Ubuntu 起，例如：</p>
<ul>
<li>Debian 12 的容器镜像</li>
<li>Ubuntu 24.04</li>
</ul>
<p>默认预装的系统中 APT 的系统源配置文件不再是传统的 <code>/etc/apt/sources.list</code>。传统格式（又被称为 One-Line-Style 格式）类似如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.ustc.edu.cn/debian/ bookworm main contrib</span><br></pre></td></tr></table></figure>

<p>新的 DEB822 格式自 APT 1.1（2015 年发布）起支持，后缀为 .sources，存储在 <code>/etc/apt/sources.list.d/</code> 目录下，格式类似如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Types: deb</span><br><span class="line">URIs: https://mirrors.ustc.edu.cn/debian</span><br><span class="line">Suites: bookworm</span><br><span class="line">Components: main contrib</span><br><span class="line">Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg</span><br></pre></td></tr></table></figure>

<p>在切换软件源时，需要根据实际情况选择对应的格式进行修改。</p>
<p>关于 DEB822 格式的设计考虑，可以参考 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://repolib.readthedocs.io/en/latest/deb822-format.html">官方文档</a>。</p>
</div>

<ul>
<li><p>传统格式（&#x2F;etc&#x2F;apt&#x2F;sources.list）</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i <span class="string">&#x27;s@//.*ubuntu.com@//mirrors.ustc.edu.cn@g&#x27;</span> /etc/apt/sources.list</span><br></pre></td></tr></table></figure>
</li>
<li><p>DEB822 格式（&#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;ubuntu.sources）</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i <span class="string">&#x27;s@//.*archive.ubuntu.com@//mirrors.ustc.edu.cn@g&#x27;</span> /etc/apt/sources.list.d/ubuntu.sources</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="编译环境安装"><a href="#编译环境安装" class="headerlink" title="编译环境安装"></a>编译环境安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y build-essential tcl gcc make zlib1g-dev libssl-dev libncursesw5-dev libgdbm-dev libc6-dev libffi-dev openssl libxml2-dev libpcre3 libpcre3-dev libncurses5-dev libicu-dev libmcrypt-dev curl libcurl4-gnutls-dev libjpeg-dev libpng-dev libxslt1-dev</span><br></pre></td></tr></table></figure>

<h2 id="切换语言环境"><a href="#切换语言环境" class="headerlink" title="切换语言环境"></a>切换语言环境</h2><p><code>dpkg-reconfigure locales</code></p>
<h2 id="Ubuntu-网卡配置文件"><a href="#Ubuntu-网卡配置文件" class="headerlink" title="Ubuntu 网卡配置文件"></a>Ubuntu 网卡配置文件</h2><h3 id="查看网卡硬件信息"><a href="#查看网卡硬件信息" class="headerlink" title="查看网卡硬件信息"></a>查看网卡硬件信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lshw -short | grep network</span><br><span class="line">ifconfig -a</span><br></pre></td></tr></table></figure>

<h3 id="网卡配置文件-16-版本及以下-etc-network-interfaces-文件内容如下"><a href="#网卡配置文件-16-版本及以下-etc-network-interfaces-文件内容如下" class="headerlink" title="网卡配置文件 (16 版本及以下):&#x2F;etc&#x2F;network&#x2F;interfaces 文件内容如下"></a>网卡配置文件 (16 版本及以下):&#x2F;etc&#x2F;network&#x2F;interfaces 文件内容如下</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">auto eth0</span><br><span class="line">iface eth0 inet static</span><br><span class="line">address 192.168.111.14</span><br><span class="line">gateway 192.168.111.2</span><br><span class="line">netmask 255.255.255.0</span><br><span class="line">dns-nameservers 192.168.111.2</span><br><span class="line"></span><br><span class="line"><span class="comment">#network 192.168.111.0</span></span><br><span class="line"><span class="comment">#broadcast 192.168.111.255</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：如果 Ubuntu 系统采用的是 desktop 版，由于 desktop 版安装了 NetworkManager，修改完 interfaces 文档中的内容后，不会生效。需要先修改&#x2F;etc&#x2F;NetworkManager&#x2F;NetworkManager.conf 文档中的 managed 参数，使之为 true ，并重启系统， 然后在修改&#x2F;etc&#x2F;network&#x2F;interfaces 文件，设置静态 IP。</p>
</blockquote>
<h3 id="重启网卡使配置生效"><a href="#重启网卡使配置生效" class="headerlink" title="重启网卡使配置生效"></a>重启网卡使配置生效</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/networking restart</span><br></pre></td></tr></table></figure>

<p>如果上面命令无法令 ubuntu 重启网络，则使用下面命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo ifdown eth0 &amp;&amp; sudo ifup eth0</span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">service networking restart</span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">ifconfig eth0 down &amp;&amp; ifconfig eth0 up</span><br></pre></td></tr></table></figure>

<h3 id="网卡配置文件-17-10-etc-netplan-01-netcfg-yaml"><a href="#网卡配置文件-17-10-etc-netplan-01-netcfg-yaml" class="headerlink" title="网卡配置文件 (17.10+):&#x2F;etc&#x2F;netplan&#x2F;01-netcfg.yaml"></a>网卡配置文件 (17.10+):&#x2F;etc&#x2F;netplan&#x2F;01-netcfg.yaml</h3><blockquote>
<p>ubuntu 从 17.10 开始，已放弃在&#x2F;etc&#x2F;network&#x2F;interfaces 里固定 IP 的配置，而是改成 netplan 方式，配置写在&#x2F;etc&#x2F;netplan&#x2F;01-netcfg.yaml 或者类似名称的 yaml 文件里</p>
</blockquote>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This file describes the network interfaces available on your system</span></span><br><span class="line"><span class="comment"># For more information, see netplan(5).</span></span><br><span class="line"><span class="attr">network:</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">ethernets:</span></span><br><span class="line">    <span class="attr">ens33:</span></span><br><span class="line">      <span class="attr">addresses:</span> [ <span class="number">10.0</span><span class="number">.0</span><span class="number">.51</span><span class="string">/24</span> ]</span><br><span class="line">      <span class="attr">gateway4:</span> <span class="number">10.0</span><span class="number">.0</span><span class="number">.2</span></span><br><span class="line">      <span class="attr">nameservers:</span></span><br><span class="line">          <span class="attr">addresses:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">&quot;10.0.0.2&quot;</span></span><br></pre></td></tr></table></figure>

<p>dhcp 配置</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This file describes the network interfaces available on your system</span></span><br><span class="line"><span class="comment"># For more information, see netplan(5).</span></span><br><span class="line"><span class="attr">network:</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">ethernets:</span></span><br><span class="line">    <span class="attr">ens32:</span></span><br><span class="line">      <span class="attr">dhcp4:</span> <span class="literal">yes</span></span><br></pre></td></tr></table></figure>

<p>然后执行 <code>netplan apply</code> 使配置生效,不用重启网卡.</p>
<h3 id="临时修改网卡-DNS-地址"><a href="#临时修改网卡-DNS-地址" class="headerlink" title="临时修改网卡 DNS 地址"></a>临时修改网卡 DNS 地址</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/resolv.conf(不建议直接修改)</span><br><span class="line">nameserver 223.5.5.5 <span class="comment">#修改成你的主DNS</span></span><br><span class="line">nameserver 223.6.6.6 <span class="comment">#修改成你的备用DNS</span></span><br><span class="line">search localhost <span class="comment">#你的域名</span></span><br><span class="line">修改后:wq退出，配置会实时生效，但是重启系统后会丢失配置。</span><br></pre></td></tr></table></figure>

<h3 id="永久修改网卡-DNS"><a href="#永久修改网卡-DNS" class="headerlink" title="永久修改网卡 DNS"></a>永久修改网卡 DNS</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/resolvconf/resolv.conf.d/base</span><br><span class="line">添加如下内容</span><br><span class="line"></span><br><span class="line">nameserver 8.8.8.8</span><br><span class="line">nameserver 8.8.4.4</span><br><span class="line"></span><br><span class="line">刷新DNS使生效</span><br><span class="line"></span><br><span class="line">resolvconf -u</span><br></pre></td></tr></table></figure>

<blockquote>
<p>resolv.conf 文件就是根据&#x2F;etc&#x2F;resolvconf&#x2F;resolv.conf.d 目录中的这几个文件生成的。</p>
</blockquote>
<h3 id="查看现在正在使用的-DNS"><a href="#查看现在正在使用的-DNS" class="headerlink" title="查看现在正在使用的 DNS"></a>查看现在正在使用的 DNS</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemd-resolve --status</span><br></pre></td></tr></table></figure>

<h3 id="启动速度慢"><a href="#启动速度慢" class="headerlink" title="启动速度慢"></a>启动速度慢</h3><p>等在 <code>a start job is running for wait for network to be configured</code> 很久， 可以直接关闭 <code>systemd-networkd-wait-online</code> 服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl mask systemd-networkd-wait-online.service</span><br></pre></td></tr></table></figure>

<h2 id="系统配置"><a href="#系统配置" class="headerlink" title="系统配置"></a>系统配置</h2><h3 id="检查设备加载情况"><a href="#检查设备加载情况" class="headerlink" title="检查设备加载情况"></a>检查设备加载情况</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg | grep eth</span><br></pre></td></tr></table></figure>

<h3 id="修改默认编辑器"><a href="#修改默认编辑器" class="headerlink" title="修改默认编辑器"></a>修改默认编辑器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --config editor   <span class="comment"># 用于 visudo 等</span></span><br><span class="line">sudo select-editor                         <span class="comment"># 用于 crontab -e 等</span></span><br></pre></td></tr></table></figure>

<h3 id="安装字体"><a href="#安装字体" class="headerlink" title="安装字体"></a>安装字体</h3><p>系统字体位置 <code>/usr/share/fonts/</code>, 将字体复制到 <code>/usr/share/fonts/</code> 目录<br>用户字体位置 <code>~/.local/share/fonts</code>, 将字体复制到 <code>~/.local/share/fonts</code> 目录</p>
<p><del>然后刷新字体缓存， 经测试不刷新也可以生效</del></p>
<p><del>fc-cache -vf</del></p>
<h2 id="包管理"><a href="#包管理" class="headerlink" title="包管理"></a>包管理</h2><h3 id="安装本地包，不处理依赖"><a href="#安装本地包，不处理依赖" class="headerlink" title="安装本地包，不处理依赖"></a>安装本地包，不处理依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i ./xxx.deb</span><br></pre></td></tr></table></figure>

<h3 id="安装本地包，并自动处理依赖"><a href="#安装本地包，并自动处理依赖" class="headerlink" title="安装本地包，并自动处理依赖"></a>安装本地包，并自动处理依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install ./xxx.deb</span><br></pre></td></tr></table></figure>

<h3 id="查看一个包有哪些文件组成"><a href="#查看一个包有哪些文件组成" class="headerlink" title="查看一个包有哪些文件组成"></a>查看一个包有哪些文件组成</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -L vim</span><br></pre></td></tr></table></figure>

<h3 id="锁定版本-不更新"><a href="#锁定版本-不更新" class="headerlink" title="锁定版本, 不更新"></a>锁定版本, 不更新</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-mark hold kubelet kubeadm kubectl</span><br></pre></td></tr></table></figure>

<h3 id="查询文件属于哪个包"><a href="#查询文件属于哪个包" class="headerlink" title="查询文件属于哪个包"></a>查询文件属于哪个包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt install -y apt-file</span><br><span class="line">apt-file update</span><br><span class="line">apt-file search libssl.so.1.1</span><br></pre></td></tr></table></figure>

<h3 id="下载离线包"><a href="#下载离线包" class="headerlink" title="下载离线包"></a>下载离线包</h3><p>只下载，不安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">rm</span> -f /var/cache/apt/archives/*.deb</span><br><span class="line">sudo apt install -d fio</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载的deb文件在</span></span><br><span class="line">/var/cache/apt/archives</span><br></pre></td></tr></table></figure>

<h3 id="安装指定版本的包"><a href="#安装指定版本的包" class="headerlink" title="安装指定版本的包"></a>安装指定版本的包</h3><p>查询源内可用的包版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache madison docker-ce</span><br></pre></td></tr></table></figure>

<p>安装指定版本的包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install docker-ce=&lt;VERSION_STRING&gt;</span><br></pre></td></tr></table></figure>

<h3 id="非交互式"><a href="#非交互式" class="headerlink" title="非交互式"></a>非交互式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">&#x27;DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl &gt;/dev/null&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="不安装推荐的软件包"><a href="#不安装推荐的软件包" class="headerlink" title="不安装推荐的软件包"></a>不安装推荐的软件包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get --no-install-recommends </span><br></pre></td></tr></table></figure>

<h2 id="图形界面"><a href="#图形界面" class="headerlink" title="图形界面"></a>图形界面</h2><h3 id="桌面图标配置文件"><a href="#桌面图标配置文件" class="headerlink" title="桌面图标配置文件"></a>桌面图标配置文件</h3><p>用户配置文件位置 <code>~/.local/share/applications</code><br>系统配置文件位置: <code>/usr/share/applications</code></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Desktop Entry]</span></span><br><span class="line"><span class="attr">Name</span>=Visual Studio Code</span><br><span class="line"><span class="attr">Comment</span>=Code Editing. Redefined.</span><br><span class="line"><span class="attr">GenericName</span>=Text Editor</span><br><span class="line"><span class="attr">Exec</span>=/usr/share/code/code --<span class="literal">no</span>-sandbox --unity-launch %F</span><br><span class="line"><span class="attr">Icon</span>=com.visualstudio.code</span><br><span class="line"><span class="attr">Type</span>=Application</span><br><span class="line"><span class="attr">StartupNotify</span>=<span class="literal">false</span></span><br><span class="line"><span class="attr">StartupWMClass</span>=Code</span><br><span class="line"><span class="attr">Categories</span>=Utility<span class="comment">;TextEditor;Development;IDE;</span></span><br><span class="line"><span class="attr">MimeType</span>=text/plain<span class="comment">;inode/directory;application/x-code-workspace;</span></span><br><span class="line"><span class="attr">Actions</span>=new-empty-window<span class="comment">;</span></span><br><span class="line"><span class="attr">Keywords</span>=vscode<span class="comment">;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">X-Desktop-File-Install-Version</span>=<span class="number">0.24</span></span><br><span class="line"></span><br><span class="line"><span class="section">[Desktop Action new-empty-window]</span></span><br><span class="line"><span class="attr">Name</span>=New Empty Window</span><br><span class="line"><span class="attr">Exec</span>=/usr/share/code/code --<span class="literal">no</span>-sandbox --new-window %F</span><br><span class="line"><span class="attr">Icon</span>=com.visualstudio.code</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://zahui.fan">张理坤</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://zahui.fan/posts/27a660e/">https://zahui.fan/posts/27a660e/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://zahui.fan" target="_blank">杂烩饭</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/">配置记录</a><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/Crontab/">Crontab</a><a class="post-meta__tags" href="/tags/Ubuntu/">Ubuntu</a></div><div class="post-share"><div class="social-share" data-image="https://static.zahui.fan/public/Ubuntu.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/6cc59126/" title="centos常用配置"><img class="cover" src="https://static.zahui.fan/public/CentOS.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">centos常用配置</div></div><div class="info-2"><div class="info-item-1">centos 系统升级请看Centos7 升级 RHEL8 网络配置1vim /etc/sysconfig/network-scripts/ifcfg-ens**  固定 ip 配置12345678910TYPE=EthernetBOOTPROTO=noneDEVICE=ens33ONBOOT=yesIPADDR=10.0.0.7PREFIX=24GATEWAY=10.0.0.2DNS1=10.0.0.2DNS2=223.5.5.5DOMAIN=10.0.0.2  DHCP 配置12345TYPE=EthernetBOOTPROTO=dhcpPERSISTENT_DHCLIENT=yesDEVICE=ens33ONBOOT=yes  临时修改 IP（重启失效）123ifconfig eth0 192.168.120.56ifconfig eth0 192.168.120.56 netmask 255.255.255.0ifconfig eth0 192.168.120.56 netmask 255.255.255.0 broadcast...</div></div></div></a><a class="pagination-related" href="/posts/4bc23141/" title="Docker常用配置"><img class="cover" src="https://static.zahui.fan/public/Docker.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Docker常用配置</div></div><div class="info-2"><div class="info-item-1">docker 安装官方安装脚本1curl -fsSL get.docker.com | bash  阿里云安装（centos）12345678910111213# step 1: 安装必要的一些系统工具sudo yum install -y yum-utils device-mapper-persistent-data lvm2# Step 2: 添加软件源信息sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo# Step 3: 更新并安装Docker-CEsudo yum makecache fastsudo yum -y install docker-ce# Step 4: 开启Docker服务sudo systemctl start docker.service  docker-compose 安装1sudo curl -L...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/lnmt2t0q/" title="Linux里安装crontab并运行"><img class="cover" src="https://static.zahui.fan/public/linux.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Linux里安装crontab并运行</div></div><div class="info-2"><div class="info-item-1">常见的 linux 发行版都自带了 crontab 服务, 但是我们常用的容器镜像是没有的, 不要问我为什么要在容器里运行 crontab…Linux定时执行任务crontabLinux的crontab无法执行的一些问题 CentOS&#x2F;RedHat 系列安装1yum install -y cronie  配置文件位置后面的 root 是用户名 1/var/spool/cron/root  启动命令12345# 后台运行crond# 前台运行crond -f   Ubuntu&#x2F;Debian 系列安装1sudo apt-get install -y cron  配置文件位置后面的 root 是用户名 1/var/spool/cron/crontabs/root  启动命令12345# 后台运行cron# 前台运行cron -f  Alpine安装官方镜像自带了 配置文件位置后面的 root 是用户名 1/etc/crontabs/root  启动命令12345# 前台运行crond -f# 后台运行crond</div></div></div></a><a class="pagination-related" href="/posts/28c679c3/" title="使用certbot自动申请ssl证书"><img class="cover" src="https://static.zahui.fan/public/linux.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">使用certbot自动申请ssl证书</div></div><div class="info-2"><div class="info-item-1"> certbot 可以自动申请 let’s encrypt https 证书, 并且可以自动续期，另见：使用acme.sh来自动更新https证书  申请证书前准备添加 DNS 解析域名为你需要申请 https 证书的域名，添加 A 记录到服务器 IP 安装 certbot 和 certbot nginx plugin12sudo apt install certbotsudo apt install python3-certbot-nginx  申请证书1sudo certbot --non-interactive --redirect --agree-tos --nginx -d password.zahui.fan -m captain@zahui.fan   以上操作除了申请证书外，还可以自动添加 https 配置到 nginx，很方便。  证书续期1sudo certbot renew   添加到 root 用户的 crontab 里面就可以实现自动续期，距离到期时间太长会自动跳过续期  删除证书1sudo certbot delete </div></div></div></a><a class="pagination-related" href="/posts/f4ea28c3/" title="LVM逻辑卷管理"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">LVM逻辑卷管理</div></div><div class="info-2"><div class="info-item-1">LVM 是 Logical Volume Manager 的缩写，中文逻辑卷管理，LVM 是建立在磁盘分区和文件系统之间的一个逻辑层，LVM 会更加灵活，可以动态扩容缩容分区大小。调整分区大小有风险，请做好充分测试再决定是否执行。如果没有启用 lvm，请查看 linux磁盘扩容 - 非LVM那么怎么知道机器有没有启用 LVM 呢，可以执行 sudo lvdisplay 查看有没有已存在的 LV，对比 df -hT 里面的 Filesystem，也可以用 lsblk 查看有没有 lvm。 记住一点， 如果你的磁盘没有分区并已经在使用中， 那么千万不要使用 fdisk 来分区，会损坏数据！！！   LVM 的一些概念PV： 物理卷，比如一个分区，一个磁盘VG： 卷组，将多个 PV 整合在一起，形成一个大的池子LV： 逻辑卷，从 VG 划分出来一个个空间，可以当作分区来看待，可以格式化，可以挂载 常用命令    查看 查看详细信息 扩展 创建    卷组 VG vgs vgdisplay vgextend vgcreate   逻辑卷...</div></div></div></a><a class="pagination-related" href="/posts/23ada041/" title="Linux下tmp目录的管理"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Linux下tmp目录的管理</div></div><div class="info-2"><div class="info-item-1">生成临时文件可以使用 mktemp 命令生成 tmp 文件，mktemp -d 生成临时目录，避免临时目录重复使用的问题 123456#!/bin/bashtmp_file=&quot;$(mktemp)&quot;tmp_folder=&quot;$(mktemp -d)&quot;echo $tmp_fileecho $tmp_folder  tmp 目录定时清理这个是由 systemd 的几个模块实现的， 在 centos7 中： 123systemd-tmpfiles-setup.service  ：Create Volatile Files and Directoriessystemd-tmpfiles-setup-dev.service：Create static device nodes in /devsystemd-tmpfiles-clean.service ：Cleanup of Temporary Directories  配置文件也有 3...</div></div></div></a><a class="pagination-related" href="/posts/ls0614ms/" title="Linux常用命令之lsof"><img class="cover" src="https://static.zahui.fan/public/bash.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Linux常用命令之lsof</div></div><div class="info-2"><div class="info-item-1">lsof（list open files）是一个列出当前系统打开文件的工具。在 linux 环境下，任何事物都以文件的形式存在，通过文件不仅仅可以访问常规数据，还可以访问网络连接和硬件。 常用参数   参数 说明    -p 根据 pid 查找   直接加文件路径 查看这个文件被哪个进程打开了   -c 显示 COMMAND 列中包含指定字符的进程所有打开的文件   lsof -u username 显示所属 user 进程打开的文件   -i 用以显示符合条件的进程情况   lsof -g gid 显示归属 gid 的进程情况   lsof +d &#x2F;DIR&#x2F; 显示目录下被进程打开的文件   lsof +D &#x2F;DIR&#x2F; 同上，但是会搜索目录下的所有目录，时间相对较长   lsof -d FD 显示指定文件描述符的进程   lsof -n 不将 IP 转换为 hostname，缺省是不加上 -n 参数   lsof -i 用以显示符合条件的进程情况   一些例子查看 java 程序打开的文件1lsof -c java  当然你也可以到...</div></div></div></a><a class="pagination-related" href="/posts/lr8yc0vu/" title="Ubuntu 22.04 内核相关操作"><img class="cover" src="https://static.zahui.fan/public/Ubuntu.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Ubuntu 22.04 内核相关操作</div></div><div class="info-2"><div class="info-item-1">文章内容在 Ubuntu 22.04 系统下测试成功, 版本相差过大请自测。 开机显示启动项新版 Ubuntu 好像默认不显示启动项而直接进入系统了，可以通过修改 /etc/default/grub 来实现开机显示启动选项列表 12345# 注释掉这一行# GRUB_TIMEOUT_STYLE=hidden# 这一行是在grub界面等待的时间，单位sGRUB_TIMEOUT=30  修改完成后执行 sudo update-grub 更新 grub 配置 下面两种方式二选一即可。   更换使用的内核版本（通过启动项 uuid 指定方式）查看当前在用的内核版本1uname -r  6.5.0-14-generic 查看系统启动项12345# 查看&#x27;Advanced options for Ubuntu&#x27;选项的uuidgrep &quot;submenu &#x27;Advanced options for Ubuntu&#x27;&quot; /boot/grub/grub.cfg | awk -F\&#x27; &#x27;&#123;print...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://static.zahui.fan/public/dog.svg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">张理坤</div><div class="author-info-description">张理坤的博客</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">346</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">215</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/iuxt"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/iuxt" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:x@zahui.fan" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/165330963" rel="external nofollow noreferrer" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="https://stackoverflow.com/users/15620461/" rel="external nofollow noreferrer" target="_blank" title="StackOverflow"><i class="fa-brands fa-stack-overflow"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-square-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">此博客为我记录运维工作总结所用，供网友阅读参考，如有侵权，请通知我，我会核实后进行处理。</br>
<strong style="color: red;">欢迎加入技术交流群：</strong>
<div class="aside-qrcode" >
<img src="https://src.babudiu.com/card/wechat_ops_group.JPG" title="微信群" width="100%" height="auto">
</div>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%9B%BD%E5%86%85%E6%BA%90"><span class="toc-number">1.</span> <span class="toc-text">修改国内源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-DEB822-sources-%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">什么是 DEB822 (.sources) 文件格式？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text">编译环境安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E8%AF%AD%E8%A8%80%E7%8E%AF%E5%A2%83"><span class="toc-number">3.</span> <span class="toc-text">切换语言环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ubuntu-%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.</span> <span class="toc-text">Ubuntu 网卡配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%BD%91%E5%8D%A1%E7%A1%AC%E4%BB%B6%E4%BF%A1%E6%81%AF"><span class="toc-number">4.1.</span> <span class="toc-text">查看网卡硬件信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-16-%E7%89%88%E6%9C%AC%E5%8F%8A%E4%BB%A5%E4%B8%8B-etc-network-interfaces-%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E5%A6%82%E4%B8%8B"><span class="toc-number">4.2.</span> <span class="toc-text">网卡配置文件 (16 版本及以下):&#x2F;etc&#x2F;network&#x2F;interfaces 文件内容如下</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%90%AF%E7%BD%91%E5%8D%A1%E4%BD%BF%E9%85%8D%E7%BD%AE%E7%94%9F%E6%95%88"><span class="toc-number">4.3.</span> <span class="toc-text">重启网卡使配置生效</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-17-10-etc-netplan-01-netcfg-yaml"><span class="toc-number">4.4.</span> <span class="toc-text">网卡配置文件 (17.10+):&#x2F;etc&#x2F;netplan&#x2F;01-netcfg.yaml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E4%BF%AE%E6%94%B9%E7%BD%91%E5%8D%A1-DNS-%E5%9C%B0%E5%9D%80"><span class="toc-number">4.5.</span> <span class="toc-text">临时修改网卡 DNS 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B0%B8%E4%B9%85%E4%BF%AE%E6%94%B9%E7%BD%91%E5%8D%A1-DNS"><span class="toc-number">4.6.</span> <span class="toc-text">永久修改网卡 DNS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%8E%B0%E5%9C%A8%E6%AD%A3%E5%9C%A8%E4%BD%BF%E7%94%A8%E7%9A%84-DNS"><span class="toc-number">4.7.</span> <span class="toc-text">查看现在正在使用的 DNS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E9%80%9F%E5%BA%A6%E6%85%A2"><span class="toc-number">4.8.</span> <span class="toc-text">启动速度慢</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE"><span class="toc-number">5.</span> <span class="toc-text">系统配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E8%AE%BE%E5%A4%87%E5%8A%A0%E8%BD%BD%E6%83%85%E5%86%B5"><span class="toc-number">5.1.</span> <span class="toc-text">检查设备加载情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">5.2.</span> <span class="toc-text">修改默认编辑器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%AD%97%E4%BD%93"><span class="toc-number">5.3.</span> <span class="toc-text">安装字体</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">包管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%9C%AC%E5%9C%B0%E5%8C%85%EF%BC%8C%E4%B8%8D%E5%A4%84%E7%90%86%E4%BE%9D%E8%B5%96"><span class="toc-number">6.1.</span> <span class="toc-text">安装本地包，不处理依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%9C%AC%E5%9C%B0%E5%8C%85%EF%BC%8C%E5%B9%B6%E8%87%AA%E5%8A%A8%E5%A4%84%E7%90%86%E4%BE%9D%E8%B5%96"><span class="toc-number">6.2.</span> <span class="toc-text">安装本地包，并自动处理依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E4%B8%80%E4%B8%AA%E5%8C%85%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%87%E4%BB%B6%E7%BB%84%E6%88%90"><span class="toc-number">6.3.</span> <span class="toc-text">查看一个包有哪些文件组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%81%E5%AE%9A%E7%89%88%E6%9C%AC-%E4%B8%8D%E6%9B%B4%E6%96%B0"><span class="toc-number">6.4.</span> <span class="toc-text">锁定版本, 不更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%96%87%E4%BB%B6%E5%B1%9E%E4%BA%8E%E5%93%AA%E4%B8%AA%E5%8C%85"><span class="toc-number">6.5.</span> <span class="toc-text">查询文件属于哪个包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E7%A6%BB%E7%BA%BF%E5%8C%85"><span class="toc-number">6.6.</span> <span class="toc-text">下载离线包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC%E7%9A%84%E5%8C%85"><span class="toc-number">6.7.</span> <span class="toc-text">安装指定版本的包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E4%BA%A4%E4%BA%92%E5%BC%8F"><span class="toc-number">6.8.</span> <span class="toc-text">非交互式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%AE%89%E8%A3%85%E6%8E%A8%E8%8D%90%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="toc-number">6.9.</span> <span class="toc-text">不安装推荐的软件包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2"><span class="toc-number">7.</span> <span class="toc-text">图形界面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%8C%E9%9D%A2%E5%9B%BE%E6%A0%87%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">7.1.</span> <span class="toc-text">桌面图标配置文件</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/64b52e0d/" title="最后一个Typora免费版0.11.18"><img src="https://static.zahui.fan/images/202303181541059.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="最后一个Typora免费版0.11.18"/></a><div class="content"><a class="title" href="/posts/64b52e0d/" title="最后一个Typora免费版0.11.18">最后一个Typora免费版0.11.18</a><time datetime="2025-02-27T03:24:04.000Z" title="更新于 2025-02-27 11:24:04">2025-02-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/snui2r/" title="Elasticsearch索引生命周期配置"><img src="https://static.zahui.fan/public/elasticsearch.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Elasticsearch索引生命周期配置"/></a><div class="content"><a class="title" href="/posts/snui2r/" title="Elasticsearch索引生命周期配置">Elasticsearch索引生命周期配置</a><time datetime="2025-02-26T03:53:02.000Z" title="更新于 2025-02-26 11:53:02">2025-02-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ss9srz/" title="Logstash 写入 ES：借助自定义模板优化数据映射与存储"><img src="https://static.zahui.fan/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Logstash 写入 ES：借助自定义模板优化数据映射与存储"/></a><div class="content"><a class="title" href="/posts/ss9srz/" title="Logstash 写入 ES：借助自定义模板优化数据映射与存储">Logstash 写入 ES：借助自定义模板优化数据映射与存储</a><time datetime="2025-02-26T03:41:19.000Z" title="更新于 2025-02-26 11:41:19">2025-02-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a07ebcb/" title="使用 Elasticsearch 二进制 tar 包部署并初始化三节点集群"><img src="https://static.zahui.fan/public/elasticsearch.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用 Elasticsearch 二进制 tar 包部署并初始化三节点集群"/></a><div class="content"><a class="title" href="/posts/a07ebcb/" title="使用 Elasticsearch 二进制 tar 包部署并初始化三节点集群">使用 Elasticsearch 二进制 tar 包部署并初始化三节点集群</a><time datetime="2025-02-22T14:51:58.000Z" title="更新于 2025-02-22 22:51:58">2025-02-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ss2wk6/" title="使用Python识别验证码 ddddocr"><img src="https://static.zahui.fan/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Python识别验证码 ddddocr"/></a><div class="content"><a class="title" href="/posts/ss2wk6/" title="使用Python识别验证码 ddddocr">使用Python识别验证码 ddddocr</a><time datetime="2025-02-22T09:57:12.000Z" title="更新于 2025-02-22 17:57:12">2025-02-22</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text"><a target="_blank" rel="noopener external nofollow noreferrer" href='https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral'>
  本网站由<img src='https://static.zahui.fan/public/upyun.svg' alt='又拍云' width='70' height='28' style="vertical-align:bottom">
  提供CDN加速/云存储服务
</a>
</br>
<a href="https://beian.miit.gov.cn/" rel="external nofollow noreferrer" target="_blank">沪ICP备2021015230号-1</a>
</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const createScriptElement = config => {
    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => {
      ele.setAttribute(key, value)
    })
    return ele
  }

  const loadGiscus = (el = document, key) => {
    const mappingConfig = isShuoshuo
      ? { 'data-mapping': 'specific', 'data-term': key }
      : { 'data-mapping': (option && option['data-mapping']) || 'pathname' }

    const giscusConfig = {
      src: 'https://giscus.babudiu.com/client.js',
      'data-repo': 'iuxt/iuxt.github.io',
      'data-repo-id': 'R_kgDOMszkdA',
      'data-category-id': 'DIC_kwDOMszkdM4CiMyw',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true,
      ...option,
      ...mappingConfig
    }

    const scriptElement = createScriptElement(giscusConfig)

    el.querySelector('#giscus-wrap').appendChild(scriptElement)

    if (isShuoshuo) {
      window.shuoshuoComment.destroyGiscus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.babudiu.com')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if (isShuoshuo) {
    'Giscus' === 'Giscus'
      ? window.shuoshuoComment = { loadComment: loadGiscus }
      : window.loadOtherComment = loadGiscus
    return
  }

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜搜搜" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>