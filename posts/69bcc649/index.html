<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux网络设备命名规则及修改 | 杂烩饭</title><meta name="author" content="张理坤"><meta name="copyright" content="张理坤"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="命名规则centos 从 7 开始网卡名称默认不再是熟悉的 eth0、而是类似于 ens33、enps0f0 等rhel7官方文档 这么做的好处是在 Red Hat Enterprise Linux 7 中，udev 支持大量不同的命名方案。默认是根据固件、拓扑及位置信息分配固定名称。这样做的优点是命名可完全自动进行，并可预期，即使添加或删除硬件后也会保留其名称（不会出现重复枚举的情况），同时可顺">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux网络设备命名规则及修改">
<meta property="og:url" content="https://zahui.fan/posts/69bcc649/">
<meta property="og:site_name" content="杂烩饭">
<meta property="og:description" content="命名规则centos 从 7 开始网卡名称默认不再是熟悉的 eth0、而是类似于 ens33、enps0f0 等rhel7官方文档 这么做的好处是在 Red Hat Enterprise Linux 7 中，udev 支持大量不同的命名方案。默认是根据固件、拓扑及位置信息分配固定名称。这样做的优点是命名可完全自动进行，并可预期，即使添加或删除硬件后也会保留其名称（不会出现重复枚举的情况），同时可顺">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://static.zahui.fan/public/linux.svg">
<meta property="article:published_time" content="2021-10-22T08:39:28.000Z">
<meta property="article:modified_time" content="2024-10-31T03:20:09.000Z">
<meta property="article:author" content="张理坤">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Network">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://static.zahui.fan/public/linux.svg"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://zahui.fan/posts/69bcc649/"><link rel="preconnect"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/site.webmanifest"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?50b516d50102c8c9ac5f80529b81ca17";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-YN0WWZGVYN"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-YN0WWZGVYN')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-YN0WWZGVYN', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"此文章距离发布已经","messageNext":"天了，内容可能已经过时，请自行判断是否可用或联系博主更新。"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux网络设备命名规则及修改',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-10-31 11:20:09'
}</script><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="杂烩饭" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://static.zahui.fan/public/dog.svg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">323</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">210</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://file.babudiu.com/"><i class="fa-fw fa-solid fa-file"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(https://static.zahui.fan/public/linux.svg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="https://static.zahui.fan/public/boob.png" alt="Logo"><span class="site-name">杂烩饭</span></a><a class="nav-page-title" href="/"><span class="site-name">Linux网络设备命名规则及修改</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://file.babudiu.com/"><i class="fa-fw fa-solid fa-file"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Linux网络设备命名规则及修改</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-10-22T08:39:28.000Z" title="发表于 2021-10-22 16:39:28">2021-10-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-10-31T03:20:09.000Z" title="更新于 2024-10-31 11:20:09">2024-10-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%9F%BA%E7%A1%80%E8%BF%90%E7%BB%B4/">基础运维</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h2><p>centos 从 7 开始网卡名称默认不再是熟悉的 eth0、而是类似于 ens33、enps0f0 等<br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/7/html/networking_guide/ch-consistent_network_device_naming">rhel7官方文档</a></p>
<h3 id="这么做的好处是"><a href="#这么做的好处是" class="headerlink" title="这么做的好处是"></a>这么做的好处是</h3><p>在 Red Hat Enterprise Linux 7 中，udev 支持大量不同的命名方案。默认是根据固件、拓扑及位置信息分配固定名称。这样做的优点是命名可完全自动进行，并可预期，即使添加或删除硬件后也会保留其名称（不会出现重复枚举的情况），同时可顺利更换损坏的硬件。不足之处是，相比传统的名称，比如 eth0 或 wlan0，这些名称有时会比较难理解。例如：enp5s0。</p>
<h3 id="设备命名的过程"><a href="#设备命名的过程" class="headerlink" title="设备命名的过程"></a>设备命名的过程</h3><ol>
<li><code>/usr/lib/udev/rules.d/60-net.rules</code> 文件中的规则会让 udev 帮助工具 <code>/lib/udev/rename_device</code> 查看所有 <code>/etc/sysconfig/network-scripts/ifcfg-suffix</code> 文件。如果发现包含 HWADDR 条目的 ifcfg 文件与某个接口的 MAC 地址匹配，它会将该接口重命名为 ifcfg 文件中由 DEVICE 指令给出的名称。</li>
<li><code>/usr/lib/udev/rules.d/71-biosdevname.rules</code> 中的规则让 biosdevname 根据其命名策略重命名该接口，即在上一步中没有重命名该接口、已安装 biosdevname、且在 boot 命令行中将 <code>biosdevname=0</code> 作为内核命令给出。</li>
<li><code>/lib/udev/rules.d/75-net-description.rules</code> 中的规则让 udev 通过检查网络接口设备，填写内部 udev 设备属性值 ID_NET_NAME_ONBOARD、ID_NET_NAME_SLOT、ID_NET_NAME_PATH。注：有些设备属性可能处于未定义状态。</li>
<li><code>/usr/lib/udev/rules.d/80-net-name-slot.rules</code> 中的规则让 udev 重命名该接口，优先顺序如下：ID_NET_NAME_ONBOARD、ID_NET_NAME_SLOT、ID_NET_NAME_PATH。并提供如下信息：没有在步骤 1 或 2 中重命名该接口，同时未给出内核参数 <code>net.ifnames=0</code>。如果一个参数未设定，则会按列表的顺序设定下一个。如果没有设定任何参数，则不会重命名该接口。</li>
</ol>
<h2 id="修改网络设备命名"><a href="#修改网络设备命名" class="headerlink" title="修改网络设备命名"></a>修改网络设备命名</h2><h3 id="debian-系、ubuntu-等"><a href="#debian-系、ubuntu-等" class="headerlink" title="debian 系、ubuntu 等"></a>debian 系、ubuntu 等</h3><p>vim &#x2F;etc&#x2F;default&#x2F;grub</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果这项有参数了，和现有参数用空格分开</span></span><br><span class="line"><span class="attr">GRUB_CMDLINE_LINUX</span>=<span class="string">&quot;net.ifnames=0 biosdevname=0&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo update-grub</span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure>

<p>重启后执行 <code>ip a</code> 查看设备名修改成功了没有</p>
<p>然后修改网络：<br>vim &#x2F;etc&#x2F;netplan&#x2F;xx.yaml</p>
<p>设备名修改后，执行 <code>netplan try</code></p>
<h3 id="redhat-系、centos-等"><a href="#redhat-系、centos-等" class="headerlink" title="redhat 系、centos 等"></a>redhat 系、centos 等</h3><p>vim &#x2F;etc&#x2F;sysconfig&#x2F;grub</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">GRUB_CMDLINE_LINUX</span>=<span class="string">&quot;... net.ifnames=0 biosdevname=0&quot;</span></span><br></pre></td></tr></table></figure>

<p>然后更新 grub、重启、更改网络配置文件</p>
<h4 id="在安装系统时修改"><a href="#在安装系统时修改" class="headerlink" title="在安装系统时修改"></a>在安装系统时修改</h4><div class="tabs"><div class="nav-tabs"><button type="button" class="tab active">Debian</button><button type="button" class="tab">CentOS</button></div><div class="tab-contents"><div class="tab-item-content active"><p><img src= "https://static.zahui.fan/public/nes.gif" data-lazy-src="https://static.zahui.fan/images/202404262259986.png" alt="image.png"></p>
<p>这个界面按下 <code>e</code></p>
<p><img src= "https://static.zahui.fan/public/nes.gif" data-lazy-src="https://static.zahui.fan/images/202404262301459.png" alt="image.png"></p>
<p>参数添加完成后，按下 <code>F10</code> 启动</p></div><div class="tab-item-content"><p><img src= "https://static.zahui.fan/public/nes.gif" data-lazy-src="https://static.zahui.fan/images/202401301209674.png" alt="202401301209674.png|592"></p>
<p>光标放在 install 上， 按下 tab 键， 在 quiet 后面输入 <code> net.ifnames=0 biosdevname=0</code></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>

<h2 id="kickstart-预安装固定设备名"><a href="#kickstart-预安装固定设备名" class="headerlink" title="kickstart 预安装固定设备名"></a>kickstart 预安装固定设备名</h2><h3 id="centos-系"><a href="#centos-系" class="headerlink" title="centos 系"></a>centos 系</h3><p>一共有两个地方需要修改</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">virt-install \</span><br><span class="line">    --hvm --virt-type kvm \</span><br><span class="line">    --accelerate \</span><br><span class="line">    --name vm-conghua \</span><br><span class="line">    --os-type linux \</span><br><span class="line">    --vcpus 2 \</span><br><span class="line">    --ram 4096 \</span><br><span class="line">    --disk path=/dev/mapper/ssd_data-vm_conghua \</span><br><span class="line">    --network bridge:br13,model=virtio \</span><br><span class="line">    --nographics \</span><br><span class="line">    --location http://cn.archive.ubuntu.com/ubuntu/dists/focal/main/installer-amd64/ \</span><br><span class="line">    --initrd-inject=/tmp/tmp.HotM405TfF/ks.cfg \</span><br><span class="line">    --cpu host \</span><br><span class="line">    --extra-args <span class="string">&#x27;ks=file:/ks.cfg console=tty0 console=ttyS0,115200n8 net.ifnames=0 biosdevname=0&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ks.cfg</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">bootloader --location=mbr --driveorder=vda --append=&quot; crashkernel=auto console=ttyS0,115200n8 net.ifnames=0 biosdevname=0&quot;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://zahui.fan">张理坤</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://zahui.fan/posts/69bcc649/">https://zahui.fan/posts/69bcc649/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://zahui.fan" target="_blank">杂烩饭</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/Network/">Network</a></div><div class="post-share"><div class="social-share" data-image="https://static.zahui.fan/public/linux.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/8e49530e/" title="一个特殊的空格--硬空格"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">一个特殊的空格--硬空格</div></div><div class="info-2"><div class="info-item-1">事情的起因我在测试一个 nginx 配置文件，配置文件来自于印象笔记网页版复制（本人用的 linux，没有印象笔记客户端可用），编辑的时候发现了蹊跷：  不过没有太在意，还有一点蹊跷的是 vim 编辑的时候该高亮的地方也不高亮了，接着改好了配置文件后，发现 nginx -t 怎么测试都不通过。 排查问题当然怀疑是 nginx 配置文件的问题，将配置文件复制到 windows 下，使用 notepad++ 编辑（显示所有符号）发现里面的空格并不是空格  真正的空格应该显示的是 .，tab 显示的应该是 ➡️。将这个 “ 空格 “ 复制出来，然后找个在线转换器http://www.hiencode.com/jinzhi.html转换成 16 进制数据，发现是 a0  然后到https://zh.wikipedia.org/wiki/Unicode%E5%AD%97%E7%AC%A6%E5%88%97%E8%A1%A8搜了下 a0，发现是一个叫做不换行空格的东西，又叫硬空格（hard space、fixed space）  用途是禁止换行，常用于 html，比如地址 xx省xx市...</div></div></div></a><a class="pagination-related" href="/posts/e8243516/" title="Puppet Server从部署到上线使用"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Puppet Server从部署到上线使用</div></div><div class="info-2"><div class="info-item-1">这是一篇 todo 文章，可以快速将 puppetserver 部署起来，经常遇到的坑也会写出来，但是自己不踩吭记忆是没有成长的（不仅仅是收获经验，重要的是增加了学习的能力），如果不缺时间的话，强烈建议看官方文档：https://puppet.com/docs/puppet/7/server/install_from_packages.html 安装 master通过源来安装12sudo rpm -Uvh https://yum.puppet.com/puppet7-release-el-8.noarch.rpmsudo yum install puppetserver  启动 master 服务1sudo systemctl start puppetserver   如果报错 Found master private key &#39;/etc/puppetlabs/puppet/ssl/private_keys/localhost.localdomain.pem&#39; but master public key...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/8ec7155e/" title="Linux网络之Bridge和Bond"><img class="cover" src="https://static.zahui.fan/public/linux.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Linux网络之Bridge和Bond</div></div><div class="info-2"><div class="info-item-1"> 网桥相当于一台虚拟交换机，你可以把自己的网卡绑定在虚拟交换机上，并把其他接口（比如虚拟机的网络）桥接到这个网卡上面来，相当于大家都是在一个内网里面。  创建网桥方法, 以 Redhat 系为例。 使用 nmtui 创建网桥 删除网卡配置文件可以到 /etc/sysconfig/network-scripts/ 里面删除 ifcfg- 开头的配置 使用 nmtui 创建网桥，并将网卡设备绑定到网桥， 一般关闭生成树协议（STP） 检查 /etc/sysconfig/network-scripts/ 里面有没有多余的配置文件，有的话需要删除以免冲突 网卡和网桥都需要开机自启动  使用配置文件创建网桥 生成 uuid cat /proc/sys/kernel/random/uuid 或者 uuidgen  12345678910111213141516171819202122232425262728293031#!/bin/bashset -euf -o...</div></div></div></a><a class="pagination-related" href="/posts/211e1b4c/" title="Linux网络管理命令"><img class="cover" src="https://static.zahui.fan/public/linux.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Linux网络管理命令</div></div><div class="info-2"><div class="info-item-1"> 2009 年 Debian 开发者邮件列表宣布放弃使用缺乏维护的 net-tools 工具包，net-tools 包含历史悠久的 ifconfig, netstat 等网络相关的命令iproute2 用于取代 net-tools，在大部分的发行版都自带了。命令有 ip, ss, net 等命令替代了之前的网络操作命令。  命令对照表   net-tools iproute2    arp -na ip neigh   ifconfig ip link   ifconfig -a ip addr show   ifconfig -s ip -s link   ifconfig eth0 up ip link set eth0 up   ipmaddr ip maddr   iptunnel ip tunnel   netstat ss   netstat -i ip -s link   netstat -g ip maddr   netstat -l ss -l   netstat -r ip route   route add ip route add   route...</div></div></div></a><a class="pagination-related" href="/posts/11e2a998/" title="搭建网关服务器"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">搭建网关服务器</div></div><div class="info-2"><div class="info-item-1">网关服务器的常见用途:1.企业局域网想要访问外网,可以使用网关服务器上网2.可以一个网卡连接公网,一个网卡连接局域网交换机,让网关服务器做路由器使用 Windows 平台外网适配器打开共享打开 控制面板\网络和 Internet\网络连接右键外网网卡, 属性, 共享   允许其他用户通过此计算机的 Internet 连接来连接   注意: 外网打开允许其他用户连接后,内网的 IP 地址会自动改变,这时候得手动修改一下内网适配器的 IP 地址.  内网机器设置 内网机器网关配置成 网关服务器 的内网 IP  注意:内网适配器的固定 IP 不要填写网关,否则会导致路由混乱. Liunx 服务端 (用 firewalld) 多网卡机器做网关做 nat 转发, 局域网其他机器需要配置网关地址.  开启内核转发 123sudo vim /etc/sysctl.conf---net.ipv4.ip_forward = 1  立即生效 1sudo sysctl -p  开启 NAT 转发 12firewall-cmd --permanent --zone=public...</div></div></div></a><a class="pagination-related" href="/posts/57e7c794/" title="打造一个赏心悦目的终端"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">打造一个赏心悦目的终端</div></div><div class="info-2"><div class="info-item-1"> 本文基于 Windows 平台，系统用的是 WSL(ubuntu 20.04)，shell 用的是 zsh，linux 系统应该类似  先看效果：Windows Terminal: VsCode: oh-my-zsh 官方页面：https://ohmyz.sh/github 地址：https://github.com/ohmyzsh/ohmyzsh  安装12apt install zshsh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;  配置主题我使用的是https://github.com/romkatv/powerlevel10k 1git clone --depth=1 https://github.com/romkatv/powerlevel10k.git...</div></div></div></a><a class="pagination-related" href="/posts/f4ea28c3/" title="LVM逻辑卷管理"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">LVM逻辑卷管理</div></div><div class="info-2"><div class="info-item-1">LVM 是 Logical Volume Manager 的缩写，中文逻辑卷管理，LVM 是建立在磁盘分区和文件系统之间的一个逻辑层，LVM 会更加灵活，可以动态扩容缩容分区大小。调整分区大小有风险，请做好充分测试再决定是否执行。如果没有启用 lvm，请查看 linux磁盘扩容 - 非LVM那么怎么知道机器有没有启用 LVM 呢，可以执行 sudo lvdisplay 查看有没有已存在的 LV，对比 df -hT 里面的 Filesystem，也可以用 lsblk 查看有没有 lvm。 记住一点， 如果你的磁盘没有分区并已经在使用中， 那么千万不要使用 fdisk 来分区，会损坏数据！！！   LVM 的一些概念PV： 物理卷，比如一个分区，一个磁盘VG： 卷组，将多个 PV 整合在一起，形成一个大的池子LV： 逻辑卷，从 VG 划分出来一个个空间，可以当作分区来看待，可以格式化，可以挂载 常用命令    查看 查看详细信息 扩展 创建    卷组 VG vgs vgdisplay vgextend vgcreate   逻辑卷...</div></div></div></a><a class="pagination-related" href="/posts/23ada041/" title="Linux下tmp目录的管理"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Linux下tmp目录的管理</div></div><div class="info-2"><div class="info-item-1">生成临时文件可以使用 mktemp 命令生成 tmp 文件，mktemp -d 生成临时目录，避免临时目录重复使用的问题 123456#!/bin/bashtmp_file=&quot;$(mktemp)&quot;tmp_folder=&quot;$(mktemp -d)&quot;echo $tmp_fileecho $tmp_folder  tmp 目录定时清理这个是由 systemd 的几个模块实现的， 在 centos7 中： 123systemd-tmpfiles-setup.service  ：Create Volatile Files and Directoriessystemd-tmpfiles-setup-dev.service：Create static device nodes in /devsystemd-tmpfiles-clean.service ：Cleanup of Temporary Directories  配置文件也有 3...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://static.zahui.fan/public/dog.svg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">张理坤</div><div class="author-info-description">张理坤的博客</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">323</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">210</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/iuxt"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/iuxt" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:x@zahui.fan" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/165330963" rel="external nofollow noreferrer" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="https://stackoverflow.com/users/15620461/" rel="external nofollow noreferrer" target="_blank" title="StackOverflow"><i class="fa-brands fa-stack-overflow"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-square-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">此博客为我记录运维工作总结所用，供网友阅读参考，如有侵权，请通知我，我会核实后进行处理。</br>
<strong style="color: red;">欢迎加入技术交流群：</strong>
<div class="aside-qrcode" >
<img src="https://src.babudiu.com/card/wechat_ops_group.JPG" title="微信群" width="100%" height="auto">
<img src="https://src.babudiu.com/card/WeChat.JPG" title="微信二维码" width="100%" height="auto">
</div>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99"><span class="toc-number">1.</span> <span class="toc-text">命名规则</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%99%E4%B9%88%E5%81%9A%E7%9A%84%E5%A5%BD%E5%A4%84%E6%98%AF"><span class="toc-number">1.1.</span> <span class="toc-text">这么做的好处是</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87%E5%91%BD%E5%90%8D%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-number">1.2.</span> <span class="toc-text">设备命名的过程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%BD%91%E7%BB%9C%E8%AE%BE%E5%A4%87%E5%91%BD%E5%90%8D"><span class="toc-number">2.</span> <span class="toc-text">修改网络设备命名</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#debian-%E7%B3%BB%E3%80%81ubuntu-%E7%AD%89"><span class="toc-number">2.1.</span> <span class="toc-text">debian 系、ubuntu 等</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redhat-%E7%B3%BB%E3%80%81centos-%E7%AD%89"><span class="toc-number">2.2.</span> <span class="toc-text">redhat 系、centos 等</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E6%97%B6%E4%BF%AE%E6%94%B9"><span class="toc-number">2.2.1.</span> <span class="toc-text">在安装系统时修改</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kickstart-%E9%A2%84%E5%AE%89%E8%A3%85%E5%9B%BA%E5%AE%9A%E8%AE%BE%E5%A4%87%E5%90%8D"><span class="toc-number">3.</span> <span class="toc-text">kickstart 预安装固定设备名</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#centos-%E7%B3%BB"><span class="toc-number">3.1.</span> <span class="toc-text">centos 系</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/smz2c9/" title="使用snmp exporter对交换机、服务器等进行监控"><img src="https://static.zahui.fan/images/202411151309207.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用snmp exporter对交换机、服务器等进行监控"/></a><div class="content"><a class="title" href="/posts/smz2c9/" title="使用snmp exporter对交换机、服务器等进行监控">使用snmp exporter对交换机、服务器等进行监控</a><time datetime="2024-11-15T05:09:58.000Z" title="更新于 2024-11-15 13:09:58">2024-11-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/deff9f9f/" title="Windows系统文件目录"><img src="https://static.zahui.fan/public/Windows-old.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Windows系统文件目录"/></a><div class="content"><a class="title" href="/posts/deff9f9f/" title="Windows系统文件目录">Windows系统文件目录</a><time datetime="2024-11-14T13:06:39.000Z" title="更新于 2024-11-14 21:06:39">2024-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/lmeiruso/" title="WSL2 - Ubuntu配置记录"><img src="https://static.zahui.fan/public/wsl.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="WSL2 - Ubuntu配置记录"/></a><div class="content"><a class="title" href="/posts/lmeiruso/" title="WSL2 - Ubuntu配置记录">WSL2 - Ubuntu配置记录</a><time datetime="2024-11-13T11:05:18.000Z" title="更新于 2024-11-13 19:05:18">2024-11-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/5e168f7e/" title="快速搭建环境记录"><img src="https://static.zahui.fan/public/linux.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="快速搭建环境记录"/></a><div class="content"><a class="title" href="/posts/5e168f7e/" title="快速搭建环境记录">快速搭建环境记录</a><time datetime="2024-11-13T11:05:18.000Z" title="更新于 2024-11-13 19:05:18">2024-11-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/smvb2h/" title="Windows 开机自启动配置位置"><img src="https://static.zahui.fan/public/Windows.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Windows 开机自启动配置位置"/></a><div class="content"><a class="title" href="/posts/smvb2h/" title="Windows 开机自启动配置位置">Windows 开机自启动配置位置</a><time datetime="2024-11-13T02:35:03.000Z" title="更新于 2024-11-13 10:35:03">2024-11-13</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text"><a target="_blank" rel="noopener external nofollow noreferrer" href='https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral'>
  本网站由<img src='https://static.zahui.fan/public/upyun.svg' alt='又拍云' width='70' height='28' style="vertical-align:bottom">
  提供CDN加速/云存储服务
</a>
</br>
<a href="https://beian.miit.gov.cn/" rel="external nofollow noreferrer" target="_blank">沪ICP备2021015230号-1</a>
</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(()=>{
  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const loadGiscus = () => {
    const config = Object.assign({
      src: 'https://giscus.babudiu.com/client.js',
      'data-repo': 'iuxt/iuxt.github.io',
      'data-repo-id': 'R_kgDOMszkdA',
      'data-category-id': 'DIC_kwDOMszkdM4CiMyw',
      'data-mapping': 'pathname',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true
    },null)

    const ele = document.createElement('script')
    for (let key in config) {
      ele.setAttribute(key, config[key])
    }
    document.getElementById('giscus-wrap').appendChild(ele)
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.babudiu.com')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment= loadGiscus
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜搜搜" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>