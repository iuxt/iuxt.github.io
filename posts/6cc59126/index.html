<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>centos常用配置 | 杂烩饭</title><meta name="author" content="张理坤"><meta name="copyright" content="张理坤"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="centos 系统升级请看Centos7 升级 RHEL8 网络配置1vim &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens**  固定 ip 配置12345678910TYPE&#x3D;EthernetBOOTPROTO&#x3D;noneDEVICE&#x3D;ens33ONBOOT&#x3D;yesIPADDR&#x3D;10.0.0.7PREFIX&#x3D;24GATEWAY&#x3D;10.0.0.2DNS1&#x3D;10.0">
<meta property="og:type" content="article">
<meta property="og:title" content="centos常用配置">
<meta property="og:url" content="https://zahui.fan/posts/6cc59126/">
<meta property="og:site_name" content="杂烩饭">
<meta property="og:description" content="centos 系统升级请看Centos7 升级 RHEL8 网络配置1vim &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens**  固定 ip 配置12345678910TYPE&#x3D;EthernetBOOTPROTO&#x3D;noneDEVICE&#x3D;ens33ONBOOT&#x3D;yesIPADDR&#x3D;10.0.0.7PREFIX&#x3D;24GATEWAY&#x3D;10.0.0.2DNS1&#x3D;10.0">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://static.zahui.fan/public/CentOS.svg">
<meta property="article:published_time" content="2021-02-09T08:50:58.000Z">
<meta property="article:modified_time" content="2024-10-31T03:20:09.000Z">
<meta property="article:author" content="张理坤">
<meta property="article:tag" content="配置记录">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="CentOS">
<meta property="article:tag" content="Systemd">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://static.zahui.fan/public/CentOS.svg"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://zahui.fan/posts/6cc59126/"><link rel="preconnect"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/site.webmanifest"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?50b516d50102c8c9ac5f80529b81ca17";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-YN0WWZGVYN"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-YN0WWZGVYN')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-YN0WWZGVYN', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"此文章距离发布已经","messageNext":"天了，内容可能已经过时，请自行判断是否可用或联系博主更新。"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'centos常用配置',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-10-31 11:20:09'
}</script><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="杂烩饭" type="application/atom+xml">
<link rel="alternate" href="/rss2.xml" title="杂烩饭" type="application/rss+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://static.zahui.fan/public/dog.svg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">329</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">212</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://file.babudiu.com/"><i class="fa-fw fa-solid fa-file"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(https://static.zahui.fan/public/CentOS.svg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="https://static.zahui.fan/public/boob.png" alt="Logo"><span class="site-name">杂烩饭</span></a><a class="nav-page-title" href="/"><span class="site-name">centos常用配置</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://file.babudiu.com/"><i class="fa-fw fa-solid fa-file"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">centos常用配置</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-02-09T08:50:58.000Z" title="发表于 2021-02-09 16:50:58">2021-02-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-10-31T03:20:09.000Z" title="更新于 2024-10-31 11:20:09">2024-10-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%9F%BA%E7%A1%80%E8%BF%90%E7%BB%B4/">基础运维</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>centos 系统升级请看<br><a href="/posts/6d586ed1">Centos7 升级 RHEL8</a></p>
<h2 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-ens**</span><br></pre></td></tr></table></figure>

<h3 id="固定-ip-配置"><a href="#固定-ip-配置" class="headerlink" title="固定 ip 配置"></a>固定 ip 配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Ethernet</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">DEVICE=ens33</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=10.0.0.7</span><br><span class="line">PREFIX=24</span><br><span class="line">GATEWAY=10.0.0.2</span><br><span class="line">DNS1=10.0.0.2</span><br><span class="line">DNS2=223.5.5.5</span><br><span class="line">DOMAIN=10.0.0.2</span><br></pre></td></tr></table></figure>

<h3 id="DHCP-配置"><a href="#DHCP-配置" class="headerlink" title="DHCP 配置"></a>DHCP 配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Ethernet</span><br><span class="line">BOOTPROTO=dhcp</span><br><span class="line">PERSISTENT_DHCLIENT=yes</span><br><span class="line">DEVICE=ens33</span><br><span class="line">ONBOOT=yes</span><br></pre></td></tr></table></figure>

<h3 id="临时修改-IP（重启失效）"><a href="#临时修改-IP（重启失效）" class="headerlink" title="临时修改 IP（重启失效）"></a>临时修改 IP（重启失效）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 192.168.120.56</span><br><span class="line">ifconfig eth0 192.168.120.56 netmask 255.255.255.0</span><br><span class="line">ifconfig eth0 192.168.120.56 netmask 255.255.255.0 broadcast 192.168.120.255</span><br></pre></td></tr></table></figure>

<h3 id="临时增加-vip"><a href="#临时增加-vip" class="headerlink" title="临时增加 vip"></a>临时增加 vip</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr add 192.168.20.20/24 brd + dev eth0</span><br></pre></td></tr></table></figure>

<h3 id="网卡配置-VLAN"><a href="#网卡配置-VLAN" class="headerlink" title="网卡配置 VLAN"></a>网卡配置 VLAN</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Vlan</span><br><span class="line">VLAN=yes</span><br><span class="line">VLAN_ID=180</span><br><span class="line">BOOTPROTO=none</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">NAME=enp3s0f0</span><br><span class="line">DEVICE=enp3s0f0</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=192.168.20.230</span><br><span class="line">PREFIX=24</span><br><span class="line">GATEWAY=192.168.20.1</span><br><span class="line">DNS1=114.114.114.114</span><br></pre></td></tr></table></figure>

<h3 id="修改网卡名"><a href="#修改网卡名" class="headerlink" title="修改网卡名"></a>修改网卡名</h3><blockquote>
<p>centos7 默认是以接口名称被自动基于固件，拓扑结构和位置信息来确定。如 ens33,如果想要以 eth0 来命名</p>
</blockquote>
<ul>
<li>安装时配置</li>
</ul>
<p>光标选择“Install CentOS 7”<br>点击 Tab，打开 kernel 启动选项后，增加 <code>net.ifnames=0 biosdevname=0</code></p>
<h2 id="系统配置"><a href="#系统配置" class="headerlink" title="系统配置"></a>系统配置</h2><h3 id="关闭-selinux"><a href="#关闭-selinux" class="headerlink" title="关闭 selinux"></a>关闭 selinux</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s#SELINUX=enforcing#SELINUX=disabled#g&#x27;</span> /etc/sysconfig/selinux &amp;&amp; setenforce 0</span><br></pre></td></tr></table></figure>

<h3 id="timedatectl-命令"><a href="#timedatectl-命令" class="headerlink" title="timedatectl 命令"></a>timedatectl 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">timedatectl list-timezones                    <span class="comment"># 列出所有时区</span></span><br><span class="line">timedatectl set-local-rtc 1                   <span class="comment"># 将硬件时钟调整为与本地时钟一致, 0 为设置为 UTC 时间</span></span><br><span class="line">timedatectl set-timezone Asia/Shanghai        <span class="comment"># 设置系统时区为上海</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">timedatectl status                            <span class="comment"># 查看状态</span></span><br><span class="line"></span><br><span class="line">timedatectl set-ntp 0                         <span class="comment"># 禁用ntp</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只设置时间的话可以使用set-time开关以及HH：MM：SS（小时，分，秒）的时间格式。</span></span><br><span class="line">timedatectl set-time 15:58:30</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只设置日期的话可以使用set-time开关以及YY：MM：DD（年，月，日）的日期格式。</span></span><br><span class="line">timedatectl set-time 20151120</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置日期和时间：</span></span><br><span class="line">timedatectl set-time <span class="string">&#x27;16:10:40 2015-11-20&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="ntp-时间同步"><a href="#ntp-时间同步" class="headerlink" title="ntp 时间同步"></a>ntp 时间同步</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install ntp ntpdate -y </span><br><span class="line"></span><br><span class="line">systemctl start ntpdate</span><br><span class="line"></span><br><span class="line">ntpdate time.windows.com</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ntp 只会同步系统时间而不会同步硬件时间，若服务器重启则系统时间会失效，依旧从硬件时间开始计时，所以使用 ntp 同步系统时间后需要将系统时间同步到硬件时间 hwclock -w</p>
</blockquote>
<h3 id="修改内核参数"><a href="#修改内核参数" class="headerlink" title="修改内核参数"></a>修改内核参数</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -w net.ipv4.ip_forward=1</span><br></pre></td></tr></table></figure>

<h3 id="忘记密码"><a href="#忘记密码" class="headerlink" title="忘记密码"></a>忘记密码</h3><p>重启, 在 <code>grub2</code> 界面 先按 <code>↑</code> 停在这个界面,然后按 <code>e</code> 进入编辑模式<br>找到 <code>linux16</code> 那一行, 在最后面添加 <code>init=/bin/sh</code><br>按 <code>ctrl + x</code> 继续启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mount -o remount,rw /</span><br><span class="line">passwd root</span><br><span class="line"></span><br><span class="line"><span class="built_in">touch</span> /.autorelabel     <span class="comment"># 使selinux生效，否则可能无法正常启动</span></span><br><span class="line"><span class="built_in">exec</span> /sbin/init         <span class="comment"># 正常启动系统</span></span><br></pre></td></tr></table></figure>

<h3 id="修改时区"><a href="#修改时区" class="headerlink" title="修改时区"></a>修改时区</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 修改默认语言</span></span><br><span class="line">sed -i <span class="string">&#x27;s@LANG=.*$@LANG=&quot;en_US.UTF-8&quot;@g&#x27;</span> /etc/locale.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过环境变量设置时区</span></span><br><span class="line"><span class="built_in">export</span> TZ=<span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改时区(修改环境变量后就没必要这样修改了)</span></span><br><span class="line"><span class="built_in">rm</span> -rf /etc/localtime</span><br><span class="line"><span class="built_in">ln</span> -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></pre></td></tr></table></figure>

<h3 id="安装相应字体"><a href="#安装相应字体" class="headerlink" title="安装相应字体"></a>安装相应字体</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install dejavu-lgc-sans-fonts</span><br></pre></td></tr></table></figure>

<h3 id="全局代理"><a href="#全局代理" class="headerlink" title="全局代理"></a>全局代理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> http_proxy=<span class="string">&quot;http://10.0.0.1:21882&quot;</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>

<h2 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-units                    <span class="comment">##列出当前系统服务的状态</span></span><br><span class="line">systemctl list-unit-files               <span class="comment">##列出服务的开机状态</span></span><br><span class="line">systemctl status sshd                   <span class="comment">##查看指定服务的状态</span></span><br><span class="line">systemctl stop sshd                     <span class="comment">##关闭指定服务</span></span><br><span class="line">systemctl start sshd                    <span class="comment">##开启指定服务</span></span><br><span class="line">systemctl restart sshd                  <span class="comment">##从新启动服务</span></span><br><span class="line">systemctl <span class="built_in">enable</span> sshd                   <span class="comment">##设定指定服务开机开启</span></span><br><span class="line">systemctl <span class="built_in">disable</span> sshd                  <span class="comment">##设定指定服务开机关闭</span></span><br><span class="line">systemctl reload sshd                   <span class="comment">##使指定服务从新加载配置</span></span><br><span class="line">systemctl list-dependencies sshd        <span class="comment">##查看指定服务的倚赖关系</span></span><br><span class="line">systemctl mask  sshd                    <span class="comment">##冻结指定服务</span></span><br><span class="line">systemctl unmask sshd                   <span class="comment">##启用服务</span></span><br><span class="line">systemctl set-default multi-user.target <span class="comment">##开机不开启图形</span></span><br><span class="line">systemctl set-default graphical.target  <span class="comment">##开机启动图形</span></span><br><span class="line">setterm                                 <span class="comment">##文本界面设定color</span></span><br></pre></td></tr></table></figure>

<h3 id="查看所有的-service"><a href="#查看所有的-service" class="headerlink" title="查看所有的 service"></a>查看所有的 service</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ll /usr/lib/systemd/system/</span><br></pre></td></tr></table></figure>

<h3 id="查看开机自启的-service"><a href="#查看开机自启的-service" class="headerlink" title="查看开机自启的 service"></a>查看开机自启的 service</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-unit-files | grep enabled</span><br><span class="line">ll /etc/systemd/system/multi-user.target.wants/</span><br></pre></td></tr></table></figure>

<h3 id="hostnamectl-命令"><a href="#hostnamectl-命令" class="headerlink" title="hostnamectl 命令"></a>hostnamectl 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname centos1</span><br></pre></td></tr></table></figure>

<h3 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start firewalld.service</span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br></pre></td></tr></table></figure>

<h2 id="基础环境"><a href="#基础环境" class="headerlink" title="基础环境"></a>基础环境</h2><h3 id="编译环境"><a href="#编译环境" class="headerlink" title="编译环境"></a>编译环境</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum groupinstall <span class="string">&quot;Development Tools&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="yum-和-rpm"><a href="#yum-和-rpm" class="headerlink" title="yum 和 rpm"></a>yum 和 rpm</h2><blockquote>
<p>yum 是用 python 写的</p>
</blockquote>
<h3 id="查看一个包有哪些文件组成"><a href="#查看一个包有哪些文件组成" class="headerlink" title="查看一个包有哪些文件组成"></a>查看一个包有哪些文件组成</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ql yum</span><br></pre></td></tr></table></figure>

<h3 id="查看所有包列表"><a href="#查看所有包列表" class="headerlink" title="查看所有包列表"></a>查看所有包列表</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa</span><br></pre></td></tr></table></figure>

<h3 id="本地安装包-会自动处理依赖"><a href="#本地安装包-会自动处理依赖" class="headerlink" title="本地安装包,会自动处理依赖"></a>本地安装包,会自动处理依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum localinstall ./xxx.rpm</span><br></pre></td></tr></table></figure>

<h3 id="本地安装包，不处理依赖"><a href="#本地安装包，不处理依赖" class="headerlink" title="本地安装包，不处理依赖"></a>本地安装包，不处理依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh ./xxx.rpm</span><br></pre></td></tr></table></figure>

<h3 id="阿里云源"><a href="#阿里云源" class="headerlink" title="阿里云源"></a>阿里云源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class="line"></span><br><span class="line"><span class="comment"># CentOS 7</span></span><br><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line"><span class="comment"># 非阿里云ECS用户</span></span><br><span class="line">sed -i -e <span class="string">&#x27;/mirrors.cloud.aliyuncs.com/d&#x27;</span> -e <span class="string">&#x27;/mirrors.aliyuncs.com/d&#x27;</span> /etc/yum.repos.d/CentOS-Base.repo</span><br><span class="line"></span><br><span class="line"><span class="comment"># epel(RHEL 7)</span></span><br><span class="line">curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span><br></pre></td></tr></table></figure>

<h3 id="Remi-源-各种版本的-php"><a href="#Remi-源-各种版本的-php" class="headerlink" title="Remi 源 (各种版本的 php)"></a>Remi 源 (各种版本的 php)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install https://mirrors.aliyun.com/remi/enterprise/remi-release-7.rpm</span><br><span class="line"></span><br><span class="line">yum install php74-php-fpm</span><br></pre></td></tr></table></figure>

<h3 id="查询一个文件属于哪个包"><a href="#查询一个文件属于哪个包" class="headerlink" title="查询一个文件属于哪个包"></a>查询一个文件属于哪个包</h3><ul>
<li>本机已经有这个文件，想知道在哪个包里面</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qf  /file/path</span><br></pre></td></tr></table></figure>

<ul>
<li>缺少文件, 想知道在哪个包里面，方便安装</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum provides libm.so.6</span><br></pre></td></tr></table></figure>

<h3 id="只下载不安装"><a href="#只下载不安装" class="headerlink" title="只下载不安装"></a>只下载不安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install --downloadonly --downloaddir=/tmp/ vsftpd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者使用</span></span><br><span class="line">yumdownloader --resolve --destdir=./aa/ lrzsz</span><br></pre></td></tr></table></figure>

<h3 id="安装指定版本的包"><a href="#安装指定版本的包" class="headerlink" title="安装指定版本的包"></a>安装指定版本的包</h3><p>查询包有那些可用的版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list kubelet kubeadm kubectl  --showduplicates | <span class="built_in">sort</span> -r</span><br></pre></td></tr></table></figure>

<p>安装指定版本的包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install kubelet-1.16.9-0 kubeadm-1.16.9-0 kubectl-1.16.9-0</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://zahui.fan">张理坤</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://zahui.fan/posts/6cc59126/">https://zahui.fan/posts/6cc59126/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://zahui.fan" target="_blank">杂烩饭</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95/">配置记录</a><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/CentOS/">CentOS</a><a class="post-meta__tags" href="/tags/Systemd/">Systemd</a></div><div class="post-share"><div class="social-share" data-image="https://static.zahui.fan/public/CentOS.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/27a660e/" title="ubuntu常用配置"><img class="cover" src="https://static.zahui.fan/public/Ubuntu.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">ubuntu常用配置</div></div><div class="info-2"><div class="info-item-1">修改国内源什么是 DEB822 (.sources) 文件格式？自新版本的 Debian 与 Ubuntu 起，例如：  Debian 12 的容器镜像 Ubuntu 24.04  默认预装的系统中 APT 的系统源配置文件不再是传统的 /etc/apt/sources.list。传统格式（又被称为 One-Line-Style 格式）类似如下： 1deb http://mirrors.ustc.edu.cn/debian/ bookworm main contrib  新的 DEB822 格式自 APT 1.1（2015 年发布）起支持，后缀为 .sources，存储在 /etc/apt/sources.list.d/ 目录下，格式类似如下： 12345Types: debURIs: https://mirrors.ustc.edu.cn/debianSuites: bookwormComponents: main contribSigned-By:...</div></div></div></a><a class="pagination-related" href="/posts/ab21860c/" title="静态博客生成工具hexo"><img class="cover" src="https://static.zahui.fan/public/hexo.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">静态博客生成工具hexo</div></div><div class="info-2"><div class="info-item-1">hugo 文档请看 hugo 安装 nodejs yarn hexo 推荐使用 yarn 来代替 npm首先安装 nodejs，和 npm, 然后再安装 yarn  安装 yarn1npm install -g yarn  设置淘宝源1yarn config set registry https://registry.npm.taobao.org -g  安装 hexo1yarn global add hexo-cli  创建新项目 如果找不到 hexo,请把 yarn global bin 添加到环境变量  1hexo init myblog  修改配置修改语言为中文vim myblog&#x2F;_config.yml 1234567# Sitetitle: 张理坤的博客subtitle: &#x27;飞机师的风衣&#x27;keywords:author: 张理坤language: zh-CNtimezone: &#x27;Asia/Shanghai&#x27;  安装 next 主题github...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/f94fbe20/" title="Systemd入门教程all in One"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Systemd入门教程all in One</div></div><div class="info-2"><div class="info-item-1"> 参考自https://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html，感谢阮一峰老哥。同样可以看 Arch Wiki：systemd ，Arch Wiki 真的不错。  由来历史上，Linux 的启动一直采用 init 进程。 下面的命令用来启动服务。 123sudo /etc/init.d/apache2 start# 或者service apache2 start  这种方法有两个缺点。  一是启动时间长。init 进程是串行启动，只有前一个进程启动完，才会启动下一个进程。 二是启动脚本复杂。init 进程只是执行启动脚本，不管其他事情。脚本需要自己处理各种情况，这往往使得脚本变得很长。  systemd 的诞生Systemd 就是为了解决这些问题而诞生的。它的设计目标是，为系统的启动和管理提供一套完整的解决方案。systemd 成为系统的第一个进程（也就是 PID&#x3D;1），其他进程都是它的子进程。 systemd 包括的命令 systemd 不是一个命令，而是一组命令。比如...</div></div></div></a><a class="pagination-related" href="/posts/57e7c794/" title="打造一个赏心悦目的终端"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">打造一个赏心悦目的终端</div></div><div class="info-2"><div class="info-item-1"> 本文基于 Windows 平台，系统用的是 WSL(ubuntu 20.04)，shell 用的是 zsh，linux 系统应该类似  先看效果：Windows Terminal: VsCode: oh-my-zsh 官方页面：https://ohmyz.sh/github 地址：https://github.com/ohmyzsh/ohmyzsh  安装12apt install zshsh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;  配置主题我使用的是https://github.com/romkatv/powerlevel10k 1git clone --depth=1 https://github.com/romkatv/powerlevel10k.git...</div></div></div></a><a class="pagination-related" href="/posts/f4ea28c3/" title="LVM逻辑卷管理"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">LVM逻辑卷管理</div></div><div class="info-2"><div class="info-item-1">LVM 是 Logical Volume Manager 的缩写，中文逻辑卷管理，LVM 是建立在磁盘分区和文件系统之间的一个逻辑层，LVM 会更加灵活，可以动态扩容缩容分区大小。调整分区大小有风险，请做好充分测试再决定是否执行。如果没有启用 lvm，请查看 linux磁盘扩容 - 非LVM那么怎么知道机器有没有启用 LVM 呢，可以执行 sudo lvdisplay 查看有没有已存在的 LV，对比 df -hT 里面的 Filesystem，也可以用 lsblk 查看有没有 lvm。 记住一点， 如果你的磁盘没有分区并已经在使用中， 那么千万不要使用 fdisk 来分区，会损坏数据！！！   LVM 的一些概念PV： 物理卷，比如一个分区，一个磁盘VG： 卷组，将多个 PV 整合在一起，形成一个大的池子LV： 逻辑卷，从 VG 划分出来一个个空间，可以当作分区来看待，可以格式化，可以挂载 常用命令    查看 查看详细信息 扩展 创建    卷组 VG vgs vgdisplay vgextend vgcreate   逻辑卷...</div></div></div></a><a class="pagination-related" href="/posts/23ada041/" title="Linux下tmp目录的管理"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Linux下tmp目录的管理</div></div><div class="info-2"><div class="info-item-1">生成临时文件可以使用 mktemp 命令生成 tmp 文件，mktemp -d 生成临时目录，避免临时目录重复使用的问题 123456#!/bin/bashtmp_file=&quot;$(mktemp)&quot;tmp_folder=&quot;$(mktemp -d)&quot;echo $tmp_fileecho $tmp_folder  tmp 目录定时清理这个是由 systemd 的几个模块实现的， 在 centos7 中： 123systemd-tmpfiles-setup.service  ：Create Volatile Files and Directoriessystemd-tmpfiles-setup-dev.service：Create static device nodes in /devsystemd-tmpfiles-clean.service ：Cleanup of Temporary Directories  配置文件也有 3...</div></div></div></a><a class="pagination-related" href="/posts/ls0614ms/" title="Linux常用命令之lsof"><img class="cover" src="https://static.zahui.fan/public/bash.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Linux常用命令之lsof</div></div><div class="info-2"><div class="info-item-1">lsof（list open files）是一个列出当前系统打开文件的工具。在 linux 环境下，任何事物都以文件的形式存在，通过文件不仅仅可以访问常规数据，还可以访问网络连接和硬件。 常用参数   参数 说明    -p 根据 pid 查找   直接加文件路径 查看这个文件被哪个进程打开了   -c 显示 COMMAND 列中包含指定字符的进程所有打开的文件   lsof -u username 显示所属 user 进程打开的文件   -i 用以显示符合条件的进程情况   lsof -g gid 显示归属 gid 的进程情况   lsof +d &#x2F;DIR&#x2F; 显示目录下被进程打开的文件   lsof +D &#x2F;DIR&#x2F; 同上，但是会搜索目录下的所有目录，时间相对较长   lsof -d FD 显示指定文件描述符的进程   lsof -n 不将 IP 转换为 hostname，缺省是不加上 -n 参数   lsof -i 用以显示符合条件的进程情况   一些例子查看 java 程序打开的文件1lsof -c java  当然你也可以到...</div></div></div></a><a class="pagination-related" href="/posts/lnmt2t0q/" title="Linux里安装crontab并运行"><img class="cover" src="https://static.zahui.fan/public/linux.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Linux里安装crontab并运行</div></div><div class="info-2"><div class="info-item-1">常见的 linux 发行版都自带了 crontab 服务, 但是我们常用的容器镜像是没有的, 不要问我为什么要在容器里运行 crontab…Linux定时执行任务crontabLinux的crontab无法执行的一些问题 CentOS&#x2F;RedHat 系列安装1yum install -y cronie  配置文件位置后面的 root 是用户名 1/var/spool/cron/root  启动命令12345# 后台运行crond# 前台运行crond -f   Ubuntu&#x2F;Debian 系列安装1sudo apt-get install -y cron  配置文件位置后面的 root 是用户名 1/var/spool/cron/crontabs/root  启动命令12345# 后台运行cron# 前台运行cron -f  Alpine安装官方镜像自带了 配置文件位置后面的 root 是用户名 1/etc/crontabs/root  启动命令12345# 前台运行crond -f# 后台运行crond</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://static.zahui.fan/public/dog.svg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">张理坤</div><div class="author-info-description">张理坤的博客</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">329</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">212</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/iuxt"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/iuxt" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:x@zahui.fan" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/165330963" rel="external nofollow noreferrer" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="https://stackoverflow.com/users/15620461/" rel="external nofollow noreferrer" target="_blank" title="StackOverflow"><i class="fa-brands fa-stack-overflow"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-square-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">此博客为我记录运维工作总结所用，供网友阅读参考，如有侵权，请通知我，我会核实后进行处理。</br>
<strong style="color: red;">欢迎加入技术交流群：</strong>
<div class="aside-qrcode" >
<img src="https://src.babudiu.com/card/wechat_ops_group.JPG" title="微信群" width="100%" height="auto">
<img src="https://static.zahui.fan/card/wechat.jpg" title="微信二维码" width="100%" height="auto">
</div>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><span class="toc-number">1.</span> <span class="toc-text">网络配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BA%E5%AE%9A-ip-%E9%85%8D%E7%BD%AE"><span class="toc-number">1.1.</span> <span class="toc-text">固定 ip 配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DHCP-%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.</span> <span class="toc-text">DHCP 配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E4%BF%AE%E6%94%B9-IP%EF%BC%88%E9%87%8D%E5%90%AF%E5%A4%B1%E6%95%88%EF%BC%89"><span class="toc-number">1.3.</span> <span class="toc-text">临时修改 IP（重启失效）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E5%A2%9E%E5%8A%A0-vip"><span class="toc-number">1.4.</span> <span class="toc-text">临时增加 vip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE-VLAN"><span class="toc-number">1.5.</span> <span class="toc-text">网卡配置 VLAN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%BD%91%E5%8D%A1%E5%90%8D"><span class="toc-number">1.6.</span> <span class="toc-text">修改网卡名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">系统配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%97%AD-selinux"><span class="toc-number">2.1.</span> <span class="toc-text">关闭 selinux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#timedatectl-%E5%91%BD%E4%BB%A4"><span class="toc-number">2.2.</span> <span class="toc-text">timedatectl 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ntp-%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5"><span class="toc-number">2.3.</span> <span class="toc-text">ntp 时间同步</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0"><span class="toc-number">2.4.</span> <span class="toc-text">修改内核参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%98%E8%AE%B0%E5%AF%86%E7%A0%81"><span class="toc-number">2.5.</span> <span class="toc-text">忘记密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%97%B6%E5%8C%BA"><span class="toc-number">2.6.</span> <span class="toc-text">修改时区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E7%9B%B8%E5%BA%94%E5%AD%97%E4%BD%93"><span class="toc-number">2.7.</span> <span class="toc-text">安装相应字体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86"><span class="toc-number">2.8.</span> <span class="toc-text">全局代理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1"><span class="toc-number">3.</span> <span class="toc-text">服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%9A%84-service"><span class="toc-number">3.1.</span> <span class="toc-text">查看所有的 service</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E7%9A%84-service"><span class="toc-number">3.2.</span> <span class="toc-text">查看开机自启的 service</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hostnamectl-%E5%91%BD%E4%BB%A4"><span class="toc-number">3.3.</span> <span class="toc-text">hostnamectl 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">3.4.</span> <span class="toc-text">防火墙</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83"><span class="toc-number">4.</span> <span class="toc-text">基础环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83"><span class="toc-number">4.1.</span> <span class="toc-text">编译环境</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#yum-%E5%92%8C-rpm"><span class="toc-number">5.</span> <span class="toc-text">yum 和 rpm</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E4%B8%80%E4%B8%AA%E5%8C%85%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%87%E4%BB%B6%E7%BB%84%E6%88%90"><span class="toc-number">5.1.</span> <span class="toc-text">查看一个包有哪些文件组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E5%8C%85%E5%88%97%E8%A1%A8"><span class="toc-number">5.2.</span> <span class="toc-text">查看所有包列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E5%AE%89%E8%A3%85%E5%8C%85-%E4%BC%9A%E8%87%AA%E5%8A%A8%E5%A4%84%E7%90%86%E4%BE%9D%E8%B5%96"><span class="toc-number">5.3.</span> <span class="toc-text">本地安装包,会自动处理依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E5%AE%89%E8%A3%85%E5%8C%85%EF%BC%8C%E4%B8%8D%E5%A4%84%E7%90%86%E4%BE%9D%E8%B5%96"><span class="toc-number">5.4.</span> <span class="toc-text">本地安装包，不处理依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%BF%E9%87%8C%E4%BA%91%E6%BA%90"><span class="toc-number">5.5.</span> <span class="toc-text">阿里云源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Remi-%E6%BA%90-%E5%90%84%E7%A7%8D%E7%89%88%E6%9C%AC%E7%9A%84-php"><span class="toc-number">5.6.</span> <span class="toc-text">Remi 源 (各种版本的 php)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%B1%9E%E4%BA%8E%E5%93%AA%E4%B8%AA%E5%8C%85"><span class="toc-number">5.7.</span> <span class="toc-text">查询一个文件属于哪个包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AA%E4%B8%8B%E8%BD%BD%E4%B8%8D%E5%AE%89%E8%A3%85"><span class="toc-number">5.8.</span> <span class="toc-text">只下载不安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC%E7%9A%84%E5%8C%85"><span class="toc-number">5.9.</span> <span class="toc-text">安装指定版本的包</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/lt41mupw/" title="通过docker容器查看run命令"><img src="https://static.zahui.fan/images/202412031037042.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="通过docker容器查看run命令"/></a><div class="content"><a class="title" href="/posts/lt41mupw/" title="通过docker容器查看run命令">通过docker容器查看run命令</a><time datetime="2024-12-03T09:19:31.000Z" title="更新于 2024-12-03 17:19:31">2024-12-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4d9192f8/" title="守护进程工具supervisor"><img src="https://static.zahui.fan/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="守护进程工具supervisor"/></a><div class="content"><a class="title" href="/posts/4d9192f8/" title="守护进程工具supervisor">守护进程工具supervisor</a><time datetime="2024-12-03T03:50:36.000Z" title="更新于 2024-12-03 11:50:36">2024-12-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ffacccf0/" title="使用 docker buildx 构建不同平台的镜像"><img src="https://static.zahui.fan/images/202412031037042.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用 docker buildx 构建不同平台的镜像"/></a><div class="content"><a class="title" href="/posts/ffacccf0/" title="使用 docker buildx 构建不同平台的镜像">使用 docker buildx 构建不同平台的镜像</a><time datetime="2024-12-03T03:50:36.000Z" title="更新于 2024-12-03 11:50:36">2024-12-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/schwdt/" title="使用Docker部署一套用于学习的Elasticsearch集群"><img src="https://static.zahui.fan/images/202412031037042.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Docker部署一套用于学习的Elasticsearch集群"/></a><div class="content"><a class="title" href="/posts/schwdt/" title="使用Docker部署一套用于学习的Elasticsearch集群">使用Docker部署一套用于学习的Elasticsearch集群</a><time datetime="2024-12-03T03:50:36.000Z" title="更新于 2024-12-03 11:50:36">2024-12-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/snui2r/" title="Elasticsearch索引生命周期配置"><img src="https://static.zahui.fan/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Elasticsearch索引生命周期配置"/></a><div class="content"><a class="title" href="/posts/snui2r/" title="Elasticsearch索引生命周期配置">Elasticsearch索引生命周期配置</a><time datetime="2024-12-02T11:51:33.000Z" title="更新于 2024-12-02 19:51:33">2024-12-02</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text"><a target="_blank" rel="noopener external nofollow noreferrer" href='https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral'>
  本网站由<img src='https://static.zahui.fan/public/upyun.svg' alt='又拍云' width='70' height='28' style="vertical-align:bottom">
  提供CDN加速/云存储服务
</a>
</br>
<a href="https://beian.miit.gov.cn/" rel="external nofollow noreferrer" target="_blank">沪ICP备2021015230号-1</a>
</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(()=>{
  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const loadGiscus = () => {
    const config = Object.assign({
      src: 'https://giscus.babudiu.com/client.js',
      'data-repo': 'iuxt/iuxt.github.io',
      'data-repo-id': 'R_kgDOMszkdA',
      'data-category-id': 'DIC_kwDOMszkdM4CiMyw',
      'data-mapping': 'pathname',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true
    },null)

    const ele = document.createElement('script')
    for (let key in config) {
      ele.setAttribute(key, config[key])
    }
    document.getElementById('giscus-wrap').appendChild(ele)
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.babudiu.com')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment= loadGiscus
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜搜搜" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>