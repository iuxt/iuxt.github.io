<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>gpg使用记录 | 杂烩饭</title><meta name="author" content="张理坤"><meta name="copyright" content="张理坤"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="要了解什么是 GPG，就要先了解 PGP。 1991 年，程序员 Phil Zimmermann 为了避开政府监视，开发了加密软件 PGP。这个软件非常好用，迅速流传开来，成了许多程序员的必备工具。但是，它是商业软件，不能自由使用。所以，自由软件基金会决定，开发一个 PGP 的替代品，取名为 GnuPG。这就是 GPG 的由来。 GPG 有许多用途，本文主要介绍文件加密。至于邮件的加密，不同的邮件">
<meta property="og:type" content="article">
<meta property="og:title" content="gpg使用记录">
<meta property="og:url" content="https://zahui.fan/posts/e0fe652d/">
<meta property="og:site_name" content="杂烩饭">
<meta property="og:description" content="要了解什么是 GPG，就要先了解 PGP。 1991 年，程序员 Phil Zimmermann 为了避开政府监视，开发了加密软件 PGP。这个软件非常好用，迅速流传开来，成了许多程序员的必备工具。但是，它是商业软件，不能自由使用。所以，自由软件基金会决定，开发一个 PGP 的替代品，取名为 GnuPG。这就是 GPG 的由来。 GPG 有许多用途，本文主要介绍文件加密。至于邮件的加密，不同的邮件">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://static.zahui.fan/images/202212261651813.svg">
<meta property="article:published_time" content="2022-12-26T00:48:05.000Z">
<meta property="article:modified_time" content="2024-10-31T03:20:09.000Z">
<meta property="article:author" content="张理坤">
<meta property="article:tag" content="加密">
<meta property="article:tag" content="gpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://static.zahui.fan/images/202212261651813.svg"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://zahui.fan/posts/e0fe652d/"><link rel="preconnect"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/site.webmanifest"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?50b516d50102c8c9ac5f80529b81ca17";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-YN0WWZGVYN"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-YN0WWZGVYN')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-YN0WWZGVYN', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"此文章距离发布已经","messageNext":"天了，内容可能已经过时，请自行判断是否可用或联系博主更新。"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'gpg使用记录',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-10-31 11:20:09'
}</script><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.7.0/style.min.css" /><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="杂烩饭" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://static.zahui.fan/public/dog.svg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">338</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">214</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://file.babudiu.com/"><i class="fa-fw fa-solid fa-file"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(https://static.zahui.fan/images/202212261651813.svg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="https://static.zahui.fan/public/boob.png" alt="Logo"><span class="site-name">杂烩饭</span></a><a class="nav-page-title" href="/"><span class="site-name">gpg使用记录</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://file.babudiu.com/"><i class="fa-fw fa-solid fa-file"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">gpg使用记录</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-12-26T00:48:05.000Z" title="发表于 2022-12-26 08:48:05">2022-12-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-10-31T03:20:09.000Z" title="更新于 2024-10-31 11:20:09">2024-10-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%9F%BA%E7%A1%80%E8%BF%90%E7%BB%B4/">基础运维</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>要了解什么是 GPG，就要先了解 PGP。</p>
<p>1991 年，程序员 Phil Zimmermann 为了避开政府监视，开发了加密软件 PGP。这个软件非常好用，迅速流传开来，成了许多程序员的必备工具。但是，它是商业软件，不能自由使用。所以，自由软件基金会决定，开发一个 PGP 的替代品，取名为 GnuPG。这就是 GPG 的由来。</p>
<p>GPG 有许多用途，本文主要介绍文件加密。至于邮件的加密，不同的邮件客户端有不同的设置。</p>
<p>当前我的系统环境是 <code>Ubuntu 22.04</code> gpg 版本是 <code>gpg (GnuPG) 2.2.27</code>。</p>
<h2 id="Key-管理"><a href="#Key-管理" class="headerlink" title="Key 管理"></a>Key 管理</h2><p>Key ID: 该 GPG Key 的唯一标识，值为主公钥的指纹，支持多种格式 (Fingerprint, Long key ID, Short key ID)。<br>UID: 1 个或多个，每个 UID 由 name、email、comment 组成，email 和 comment 可以为空。<br>Expire: 过期时间，可以为永久。<br>主秘钥和主公钥（Primary Key）、子秘钥和子公钥（Sub Key）都是成对出现的，其用途也是一致的。<br>每一对都包含一个 key id 属性（为 public key 的指纹），其中主密钥&#x2F;主公钥的 key id 就是当前 GPG Key 的 Key ID。</p>
<h2 id="创建密钥对"><a href="#创建密钥对" class="headerlink" title="创建密钥对"></a>创建密钥对</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 快速生成密钥对</span></span><br><span class="line">gpg --gen-key</span><br><span class="line"></span><br><span class="line"><span class="comment"># 交互式创建</span></span><br><span class="line">gpg --full-gen-key</span><br></pre></td></tr></table></figure>

<p>这里我们使用 –full-gen-key 来生成密钥对，首先选择密钥类型，选择 1 (默认) 即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --full-gen-key</span><br><span class="line"></span><br><span class="line">gpg (GnuPG) 2.2.27; Copyright (C) 2021 Free Software Foundation, Inc.</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line"></span><br><span class="line">Please <span class="keyword">select</span> what kind of key you want:</span><br><span class="line">   (1) RSA and RSA (default)</span><br><span class="line">   (2) DSA and Elgamal</span><br><span class="line">   (3) DSA (sign only)</span><br><span class="line">   (4) RSA (sign only)</span><br><span class="line">  (14) Existing key from card</span><br><span class="line">Your selection?</span><br></pre></td></tr></table></figure>

<p>然后选择密钥长度，没有特殊需求的话保持 3072 的默认选项即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RSA keys may be between 1024 and 4096 bits long.</span><br><span class="line">What keysize <span class="keyword">do</span> you want? (3072)</span><br></pre></td></tr></table></figure>

<p>然后设置密钥的有效期，因为我们需要长期使用，所以选择 0 ，密钥永不过期, 也可以输入 2y， 表示 2 年。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Please specify how long the key should be valid.</span><br><span class="line">         0 = key does not expire</span><br><span class="line">      &lt;n&gt;  = key expires <span class="keyword">in</span> n days</span><br><span class="line">      &lt;n&gt;w = key expires <span class="keyword">in</span> n weeks</span><br><span class="line">      &lt;n&gt;m = key expires <span class="keyword">in</span> n months</span><br><span class="line">      &lt;n&gt;y = key expires <span class="keyword">in</span> n years</span><br><span class="line">Key is valid <span class="keyword">for</span>? (0)</span><br></pre></td></tr></table></figure>

<p>确定后，依次输入姓名、电子邮件和注释 (可以不填)，然后选择 o 确定, 确定后会出现一个窗口让输入密码，自行设置一个密码。然后密钥就创建成功了， 通过命令 <code>gpg --list-keys</code> 可以查看当前的密钥</p>
<p>这里有一串字符。就是 key 的 id，后面的操作都需要这个。</p>
<p><img src= "https://static.zahui.fan/public/nes.gif" data-lazy-src="https://static.zahui.fan/images/202212271033949.png" alt="查看key"></p>
<h2 id="创建子密钥"><a href="#创建子密钥" class="headerlink" title="创建子密钥"></a>创建子密钥</h2><p>上面创建的是公钥，如果使用这个密钥加密， 那么如果密钥不小心泄露， 就必须吊销整个密钥。所以我们创建子密钥来使用。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --edit-key 4208C2FA114EE038F9EAD2374808D00D9D910E74</span><br></pre></td></tr></table></figure>

<p>进入 gpg 控制台， 输入 <code>addkey</code></p>
<p>输入一些选择， 过期时间建议 2y，然后输入密钥的密码后，在控制台输入 save 保存退出。</p>
<h2 id="导出密钥"><a href="#导出密钥" class="headerlink" title="导出密钥"></a>导出密钥</h2><p>导出密钥默认是二进制存储，如果需要纯文本，加上 <code>--armor</code> 参数</p>
<h3 id="导出主密钥"><a href="#导出主密钥" class="headerlink" title="导出主密钥"></a>导出主密钥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导出公钥和私钥</span></span><br><span class="line">gpg -o /data/gpg_key --export-secret-keys 4208C2FA114EE038F9EAD2374808D00D9D910E74</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只导出公钥</span></span><br><span class="line">gpg -o /data/gpg_pubkey --<span class="built_in">export</span> 4208C2FA114EE038F9EAD2374808D00D9D910E74</span><br></pre></td></tr></table></figure>

<p>主密钥一定要保存好，不要泄露</p>
<h3 id="导出子密钥"><a href="#导出子密钥" class="headerlink" title="导出子密钥"></a>导出子密钥</h3><p>为什么会存在子密钥？理论上只需一对主密钥，就可以完成所有加密和签名的需要了。而 GPG 支持一对主密钥和若干对子密钥，主要是为了密钥本身的安全考虑。例如需要在多台设备上进行签名和加密操作，如果在每个机器上都使用主密钥，一旦丢失，则所有设备上的信息都将可以被解密。而且除了撤销整个主密钥之外，没有任何其他办法来止损。而如果将主密钥保存在安全的地方，仅在必要的时候使用，其余机器上都使用子密钥。那么如果一台机器上的子密钥丢失，只有这台机器上的信息可能被泄露。而且无需撤销整个主密钥，只需要使用主密钥撤销这个子密钥，然后重新创建一个子密钥即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg -o /data/gpg_key.sub --export-secret-subkeys 4208C2FA114EE038F9EAD2374808D00D9D910E74</span><br></pre></td></tr></table></figure>

<h2 id="查看密钥"><a href="#查看密钥" class="headerlink" title="查看密钥"></a>查看密钥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gpg -k                   <span class="comment"># 查看公钥</span></span><br><span class="line">gpg -K                   <span class="comment"># 查看私钥</span></span><br><span class="line">gpg --list-keys          <span class="comment"># 查看公钥</span></span><br><span class="line">gpg --list-secret-keys   <span class="comment"># 查看私钥</span></span><br><span class="line">gpg --list-keys --keyid-format long          <span class="comment"># 查看公钥，打印出指纹</span></span><br><span class="line">gpg --list-secret-keys --keyid-format long   <span class="comment"># 查看私钥，打印出指纹</span></span><br></pre></td></tr></table></figure>

<h3 id="密钥类型"><a href="#密钥类型" class="headerlink" title="密钥类型"></a>密钥类型</h3><p>每个密钥开头都会有这样几个字母：pub&#x2F;sec&#x2F;sub&#x2F;ssb&#x2F;，表示这个密钥的类型。</p>
<p>在非对称加密算法中，密钥都是成对出现的。pub 和 sec 就分别表示这一对密钥的公钥和私钥，而 sub 和 ssb 则分别表示一对子密钥的公钥和私钥。</p>
<table>
<thead>
<tr>
<th>缩写</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>pub</td>
<td>主公钥</td>
</tr>
<tr>
<td>sec</td>
<td>主私钥</td>
</tr>
<tr>
<td>sub</td>
<td>子公钥</td>
</tr>
<tr>
<td>ssb</td>
<td>子私钥</td>
</tr>
</tbody></table>
<h3 id="密钥用途"><a href="#密钥用途" class="headerlink" title="密钥用途"></a>密钥用途</h3><p>每个密钥旁边都会有方括号包围的一个或多个字母，可能取值有 E&#x2F;S&#x2F;C&#x2F;A，表示这个密钥的用途。每个值的含义如下：</p>
<table>
<thead>
<tr>
<th>缩写</th>
<th>全称</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>E</td>
<td>Encryption</td>
<td>加密</td>
</tr>
<tr>
<td>S</td>
<td>Signing</td>
<td>签名</td>
</tr>
<tr>
<td>C</td>
<td>Certification</td>
<td>认证其他子密钥或 uid</td>
</tr>
<tr>
<td>A</td>
<td>Authentication</td>
<td>身份认证，例如用于 SSH 登录</td>
</tr>
</tbody></table>
<h3 id="导出公钥"><a href="#导出公钥" class="headerlink" title="导出公钥"></a>导出公钥</h3><blockquote>
<p>公钥是需要公开的，可以将公钥发送给别人，别人用于加密</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --armor --output /data/public-key.txt --<span class="built_in">export</span> 4208C2FA114EE038F9EAD2374808D00D9D910E74</span><br></pre></td></tr></table></figure>

<h4 id="上传公钥"><a href="#上传公钥" class="headerlink" title="上传公钥"></a>上传公钥</h4><blockquote>
<p>也可以将公钥上传到公共服务器上</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --send-keys 4208C2FA114EE038F9EAD2374808D00D9D910E74</span><br></pre></td></tr></table></figure>

<h3 id="导出吊销证书"><a href="#导出吊销证书" class="headerlink" title="导出吊销证书"></a>导出吊销证书</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --generate-revocation 4208C2FA114EE038F9EAD2374808D00D9D910E74</span><br></pre></td></tr></table></figure>

<p>不过实际上在生成密匙时就已经生成了一份吊销证书了，放在这个目录下面 <code>~/.gnupg/openpgp-revocs.d/</code></p>
<h2 id="删除密钥"><a href="#删除密钥" class="headerlink" title="删除密钥"></a>删除密钥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除私钥</span></span><br><span class="line">gpg --delete-secret-keys 4208C2FA114EE038F9EAD2374808D00D9D910E74</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除公钥</span></span><br><span class="line">gpg --delete-keys 4208C2FA114EE038F9EAD2374808D00D9D910E74</span><br></pre></td></tr></table></figure>

<h3 id="删除子密钥"><a href="#删除子密钥" class="headerlink" title="删除子密钥"></a>删除子密钥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">gpg --expert --edit-key x@zahui.fan</span><br><span class="line">gpg&gt; list</span><br><span class="line"></span><br><span class="line">pub  rsa3072/1065DD1957C255D3</span><br><span class="line">     创建于：2022-12-27  有效至：永不       可用于：SC</span><br><span class="line">     信任度：未知        有效性：未知</span><br><span class="line">ssb  rsa3072/77FD7CF225B6A92B</span><br><span class="line">     创建于：2022-12-27  有效至：永不       可用于：E</span><br><span class="line">ssb  rsa3072/CEA7CACC468ACDFE</span><br><span class="line">     创建于：2022-12-27  有效至：2024-12-26  可用于：S</span><br><span class="line">ssb  rsa3072/539C73E4E4949E97</span><br><span class="line">     创建于：2022-12-27  有效至：2024-12-26  可用于：E</span><br><span class="line">[ 未知 ] (1). zhanglikun (张理坤) &lt;x@zahui.fan&gt;</span><br><span class="line"></span><br><span class="line">gpg&gt;</span><br><span class="line">gpg&gt; key 77FD7CF225B6A92B</span><br><span class="line">gpg&gt; delkey</span><br><span class="line">gpg&gt; save</span><br></pre></td></tr></table></figure>

<h2 id="使用密钥"><a href="#使用密钥" class="headerlink" title="使用密钥"></a>使用密钥</h2><h3 id="主密钥离线使用"><a href="#主密钥离线使用" class="headerlink" title="主密钥离线使用"></a>主密钥离线使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">gpg -K</span><br><span class="line">[keyboxd]</span><br><span class="line">---------</span><br><span class="line">sec<span class="comment">#  rsa3072 2022-12-27 [SC]</span></span><br><span class="line">      3CBE03848A00F025624C14B41065DD1957C255D3</span><br><span class="line">uid             [ 未知 ] zhanglikun (张理坤) &lt;x@zahui.fan&gt;</span><br><span class="line">ssb   rsa3072 2022-12-27 [E]</span><br><span class="line">ssb   rsa3072 2022-12-27 [S] [有效至：2024-12-26]</span><br><span class="line">ssb   rsa3072 2022-12-27 [E] [有效至：2024-12-26]</span><br></pre></td></tr></table></figure>

<p>注意这里是 <code>sec#</code> 不是 <code>sec</code>, 说明没有主密钥。</p>
<h3 id="导入密钥"><a href="#导入密钥" class="headerlink" title="导入密钥"></a>导入密钥</h3><p>在<mark class="hl-label red">自己的</mark>电脑上面</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --import /data/gpg_key.sub</span><br></pre></td></tr></table></figure>

<h3 id="加密"><a href="#加密" class="headerlink" title="加密"></a>加密</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg -r iuxt@qq.com -e test.txt</span><br></pre></td></tr></table></figure>

<h3 id="解密"><a href="#解密" class="headerlink" title="解密"></a>解密</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg test.txt.gpg</span><br></pre></td></tr></table></figure>

<h3 id="签名"><a href="#签名" class="headerlink" title="签名"></a>签名</h3><p>有时，我们不需要加密文件，只需要对文件签名，表示这个文件确实是我本人发出的。sign 参数用来签名。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --sign test.txt</span><br></pre></td></tr></table></figure>

<p>然后生成了一个 test.txt.gpg 文件，我们打开这个文件后，发现这也是一个二进制的数据，这并不是加密后的数据，与上边的二进制数据不一样。如果想生成 ASCII 码的签名文件，可以使用 clearsign 参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --clearsign test.txt</span><br></pre></td></tr></table></figure>

<p>如果想生成单独的签名文件，与文件内容分开存放，可以使用 detach-sign 参数。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --detach-sign test.txt</span><br></pre></td></tr></table></figure>

<p>是一个二进制的数据，如果想采用 ASCII 码形式，要加上 armor 参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --armor --detach-sign test.txt</span><br></pre></td></tr></table></figure>

<h3 id="签名-加密"><a href="#签名-加密" class="headerlink" title="签名 + 加密"></a>签名 + 加密</h3><p>id 也可以换成 email， 可以加多个 –recipient 参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --local-user [发信者ID] --recipient [接收者ID] --armor --sign --encrypt test.txt</span><br></pre></td></tr></table></figure>

<p>local-user 参数指定用发信者的私钥签名，recipient 参数指定用接收者的公钥加密，armor 参数表示采用 ASCII 码形式显示，sign 参数表示需要签名，encrypt 参数表示指定源文件。</p>
<h3 id="验证签名"><a href="#验证签名" class="headerlink" title="验证签名"></a>验证签名</h3><p>我们收到别人签名后的文件，需要用对方的公钥验证签名是否为真。verify 参数用来验证</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --verify test.txt.asc test.txt</span><br></pre></td></tr></table></figure>

<h2 id="配合-GitHub-使用"><a href="#配合-GitHub-使用" class="headerlink" title="配合 GitHub 使用"></a>配合 GitHub 使用</h2><p>首先，需要让 Git 知道签名所用的 GPG 密钥 ID</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.signingkey &#123;key_id&#125;</span><br></pre></td></tr></table></figure>

<p>然后，在每次 commit 的时候，加上 -S 参数，表示这次提交需要用 GPG 密钥进行签名：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -S -m <span class="string">&quot;...&quot;</span></span><br></pre></td></tr></table></figure>

<p>如果觉得每次都需要手动加上 -S 有些麻烦，可以设置 Git 为每次 commit 自动要求签名：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global commit.gpgsign <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>然后添加变量到 <code>.bashrc</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GPG_TTY=$(<span class="built_in">tty</span>)</span><br></pre></td></tr></table></figure>

<p>commit 时皆会弹出对话框，需要输入该密钥的密码，以确保是密钥拥有者本人操作</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://zahui.fan">张理坤</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://zahui.fan/posts/e0fe652d/">https://zahui.fan/posts/e0fe652d/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://zahui.fan" target="_blank">杂烩饭</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%8A%A0%E5%AF%86/">加密</a><a class="post-meta__tags" href="/tags/gpg/">gpg</a></div><div class="post-share"><div class="social-share" data-image="https://static.zahui.fan/images/202212261651813.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/fe29bf0b/" title="Python读写文件"><img class="cover" src="https://static.zahui.fan/public/python.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Python读写文件</div></div><div class="info-2"><div class="info-item-1">使用 Python 读写文件很方便，有多种方法，但是读写大文件还是需要优化的。 python open...</div></div></div></a><a class="pagination-related" href="/posts/lqkgw2cy/" title="使用PowerShell操作Windows Defender"><img class="cover" src="https://static.zahui.fan/public/skeleton1.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">使用PowerShell操作Windows Defender</div></div><div class="info-2"><div class="info-item-1">首先需要使用到管理员权限运行 PowerShell 查看排除列表12$WDAVprefs = Get-MpPreference$WDAVprefs.ExclusionPath  排除指定文件夹12345# 两种写法，Set-MpPreference 是直接修改，会覆盖之前的规则powershell.exe -Command &#x27;Set-MpPreference -ExclusionPath &quot;C:\xxx&quot;, &quot;D:\yyy&quot;&#x27;# Add-MpPreference 是追加配置。Add-MpPreference -ExclusionPath &quot;C:\Program Files (x86)\WinAgent\*&quot;   12# 查看是否生效(Get-MpPreference).ExclusionPath | Select-String &quot;C:\Program Files (x86)\WinAgent\*&quot;</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/55d95f5b/" title="Bitlocker相关使用说明"><img class="cover" src="https://static.zahui.fan/images/202210302313030.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">Bitlocker相关使用说明</div></div><div class="info-2"><div class="info-item-1">解锁 bitlocker1manage-bde –unlock E: -RecoveryPassword ******  保存到 Microsoft 账户的 Bitlocker 秘钥https://account.microsoft.com/devices/recoverykey 手动锁定 Bitlocker1%systemdrive%\Windows\System32\Manage-bde.exe –lock d:  如果有打开的文件，则会提示解锁不成功，这时可以加上强制选项： 1%systemdrive%\Windows\System32\Manage-bde.exe -lock -fd d: </div></div></div></a><a class="pagination-related" href="/posts/sna41n/" title="HTTPS的原理，使用HTTPS就一定是安全的吗？"><img class="cover" src="https://static.zahui.fan/images/202411211426166.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-11-29</div><div class="info-item-2">HTTPS的原理，使用HTTPS就一定是安全的吗？</div></div><div class="info-2"><div class="info-item-1">HTTPS 是什么以前一直以为 HTTPS 是一种与 HTTP 类似的应用层协议，后来才发现 HTTPS 并不是一种协议。https 只是在 URI 中作为 protocol identifier 罢了。HTTPS 其实是 HTTP Over TLS（ RFC2818 ）的简称，也就是运行在 TLS 协议上的 HTTP 协议，使用 TLS 协议对 HTTP 数据进行加密，从而保证了安全性。 TLS 协议简介HTTPS 的核心就是 TLS 协议，那么 TLS 协议又是什么呢？TLS 的全称为 Transport Layer Security，也就是在传输层保证安全 RFC5246。主要分为以下四个协议：  handshake protocol，用来建立连接、身份认证、密钥协商 alert protocol，用来关闭连接 change cipher spec protocol，用来表示开始使用协商好的加密方式进行数据传输 application data protocol，用来传输密文  TLS 协议中最重要的就是 handshake...</div></div></div></a><a class="pagination-related" href="/posts/lqxdtb6m/" title="使用openssl对文件进行加密"><img class="cover" src="https://static.zahui.fan/public/openssl.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-10-31</div><div class="info-item-2">使用openssl对文件进行加密</div></div><div class="info-2"><div class="info-item-1">使用密码加密12345678# 指定输入和输出文件操作openssl enc -e -aes256 -in test.sh -out enc.sh# 或者使用管道符cat test.sh | openssl enc -e -aes256 -out enc.sh# 压缩后加密tar zcvf - 1.sh | openssl enc -e -aes256 -out temp  使用密码解密12345678# 指定输入和输出文件操作openssl enc -d -aes256 -in enc.sh -out 1.sh# 或者使用管道符进行操作openssl enc -d -aes256 -in enc.sh | tee a.sh# 解密后进行解压openssl enc -d -aes256 -in temp | tar zxvf -</div></div></div></a><a class="pagination-related" href="/posts/lqxf8k8u/" title="检查域名支持的HTTPS协议版本"><img class="cover" src="https://static.zahui.fan/public/certificate-ssl.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2024-11-29</div><div class="info-item-2">检查域名支持的HTTPS协议版本</div></div><div class="info-2"><div class="info-item-1">使用 NMAP(推荐)依赖于 nmap, nmap 需要安装 1nmap --script ssl-enum-ciphers -p 443 baidu.com  比如 GitHub 只支持 TLS1.2 和 TLS1.3： 在线验证https://myssl.com/ https://www.ssleye.com/ssltool/cipher_suites.html https://www.site24x7.com/zhcn/tools/tls-checker.html 使用 CURL 验证12curl --tlsv1 --tls-max 1.0  https://github.comcurl --tlsv1 --tls-max 1.0  https://www.baidu.com  报错说明不支持当前版本: 1curl: (35) LibreSSL/3.3.6: error:1404B42E:SSL routines:ST_CONNECT:tlsv1 alert protocol version  使用 OpenSSL12345678# 验证TLS1.2openssl...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://static.zahui.fan/public/dog.svg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">张理坤</div><div class="author-info-description">张理坤的博客</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">338</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">214</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/iuxt"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/iuxt" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:x@zahui.fan" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/165330963" rel="external nofollow noreferrer" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="https://stackoverflow.com/users/15620461/" rel="external nofollow noreferrer" target="_blank" title="StackOverflow"><i class="fa-brands fa-stack-overflow"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-square-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">此博客为我记录运维工作总结所用，供网友阅读参考，如有侵权，请通知我，我会核实后进行处理。</br>
<strong style="color: red;">欢迎加入技术交流群：</strong>
<div class="aside-qrcode" >
<img src="https://src.babudiu.com/card/wechat_ops_group.JPG" title="微信群" width="100%" height="auto">
</div>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Key-%E7%AE%A1%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">Key 管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AF%86%E9%92%A5%E5%AF%B9"><span class="toc-number">2.</span> <span class="toc-text">创建密钥对</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%90%E5%AF%86%E9%92%A5"><span class="toc-number">3.</span> <span class="toc-text">创建子密钥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%87%BA%E5%AF%86%E9%92%A5"><span class="toc-number">4.</span> <span class="toc-text">导出密钥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%87%BA%E4%B8%BB%E5%AF%86%E9%92%A5"><span class="toc-number">4.1.</span> <span class="toc-text">导出主密钥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%87%BA%E5%AD%90%E5%AF%86%E9%92%A5"><span class="toc-number">4.2.</span> <span class="toc-text">导出子密钥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%AF%86%E9%92%A5"><span class="toc-number">5.</span> <span class="toc-text">查看密钥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%86%E9%92%A5%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.1.</span> <span class="toc-text">密钥类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%86%E9%92%A5%E7%94%A8%E9%80%94"><span class="toc-number">5.2.</span> <span class="toc-text">密钥用途</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%87%BA%E5%85%AC%E9%92%A5"><span class="toc-number">5.3.</span> <span class="toc-text">导出公钥</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E5%85%AC%E9%92%A5"><span class="toc-number">5.3.1.</span> <span class="toc-text">上传公钥</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%87%BA%E5%90%8A%E9%94%80%E8%AF%81%E4%B9%A6"><span class="toc-number">5.4.</span> <span class="toc-text">导出吊销证书</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%AF%86%E9%92%A5"><span class="toc-number">6.</span> <span class="toc-text">删除密钥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%AD%90%E5%AF%86%E9%92%A5"><span class="toc-number">6.1.</span> <span class="toc-text">删除子密钥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AF%86%E9%92%A5"><span class="toc-number">7.</span> <span class="toc-text">使用密钥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E5%AF%86%E9%92%A5%E7%A6%BB%E7%BA%BF%E4%BD%BF%E7%94%A8"><span class="toc-number">7.1.</span> <span class="toc-text">主密钥离线使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E5%AF%86%E9%92%A5"><span class="toc-number">7.2.</span> <span class="toc-text">导入密钥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E5%AF%86"><span class="toc-number">7.3.</span> <span class="toc-text">加密</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%AF%86"><span class="toc-number">7.4.</span> <span class="toc-text">解密</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%BE%E5%90%8D"><span class="toc-number">7.5.</span> <span class="toc-text">签名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%BE%E5%90%8D-%E5%8A%A0%E5%AF%86"><span class="toc-number">7.6.</span> <span class="toc-text">签名 + 加密</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E7%AD%BE%E5%90%8D"><span class="toc-number">7.7.</span> <span class="toc-text">验证签名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E5%90%88-GitHub-%E4%BD%BF%E7%94%A8"><span class="toc-number">8.</span> <span class="toc-text">配合 GitHub 使用</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/seln9g/" title="使用 PowerShell 修改 Windows 防火墙规则"><img src="https://static.zahui.fan/public/Windows.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用 PowerShell 修改 Windows 防火墙规则"/></a><div class="content"><a class="title" href="/posts/seln9g/" title="使用 PowerShell 修改 Windows 防火墙规则">使用 PowerShell 修改 Windows 防火墙规则</a><time datetime="2025-01-08T15:07:14.000Z" title="更新于 2025-01-08 23:07:14">2025-01-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/lqkgw2cy/" title="使用PowerShell操作Windows Defender"><img src="https://static.zahui.fan/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用PowerShell操作Windows Defender"/></a><div class="content"><a class="title" href="/posts/lqkgw2cy/" title="使用PowerShell操作Windows Defender">使用PowerShell操作Windows Defender</a><time datetime="2025-01-08T14:39:14.000Z" title="更新于 2025-01-08 22:39:14">2025-01-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/sof9i3/" title="使用kubeadm部署一套高可用k8s 1.32集群 for AlmaLinux9(RHEL9)"><img src="https://static.zahui.fan/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用kubeadm部署一套高可用k8s 1.32集群 for AlmaLinux9(RHEL9)"/></a><div class="content"><a class="title" href="/posts/sof9i3/" title="使用kubeadm部署一套高可用k8s 1.32集群 for AlmaLinux9(RHEL9)">使用kubeadm部署一套高可用k8s 1.32集群 for AlmaLinux9(RHEL9)</a><time datetime="2025-01-08T10:08:52.000Z" title="更新于 2025-01-08 18:08:52">2025-01-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/spc5z0/" title="运维使用的Windows软件分享"><img src="https://static.zahui.fan/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="运维使用的Windows软件分享"/></a><div class="content"><a class="title" href="/posts/spc5z0/" title="运维使用的Windows软件分享">运维使用的Windows软件分享</a><time datetime="2025-01-07T15:51:27.000Z" title="更新于 2025-01-07 23:51:27">2025-01-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/le2ugemu/" title="shell脚本条件判断与比较运算"><img src="https://static.zahui.fan/public/bash.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="shell脚本条件判断与比较运算"/></a><div class="content"><a class="title" href="/posts/le2ugemu/" title="shell脚本条件判断与比较运算">shell脚本条件判断与比较运算</a><time datetime="2025-01-07T14:50:36.000Z" title="更新于 2025-01-07 22:50:36">2025-01-07</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text"><a target="_blank" rel="noopener external nofollow noreferrer" href='https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral'>
  本网站由<img src='https://static.zahui.fan/public/upyun.svg' alt='又拍云' width='70' height='28' style="vertical-align:bottom">
  提供CDN加速/云存储服务
</a>
</br>
<a href="https://beian.miit.gov.cn/" rel="external nofollow noreferrer" target="_blank">沪ICP备2021015230号-1</a>
</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(()=>{
  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const loadGiscus = () => {
    const config = Object.assign({
      src: 'https://giscus.babudiu.com/client.js',
      'data-repo': 'iuxt/iuxt.github.io',
      'data-repo-id': 'R_kgDOMszkdA',
      'data-category-id': 'DIC_kwDOMszkdM4CiMyw',
      'data-mapping': 'pathname',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true
    },null)

    const ele = document.createElement('script')
    for (let key in config) {
      ele.setAttribute(key, config[key])
    }
    document.getElementById('giscus-wrap').appendChild(ele)
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.babudiu.com')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment= loadGiscus
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜搜搜" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>