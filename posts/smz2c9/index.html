<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>使用snmp exporter对交换机、服务器等进行监控 | 杂烩饭</title><meta name="author" content="张理坤"><meta name="copyright" content="张理坤"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="安装到 GitHub 下载一个可执行文件，直接运行即可，或者使用 systemd 来运行，也可以直接部署到 Kubernetes 中。https:&#x2F;&#x2F;github.com&#x2F;prometheus&#x2F;snmp_exporter systemd 配置： 12345678910[Unit]Description&#x3D;snmp_exporterAfter&#x3D;network.target[Service]ExecSt">
<meta property="og:type" content="article">
<meta property="og:title" content="使用snmp exporter对交换机、服务器等进行监控">
<meta property="og:url" content="https://zahui.fan/posts/smz2c9/">
<meta property="og:site_name" content="杂烩饭">
<meta property="og:description" content="安装到 GitHub 下载一个可执行文件，直接运行即可，或者使用 systemd 来运行，也可以直接部署到 Kubernetes 中。https:&#x2F;&#x2F;github.com&#x2F;prometheus&#x2F;snmp_exporter systemd 配置： 12345678910[Unit]Description&#x3D;snmp_exporterAfter&#x3D;network.target[Service]ExecSt">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s3.babudiu.com/iuxt/images/202411151309207.png">
<meta property="article:published_time" content="2024-11-15T03:14:33.000Z">
<meta property="article:modified_time" content="2025-07-11T15:21:31.000Z">
<meta property="article:author" content="张理坤">
<meta property="article:tag" content="prometheus">
<meta property="article:tag" content="snmp">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s3.babudiu.com/iuxt/images/202411151309207.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "使用snmp exporter对交换机、服务器等进行监控",
  "url": "https://zahui.fan/posts/smz2c9/",
  "image": "https://s3.babudiu.com/iuxt/images/202411151309207.png",
  "datePublished": "2024-11-15T03:14:33.000Z",
  "dateModified": "2025-07-11T15:21:31.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "张理坤",
      "url": "https://zahui.fan/"
    }
  ]
}</script><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://zahui.fan/posts/smz2c9/"><link rel="preconnect"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="manifest" href="/site.webmanifest"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?50b516d50102c8c9ac5f80529b81ca17";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-YN0WWZGVYN"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-YN0WWZGVYN')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-YN0WWZGVYN', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":600,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '使用snmp exporter对交换机、服务器等进行监控',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="https://s3.babudiu.com/iuxt/libs/lxgw-wenkai-screen-webfont/style.min.css" /><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="杂烩饭" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://s3.babudiu.com/iuxt/public/dog.svg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">373</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">222</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 步步高小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2NG</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(https://s3.babudiu.com/iuxt/images/202411151309207.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="https://s3.babudiu.com/iuxt/public/boob.png" alt="Logo"><span class="site-name">杂烩饭</span></a><a class="nav-page-title" href="/"><span class="site-name">使用snmp exporter对交换机、服务器等进行监控</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 工具</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://bbk-games.zahui.fan/"><i class="fa-fw fas fa-gamepad"></i><span> 步步高小游戏</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://aria2.babudiu.com/"><i class="fa-fw fas fa-download"></i><span> Aria2NG</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa-solid fa-paperclip"></i><span> 林克</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-brands fa-apple fa-bounce"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">使用snmp exporter对交换机、服务器等进行监控</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-11-15T03:14:33.000Z" title="发表于 2024-11-15 11:14:33">2024-11-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-07-11T15:21:31.000Z" title="更新于 2025-07-11 23:21:31">2025-07-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%9B%91%E6%8E%A7/">监控</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;此文章距离发布已经&quot;,&quot;messageNext&quot;:&quot;天了，内容可能已经过时，请自行判断是否可用或联系博主更新。&quot;,&quot;postUpdate&quot;:&quot;2025-07-11 23:21:31&quot;}" hidden></div><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>到 GitHub 下载一个可执行文件，直接运行即可，或者使用 systemd 来运行，也可以直接部署到 Kubernetes 中。<br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/prometheus/snmp_exporter">https://github.com/prometheus/snmp_exporter</a></p>
<p>systemd 配置：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=snmp_exporter</span><br><span class="line"><span class="attr">After</span>=network.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">ExecStart</span>=/opt/snmp_exporter/snmp_exporter --config.file=/opt/snmp_exporter/snmp.yml</span><br><span class="line"><span class="attr">Restart</span>=<span class="literal">on</span>-failure</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure>

<h2 id="交换机或服务器打开-snmp-协议"><a href="#交换机或服务器打开-snmp-协议" class="headerlink" title="交换机或服务器打开 snmp 协议"></a>交换机或服务器打开 snmp 协议</h2><p>这一步需要在交换机或服务器的 ipmi 上配置，交换机这种网络设备一般都只支持 snmp 协议来获取数据，比如说每个接口的状态（有没有插网线等）<br>对于服务器，像 cpu 占用率、内存使用率这些数据使用 node_exporter 就可以做，为啥还要使用 snmp_exporter 呢，snmp_exporter 可以做到一些底层的监控，比如说：风扇转速、电源是否有损坏的（一般服务器都有多个电源模块）、温度情况、磁盘阵列状态（是否有硬盘坏掉了，比如做了 raid1，坏了一块硬盘在软件层面是无感知的，但是需要及时更换硬盘了。）</p>
<p>打开 snmp 协议后，需要设置并记录一下团体名。</p>
<p>测试 snmp 命令示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">snmpwalk -v 2c -c 123456 100.200.1.254</span><br><span class="line">snmpwalk -v 2c -c 123456 172.18.48.5 1.3.6.1.2.1.47.1.1.1.1.7</span><br><span class="line">snmpwalk -v3 -u sysadmin -a MD5 -A rootuser -x DES -X rootuser -l authpriv 100.200.1.24</span><br></pre></td></tr></table></figure>

<h2 id="生成配置文件"><a href="#生成配置文件" class="headerlink" title="生成配置文件"></a>生成配置文件</h2><p>snmp exporter 开源软件中有个 snmp generator ，可以用于生成 snmp exporter 的配置文件。<br>配置文件中根据硬件的 MIB 文件生成了 OID 的映射关系。以 Cisco 交换机为例，在官方 GitHub 上下载最新的 <strong>snmp.yml</strong> 文件，由于 Cisco 交换机使用的是 if_mib 模块，在 if_mib 下新增 auth 配置，团体名要和交换机上配置的一致。<br>根据 mib 文件生成 yaml 配置文件工具：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/prometheus/snmp_exporter/tree/main/generator">https://github.com/prometheus/snmp_exporter/tree/main/generator</a><br>关于采集的监控项是在 walk 字段下，如果要新增监控项，写在 walk 项下。我新增了交换机的 CPU 和内存信息。官方示例中的 if_mib 这个是 module 名字， if_mib 是个网络设备的规范，RFC1573</p>
<h3 id="H3C-交换机配置示例"><a href="#H3C-交换机配置示例" class="headerlink" title="H3C 交换机配置示例"></a>H3C 交换机配置示例</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># WARNING: This file was auto-generated using snmp_exporter generator, manual changes will be lost.</span></span><br><span class="line"><span class="attr">H3C:</span></span><br><span class="line">  <span class="attr">walk:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span>                     <span class="comment">#端口描述</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.2</span><span class="number">.1</span><span class="number">.8</span>                     <span class="comment">#端口状态 1up，2down</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.31</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span>                  <span class="comment">#端口名称</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.31</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.18</span>                 <span class="comment">#端口别名</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.2</span><span class="number">.40</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.3</span><span class="number">.1</span><span class="number">.5</span>      <span class="comment">#H3C端口进流量</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.2</span><span class="number">.40</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.3</span><span class="number">.1</span><span class="number">.6</span>      <span class="comment">#H3C端口出流量</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.8</span><span class="number">.35</span><span class="number">.18</span><span class="number">.4</span><span class="number">.3</span><span class="number">.1</span><span class="number">.13</span>      <span class="comment">#内存利用率</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.8</span><span class="number">.35</span><span class="number">.18</span><span class="number">.4</span><span class="number">.3</span><span class="number">.1</span><span class="number">.4</span>       <span class="comment">#CPU利用率</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.8</span><span class="number">.35</span><span class="number">.9</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span>        <span class="comment">#电源状态</span></span><br><span class="line">  <span class="attr">get:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.0</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span><span class="number">.0</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.5</span><span class="number">.0</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.8</span><span class="number">.35</span><span class="number">.18</span><span class="number">.1</span><span class="number">.1</span><span class="number">.0</span></span><br><span class="line">  <span class="attr">metrics:</span></span><br><span class="line">  <span class="comment"># 这里的name就是收集到的指标的名字</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">sysDescr</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">A</span> <span class="string">textual</span> <span class="string">description</span> <span class="string">of</span> <span class="string">the</span> <span class="string">entity</span> <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">sysUpTime</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">time</span> <span class="string">(in</span> <span class="string">hundredths</span> <span class="string">of</span> <span class="string">a</span> <span class="string">second)</span> <span class="string">since</span> <span class="string">the</span> <span class="string">network</span> <span class="string">management</span> <span class="string">portion</span></span><br><span class="line">      <span class="string">of</span> <span class="string">the</span> <span class="string">system</span> <span class="string">was</span> <span class="string">last</span> <span class="string">re-initialized.</span> <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">sysName</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.5</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">An</span> <span class="string">administratively-assigned</span> <span class="string">name</span> <span class="string">for</span> <span class="string">this</span> <span class="string">managed</span> <span class="string">node</span> <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.5</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ifOperStatus</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.2</span><span class="number">.1</span><span class="number">.8</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">current</span> <span class="string">operational</span> <span class="string">state</span> <span class="string">of</span> <span class="string">the</span> <span class="string">interface</span> <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.2</span><span class="number">.1</span><span class="number">.8</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">ifIndex</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">lookups:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ifIndex</span></span><br><span class="line">      <span class="attr">labelname:</span> <span class="string">ifAlias</span></span><br><span class="line">      <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.31</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.18</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ifIndex</span></span><br><span class="line">      <span class="attr">labelname:</span> <span class="string">ifDescr</span></span><br><span class="line">      <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ifIndex</span></span><br><span class="line">      <span class="attr">labelname:</span> <span class="string">ifName</span></span><br><span class="line">      <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.31</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="attr">enum_values:</span></span><br><span class="line">      <span class="attr">1:</span> <span class="string">up</span></span><br><span class="line">      <span class="attr">2:</span> <span class="string">down</span></span><br><span class="line">      <span class="attr">3:</span> <span class="string">testing</span></span><br><span class="line">      <span class="attr">4:</span> <span class="string">unknown</span></span><br><span class="line">      <span class="attr">5:</span> <span class="string">dormant</span></span><br><span class="line">      <span class="attr">6:</span> <span class="string">notPresent</span></span><br><span class="line">      <span class="attr">7:</span> <span class="string">lowerLayerDown</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">hh3cIfStatFlowHCInBytes</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.2</span><span class="number">.40</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.3</span><span class="number">.1</span><span class="number">.5</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">counter</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">In</span> <span class="string">bytes</span> <span class="string">in</span> <span class="string">the</span> <span class="string">specified</span> <span class="string">interval</span> <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.2</span><span class="number">.40</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.3</span><span class="number">.1</span><span class="number">.5</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">ifIndex</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">lookups:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ifIndex</span></span><br><span class="line">      <span class="attr">labelname:</span> <span class="string">ifAlias</span></span><br><span class="line">      <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.31</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.18</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ifIndex</span></span><br><span class="line">      <span class="attr">labelname:</span> <span class="string">ifDescr</span></span><br><span class="line">      <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ifIndex</span></span><br><span class="line">      <span class="attr">labelname:</span> <span class="string">ifName</span></span><br><span class="line">      <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.31</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">hh3cIfStatFlowHCOutBytes</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.2</span><span class="number">.40</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.3</span><span class="number">.1</span><span class="number">.6</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">counter</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">Out</span> <span class="string">bytes</span> <span class="string">in</span> <span class="string">the</span> <span class="string">specified</span> <span class="string">interval</span> <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.2</span><span class="number">.40</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.3</span><span class="number">.1</span><span class="number">.6</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">ifIndex</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">lookups:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ifIndex</span></span><br><span class="line">      <span class="attr">labelname:</span> <span class="string">ifAlias</span></span><br><span class="line">      <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.31</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.18</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ifIndex</span></span><br><span class="line">      <span class="attr">labelname:</span> <span class="string">ifDescr</span></span><br><span class="line">      <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ifIndex</span></span><br><span class="line">      <span class="attr">labelname:</span> <span class="string">ifName</span></span><br><span class="line">      <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.31</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">DisplayString</span>  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">hh3cLswSysIpAddr</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.8</span><span class="number">.35</span><span class="number">.18</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">InetAddressIPv4</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">System</span> <span class="string">IP</span> <span class="string">address,</span> <span class="string">which</span> <span class="string">is</span> <span class="string">the</span> <span class="string">primary</span> <span class="string">IP</span> <span class="string">address</span> <span class="string">of</span> <span class="string">the</span> <span class="string">VLAN</span> <span class="string">interface</span></span><br><span class="line">      <span class="string">that</span> <span class="string">has</span> <span class="string">smallest</span> <span class="string">VLAN</span> <span class="string">ID</span> <span class="string">and</span> <span class="string">is</span> <span class="string">configured</span> <span class="string">IP</span> <span class="string">address.</span> <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.8</span><span class="number">.35</span><span class="number">.18</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">hh3cLswSlotMemoryRatio</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.8</span><span class="number">.35</span><span class="number">.18</span><span class="number">.4</span><span class="number">.3</span><span class="number">.1</span><span class="number">.13</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">percentage</span> <span class="string">of</span> <span class="string">system</span> <span class="string">memory</span> <span class="string">in</span> <span class="string">use</span> <span class="string">on</span> <span class="string">the</span> <span class="string">board</span> <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.8</span><span class="number">.35</span><span class="number">.18</span><span class="number">.4</span><span class="number">.3</span><span class="number">.1</span><span class="number">.13</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">hh3cLswFrameIndex</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">hh3cLswSlotIndex</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">hh3cLswSlotCpuRatio</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.8</span><span class="number">.35</span><span class="number">.18</span><span class="number">.4</span><span class="number">.3</span><span class="number">.1</span><span class="number">.4</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">CPU</span> <span class="string">usage</span> <span class="string">of</span> <span class="string">the</span> <span class="string">slot</span> <span class="string">in</span> <span class="string">accuracy</span> <span class="string">of</span> <span class="number">1</span><span class="string">%,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">range</span> <span class="string">of</span> <span class="string">value</span> <span class="string">is</span> <span class="number">1</span> <span class="string">to</span></span><br><span class="line">      <span class="number">100</span><span class="string">.</span> <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.8</span><span class="number">.35</span><span class="number">.18</span><span class="number">.4</span><span class="number">.3</span><span class="number">.1</span><span class="number">.4</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">hh3cLswFrameIndex</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">hh3cLswSlotIndex</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">hh3cDevMPowerStatus</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.25506</span><span class="number">.8</span><span class="number">.35</span><span class="number">.9</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">&#x27;Power status: active (1), deactive (2) not installed (3) and unsupported</span></span><br><span class="line"><span class="string">      - 1.3.6.1.4.1.25506.8.35.9.1.2.1.2&#x27;</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">hh3cDevMPowerNum</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">enum_values:</span></span><br><span class="line">      <span class="attr">1:</span> <span class="string">active</span></span><br><span class="line">      <span class="attr">2:</span> <span class="string">deactive</span></span><br><span class="line">      <span class="attr">3:</span> <span class="string">not-install</span></span><br><span class="line">      <span class="attr">4:</span> <span class="string">unsupport</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">max_repetitions:</span> <span class="number">25</span></span><br><span class="line">  <span class="attr">retries:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="string">60s</span></span><br><span class="line">  <span class="attr">auth:</span></span><br><span class="line">    <span class="attr">community:</span> <span class="number">123456</span></span><br></pre></td></tr></table></figure>

<h3 id="浪潮服务器配置示例"><a href="#浪潮服务器配置示例" class="headerlink" title="浪潮服务器配置示例"></a>浪潮服务器配置示例</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># WARNING: This file was auto-generated using snmp_exporter generator, manual changes will be lost.</span></span><br><span class="line"><span class="attr">Inspur:</span></span><br><span class="line">  <span class="attr">walk:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.5</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span><span class="number">.19</span><span class="number">.9</span><span class="number">.65</span><span class="number">.115</span><span class="number">.115</span><span class="number">.101</span><span class="number">.116</span><span class="number">.32</span><span class="number">.84</span><span class="number">.97</span><span class="number">.103</span> <span class="comment">#机器fru信息</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.3</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span> <span class="comment">#电源模块PSU当前在位状态</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span> <span class="comment">#CPU状态</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span> <span class="comment">#电压sensor健康状态,0-N/A;1-Normal;2-Warning;3-Critical</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span> <span class="comment">#温度sensor的健康状态,0-N/A;1-Normal;2-Warning;3-Critical</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.3</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span> <span class="comment">#风扇转速,0-N/A;1-Normal;2-Warning;3-Critical</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.3</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.4</span> <span class="comment">#前置硬盘状态 0-N/A;1-Normal;2-Warning;3-Critical</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.6</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.9</span> <span class="comment">#硬盘状态监控信息(驱动器插槽)</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.6</span><span class="number">.1</span><span class="number">.1</span><span class="number">.9</span> <span class="comment">#电源power 0-N/A;1-Normal;2-Warning;3-Critical</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.5</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span> <span class="comment">#内存监控 0-N/A;1-Normal;2-Warning;3-Critical</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.6</span><span class="number">.3</span><span class="number">.1</span><span class="number">.1</span><span class="number">.4</span> <span class="comment">#raid类型,比如raid1 raid5 raid10</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.6</span><span class="number">.3</span><span class="number">.1</span><span class="number">.1</span><span class="number">.2</span> <span class="comment">#Raid卡健康状态信息, &quot;Absent&quot;,&quot;Normal&quot;,&quot;Critical&quot;,&quot;N/A&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.14</span><span class="number">.1</span><span class="number">.1</span><span class="number">.5</span> <span class="comment">#网卡健康状态，显示为&quot;Normal&quot;,&quot;Warning&quot;,&quot;Critical&quot;,&quot;N/A&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">metrics:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">serverFRUInfoSetupAttributeValue</span>  <span class="comment">#机器fru信息:序列号</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.5</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span><span class="number">.19</span><span class="number">.9</span><span class="number">.65</span><span class="number">.115</span><span class="number">.115</span><span class="number">.101</span><span class="number">.116</span><span class="number">.32</span><span class="number">.84</span><span class="number">.97</span><span class="number">.103</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">serverFRUInfoSetupAttributeValue</span> <span class="string">of</span> <span class="string">this</span> <span class="string">conceptual</span> <span class="string">row.</span> <span class="bullet">-</span> <span class="string">机器fru</span> <span class="string">序列号信息</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">inspur</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">serverPowerSupplyMonitorPresent</span>  <span class="comment">#电源模块PSU当前在位状态</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.3</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">serverPowerSupplyMonitorPresent</span> <span class="string">of</span> <span class="string">this</span> <span class="string">conceptual</span> <span class="string">row.</span> <span class="bullet">-</span> <span class="string">电源模块PSU当前在位状态</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">inspur</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">serverCPUInfoPresent</span>  <span class="comment">#CPU当前在位状态</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">serverCPUInfoPresent</span> <span class="string">of</span> <span class="string">this</span> <span class="string">conceptual</span> <span class="string">row.</span> <span class="bullet">-</span> <span class="string">CPU当前在位状态</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">inspur</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">serverRaidDiskInfoVolumeraidLevel</span>  <span class="comment"># raid卡类型</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.6</span><span class="number">.3</span><span class="number">.1</span><span class="number">.1</span><span class="number">.4</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">serverRaidDiskInfoVolumeraidLevel</span> <span class="string">of</span> <span class="string">this</span> <span class="string">conceptual</span> <span class="string">row.</span> <span class="bullet">-</span> <span class="string">raid卡类型</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">inspur</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">serverVoltageStatus</span> <span class="comment">#电压sensor健康状态</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">serverVoltagestatus</span> <span class="string">of</span> <span class="string">this</span> <span class="string">conceptual</span> <span class="string">row.</span> <span class="bullet">-</span> <span class="string">电压sensor健康状态</span> <span class="number">1</span><span class="string">表示正常</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">inspur</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">enum_values:</span></span><br><span class="line">      <span class="attr">0:</span> <span class="string">N/A</span></span><br><span class="line">      <span class="attr">1:</span> <span class="string">Normal</span></span><br><span class="line">      <span class="attr">2:</span> <span class="string">Warning</span></span><br><span class="line">      <span class="attr">3:</span> <span class="string">Critical</span></span><br><span class="line">          </span><br><span class="line">          </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">serverTemperatureSensorStatus</span> <span class="comment">#温度sensor的健康状态</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">serverTemperatureSensorStatus</span> <span class="string">of</span> <span class="string">this</span> <span class="string">conceptual</span> <span class="string">row.</span> <span class="bullet">-</span> <span class="string">温度sensor的健康状态</span> <span class="number">1</span><span class="string">表示正常</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">inspur</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">enum_values:</span></span><br><span class="line">      <span class="attr">0:</span> <span class="string">N/A</span></span><br><span class="line">      <span class="attr">1:</span> <span class="string">Normal</span></span><br><span class="line">      <span class="attr">2:</span> <span class="string">Warning</span></span><br><span class="line">      <span class="attr">3:</span> <span class="string">Critical</span></span><br><span class="line">          </span><br><span class="line">          </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">serverFanSensorStatus</span> <span class="comment">#风扇转速状态</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.3</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">serverFanSensorStatus</span> <span class="string">of</span> <span class="string">this</span> <span class="string">conceptual</span> <span class="string">row.</span> <span class="bullet">-</span> <span class="string">风扇转速状态</span> <span class="number">1</span><span class="string">表示正常</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">inspur</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">enum_values:</span></span><br><span class="line">      <span class="attr">0:</span> <span class="string">N/A</span></span><br><span class="line">      <span class="attr">1:</span> <span class="string">Normal</span></span><br><span class="line">      <span class="attr">2:</span> <span class="string">Warning</span></span><br><span class="line">      <span class="attr">3:</span> <span class="string">Critical</span></span><br><span class="line">         </span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">serverMemoryStatus</span> <span class="comment">#内存监控</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.5</span><span class="number">.1</span><span class="number">.1</span><span class="number">.3</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">serverMemoryStatus</span> <span class="string">of</span> <span class="string">this</span> <span class="string">conceptual</span> <span class="string">row.</span> <span class="bullet">-</span> <span class="string">内存监控</span> <span class="number">1</span><span class="string">代表正常</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">inspur</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">enum_values:</span></span><br><span class="line">      <span class="attr">0:</span> <span class="string">N/A</span></span><br><span class="line">      <span class="attr">1:</span> <span class="string">Normal</span></span><br><span class="line">      <span class="attr">2:</span> <span class="string">Warning</span></span><br><span class="line">      <span class="attr">3:</span> <span class="string">Critical</span>        </span><br><span class="line">          </span><br><span class="line">          </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">serverPowerSupplyStatus</span> <span class="comment">#电源power</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.6</span><span class="number">.1</span><span class="number">.1</span><span class="number">.9</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">serverPowerSupplyStatus</span> <span class="string">of</span> <span class="string">this</span> <span class="string">conceptual</span> <span class="string">row.</span> <span class="bullet">-</span> <span class="string">电源power</span> <span class="number">1</span><span class="string">代表正常</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">inspur</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">enum_values:</span></span><br><span class="line">      <span class="attr">0:</span> <span class="string">N/A</span></span><br><span class="line">      <span class="attr">1:</span> <span class="string">Normal</span></span><br><span class="line">      <span class="attr">2:</span> <span class="string">Warning</span></span><br><span class="line">      <span class="attr">3:</span> <span class="string">Critical</span>       </span><br><span class="line">          </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">serverFrontHDStatus</span> <span class="comment">#前置物理磁盘健康状态</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.3</span><span class="number">.1</span><span class="number">.1</span><span class="number">.1</span><span class="number">.4</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">serverFrontHDStatus</span> <span class="string">of</span> <span class="string">this</span> <span class="string">conceptual</span> <span class="string">row.</span> <span class="bullet">-</span> <span class="string">前置物理磁盘健康状态</span> <span class="string">Normal代表正常</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">inspur</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">serverDriveSlotStatus</span> <span class="comment">#硬盘健康状态信息(驱动器插槽)</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.6</span><span class="number">.2</span><span class="number">.1</span><span class="number">.1</span><span class="number">.9</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">serverDriveSlotStatus</span> <span class="string">of</span> <span class="string">this</span> <span class="string">conceptual</span> <span class="string">row.</span> <span class="bullet">-</span> <span class="string">硬盘健康状态信息</span> <span class="string">Normal代表正常</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">inspur</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line">    <span class="attr">enum_values:</span></span><br><span class="line">      <span class="attr">0:</span> <span class="number">0</span><span class="string">-N/A</span></span><br><span class="line">      <span class="attr">1:</span> <span class="string">Normal</span></span><br><span class="line">      <span class="attr">2:</span> <span class="string">Warning</span></span><br><span class="line">      <span class="attr">3:</span> <span class="string">Critical</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">serverRaidLogicDiskInfoStatus</span> <span class="comment">#Raid卡健康状态信息</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.6</span><span class="number">.3</span><span class="number">.1</span><span class="number">.1</span><span class="number">.2</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">serverRaidControllorStandardStatus</span> <span class="string">of</span> <span class="string">this</span> <span class="string">conceptual</span> <span class="string">row.</span> <span class="bullet">-</span> <span class="string">Raid卡健康状态信息</span> <span class="string">Optimal代表正常</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">inspur</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">serverSystemNICStandardStatus</span> <span class="comment">#网卡监控</span></span><br><span class="line">    <span class="attr">oid:</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.37945</span><span class="number">.2</span><span class="number">.1</span><span class="number">.2</span><span class="number">.14</span><span class="number">.1</span><span class="number">.1</span><span class="number">.5</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">DisplayString</span></span><br><span class="line">    <span class="attr">help:</span> <span class="string">The</span> <span class="string">serverSystemNICStandardStatus</span> <span class="string">of</span> <span class="string">this</span> <span class="string">conceptual</span> <span class="string">row.</span> <span class="bullet">-</span> <span class="string">网卡健康状态信息</span> <span class="string">Normal代表正常</span></span><br><span class="line">    <span class="attr">indexes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">labelname:</span> <span class="string">inspur</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">gauge</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">version:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">max_repetitions:</span> <span class="number">25</span></span><br><span class="line">  <span class="attr">retries:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="string">60s</span></span><br><span class="line">  <span class="attr">auth:</span></span><br><span class="line">    <span class="attr">community:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">security_level:</span> <span class="string">authPriv</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">sysadmin</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">rootuser</span></span><br><span class="line">    <span class="attr">auth_protocol:</span> <span class="string">MD5</span></span><br><span class="line">    <span class="attr">priv_protocol:</span> <span class="string">DES</span></span><br><span class="line">    <span class="attr">priv_password:</span> <span class="string">rootuser</span></span><br></pre></td></tr></table></figure>

<h3 id="验证-snmp-exporter"><a href="#验证-snmp-exporter" class="headerlink" title="验证 snmp exporter"></a>验证 snmp exporter</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:9116/snmp?module=if_mib,arista_sw&amp;target=192.0.0.8</span><br></pre></td></tr></table></figure>

<h2 id="prometheus-采集"><a href="#prometheus-采集" class="headerlink" title="prometheus 采集"></a>prometheus 采集</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;Inspurserver&#x27;</span></span><br><span class="line">  <span class="attr">scrape_interval:</span> <span class="string">60s</span></span><br><span class="line">  <span class="attr">scrape_timeout:</span> <span class="string">60s</span></span><br><span class="line">  <span class="attr">scheme:</span> <span class="string">http</span></span><br><span class="line">  <span class="attr">file_sd_configs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">files:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/data/prometheus/conf.d/inspur_server.yml</span></span><br><span class="line">      <span class="attr">refresh_interval:</span> <span class="string">30s</span></span><br><span class="line">  <span class="attr">metrics_path:</span> <span class="string">/snmp</span></span><br><span class="line">  <span class="attr">params:</span></span><br><span class="line">    <span class="attr">module:</span> [<span class="string">Inspur</span>]</span><br><span class="line">  <span class="attr">relabel_configs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">source_labels:</span> [<span class="string">__address__</span>]</span><br><span class="line">      <span class="attr">target_label:</span> <span class="string">__param_target</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">source_labels:</span> [<span class="string">__param_target</span>]</span><br><span class="line">      <span class="attr">target_label:</span> <span class="string">instance</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target_label:</span> <span class="string">__address__</span></span><br><span class="line">      <span class="attr">replacement:</span> <span class="number">10.200</span><span class="number">.4</span><span class="number">.64</span><span class="string">:9130</span> </span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;h3cswitch&#x27;</span></span><br><span class="line">  <span class="attr">scrape_interval:</span> <span class="string">60s</span></span><br><span class="line">  <span class="attr">scrape_timeout:</span> <span class="string">60s</span></span><br><span class="line">  <span class="attr">scheme:</span> <span class="string">http</span></span><br><span class="line">  <span class="attr">file_sd_configs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">files:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/data/prometheus/conf.d/h3c_switch.yml</span></span><br><span class="line">      <span class="attr">refresh_interval:</span> <span class="string">30s</span></span><br><span class="line">  <span class="attr">metrics_path:</span> <span class="string">/snmp</span></span><br><span class="line">  <span class="attr">params:</span></span><br><span class="line">    <span class="attr">module:</span> [<span class="string">H3C</span>]</span><br><span class="line">  <span class="attr">relabel_configs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">source_labels:</span> [<span class="string">__address__</span>]</span><br><span class="line">      <span class="attr">target_label:</span> <span class="string">__param_target</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">source_labels:</span> [<span class="string">__param_target</span>]</span><br><span class="line">      <span class="attr">target_label:</span> <span class="string">instance</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">target_label:</span> <span class="string">__address__</span></span><br><span class="line">      <span class="attr">replacement:</span> <span class="number">10.200</span><span class="number">.4</span><span class="number">.64</span><span class="string">:9131</span></span><br></pre></td></tr></table></figure>

<p>具体的机器配置文件在： <code>/data/prometheus/conf.d/inspur_server.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;100.200.1.23&#x27;</span>]</span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">&quot;lvs01&quot;</span></span><br><span class="line">    <span class="attr">addr:</span> <span class="string">&quot;100.200.1.23&quot;</span></span><br><span class="line">    <span class="attr">env:</span> <span class="string">prod</span></span><br><span class="line">    <span class="attr">dept:</span> <span class="string">hardware</span></span><br><span class="line">    <span class="attr">project:</span> <span class="string">&quot;hardware&quot;</span></span><br><span class="line">    <span class="attr">ip:</span> <span class="string">&quot;172.16.1.11&quot;</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">&quot;hardware&quot;</span></span><br><span class="line">    <span class="attr">hardware:</span> <span class="string">&quot;server&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;100.200.1.24&#x27;</span>]</span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">&quot;lvs02&quot;</span></span><br><span class="line">    <span class="attr">addr:</span> <span class="string">&quot;100.200.1.24&quot;</span></span><br><span class="line">    <span class="attr">env:</span> <span class="string">prod</span></span><br><span class="line">    <span class="attr">dept:</span> <span class="string">bi</span></span><br><span class="line">    <span class="attr">project:</span> <span class="string">&quot;bi&quot;</span></span><br><span class="line">    <span class="attr">ip:</span> <span class="string">&quot;172.16.1.12&quot;</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">&quot;hardware&quot;</span></span><br><span class="line">    <span class="attr">hardware:</span> <span class="string">&quot;server&quot;</span></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://zahui.fan">张理坤</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://zahui.fan/posts/smz2c9/">https://zahui.fan/posts/smz2c9/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://zahui.fan" target="_blank">杂烩饭</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/prometheus/">prometheus</a><a class="post-meta__tags" href="/tags/snmp/">snmp</a></div><div class="post-share"><div class="social-share" data-image="https://s3.babudiu.com/iuxt/images/202411151309207.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/smvb2h/" title="Windows 开机自启动配置位置"><img class="cover" src="https://s3.babudiu.com/iuxt/images/202411191004480.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Windows 开机自启动配置位置</div></div><div class="info-2"><div class="info-item-1">注册表方式系统1HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run  个人1HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run  只运行一次1HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce   新建字符串值 – 数值名称任意,数值数据为要启动的程序路径,如 C:\Program Files (x86)\WinHotKey\WinHotKey.exe或者命令行创建 reg add &quot;HKLM\Software\Microsoft\Windows\CurrentVersion\Run&quot; /f /v &quot;数值名称&quot; /t REG_SZ /d &quot;程序启动路径&quot;  文件方式开机自启动也会显示在开始菜单的 startup...</div></div></div></a><a class="pagination-related" href="/posts/sn6pu2/" title="生产环境Prometheus监控架构记录"><img class="cover" src="https://s3.babudiu.com/iuxt/images/202411151309207.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">生产环境Prometheus监控架构记录</div></div><div class="info-2"><div class="info-item-1">比如有 30 家客户，每一个客户都有自己的 Kubernetes 集群，部署方式千差万别，还有客户不使用 Kubernetes 的，使用虚拟机部署，那么怎么对这么多客户的机器、服务进行有效的监控，本文记录一下监控的架构方案。 监控架构图 说明：Prometheus Core 是一个核心的 Prometheus，所有其他 Prometheus 的数据都汇总到这里，查询、告警等都使用这个 Prometheus Prometheus Core这个是核心的 Prometheus，其他客户的 Prometheus 通过联邦接入或者 远程写 (remote write) 的方式来写入数据到这个 Prometheus 中。Prometheus Core 可以更换成 VictoriaMetrics 联邦接入配置123456789101112131415161718192021222324252627282930313233343536# http 接口联邦- job_name: &#x27;federate-http&#x27;  scrape_interval: 30s ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/sk5u8v/" title="Nginx Ingress 暴露没有定义Host的ingress的Metrics数据"><img class="cover" src="https://s3.babudiu.com/iuxt/public/Prometheus.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-07-11</div><div class="info-item-2">Nginx Ingress 暴露没有定义Host的ingress的Metrics数据</div></div><div class="info-2"><div class="info-item-1">指定默认的 ingress 后端名字有点绕口，假如说之前有个服务是通过 ip:port 来访问 nginx(就是 default server)，然后转发到后端服务的，那么转换成 ingress 后，不能指定 host，不然会匹配不到规则。ingress 就不能配置 host，创建出来的 ingress 资源就是这样的： 12345678910111213141516171819apiVersion: networking.k8s.io/v1beta1kind: Ingressmetadata:  annotations:    nginx.ingress.kubernetes.io/ssl-redirect: &quot;false&quot;  name: g.example.com  namespace: defaultspec:  rules:  - http:      paths:      - backend:          serviceName: server1          servicePort: 5003        path: /sdk   ...</div></div></div></a><a class="pagination-related" href="/posts/lswszwbz/" title="Grafana 监控面板配置"><img class="cover" src="https://s3.babudiu.com/iuxt/public/Grafana.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-07-11</div><div class="info-item-2">Grafana 监控面板配置</div></div><div class="info-2"><div class="info-item-1">安装 grafanaoss：开源版本 enterprise: 商业版本 https://grafana.com/grafana/download?pg=get&amp;plcmt=selfmanaged-box1-cta1&amp;edition=oss 添加数据源以 grafana 10.3.3 为例， 在 connections –&gt; Data sources 中新增：  面板配置可以手动配置，也可以在 grafana 官网下载别人配置好的模板：https://grafana.com/grafana/dashboards/, 复制 ID 或者下载 json 文件到本地 然后在面板上面，点击 + ， 选择 import dashboard 使用 json 文件导入或者直接输入面板 id 进行导入。  导入后便能看到基础的图形。 做变量筛选比如我们的监控会区分环境， 比如开发环境 dev，生产环境 prod， 现在需要在 grafana 的面板上做一个筛选框，这里是原始的数据：比如我们需要取 env 的值 在面板的设置 – 变量中， 添加一个变量， 变量名可以自定义，...</div></div></div></a><a class="pagination-related" href="/posts/skf07c/" title="Grafana中自定义Legend的名字和自定义value的显示"><img class="cover" src="https://s3.babudiu.com/iuxt/public/Grafana.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-05-26</div><div class="info-item-2">Grafana中自定义Legend的名字和自定义value的显示</div></div><div class="info-2"><div class="info-item-1">针对 value 的值进行修改解释举个例子：使用 snmp_exporter 对防火墙进行监控，端口状态监控值为 1 或 2（1 是启用，2 是未启用）， 在 Prometheus 中的原始数据是：  在 Grafana 中显示效果为： 其中：Value mappings 控制数值对应的显示文字。Thresholds 控制数值对应的显示颜色。 针对 Legend 修改描述文字Legend 这里配置的是 &#123;&#123;ifName&#125;&#125; 显示出来就是类似 ge0/2 等，也就是 Prometheus 里原始数据的标签名。 如果我想根据这个名字来指定一个对应关系来显示，比如领导不知道 ge0/2 是什么意思（开玩笑的，没找到合适的例子），可以将 ge0/2 转换为：第一排第二个网口，可以这么配置：  根据 value 值进行变色如果只想针对某一列修改颜色  value mappings 添加对应的说明和颜色  添加一个 override   </div></div></div></a><a class="pagination-related" href="/posts/61baae6f/" title="Kubernetes中使用Prometheus对集群节点做监控"><img class="cover" src="https://s3.babudiu.com/iuxt/public/Prometheus.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-07-11</div><div class="info-item-2">Kubernetes中使用Prometheus对集群节点做监控</div></div><div class="info-2"><div class="info-item-1">正常情况下使用 Prometheus 对机器做监控，比如监控 CPU、内存、磁盘等信息， 都是在机器上安装一个 node exporter， 然后将 metrics 接入到 Prometheus 中。在 k8s 环境下， 我们可以使用 k8s 来管理， 实现自动化监控。 node exporter 是针对主机节点的， 需要在每台 node 节点上安装， 那么 daemonset 控制器是最合理的选择。 网络使用 Host Network 模式， 在主机上直接暴露一个端口。 部署 node exporter使用 yaml 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263apiVersion: apps/v1kind: DaemonSetmetadata:  name: node-exporter  namespace: monitor  labels:    name:...</div></div></div></a><a class="pagination-related" href="/posts/11255f25/" title="Prometheus常用PromQL记录"><img class="cover" src="https://s3.babudiu.com/iuxt/public/Prometheus.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-04-16</div><div class="info-item-2">Prometheus常用PromQL记录</div></div><div class="info-2"><div class="info-item-1">prometheus 查询语法叫 PromQL，做个记录： 查询条件Prometheus 存储的是时序数据，而它的时序是由名字和一组标签构成的，其实名字也可以写出标签的形式，例如 http_requests_total 等价于 &#123;name=&quot;http_requests_total&quot;&#125;。 一个简单的查询相当于是对各种标签的筛选，例如： 1234http_requests_total&#123;code=&quot;200&quot;&#125;     # 表示查询名字为 http_requests_total，code 为 &quot;200&quot; 的数据http_requests_total&#123;code!=&quot;200&quot;&#125;    # 表示查询 code 不为 &quot;200&quot; 的数据http_requests_total&#123;code=~&quot;2..&quot;&#125;    # 表示查询 code 为 &quot;2xx&quot;...</div></div></div></a><a class="pagination-related" href="/posts/165a0cd3/" title="Prometheus开启basic_auth认证"><img class="cover" src="https://s3.babudiu.com/iuxt/public/Prometheus.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2025-07-11</div><div class="info-item-2">Prometheus开启basic_auth认证</div></div><div class="info-2"><div class="info-item-1">考虑将公司的联邦集群（pull）换成 remote_write（push）这种形式， 所以需要将 Prometheus 开放到公网，看了看认证相关的配置 也可以使用 Nginx 来反向代理，可以参考 Nginx开启基本http认证， 不过 Prometheus 原生带了 basic auth 和 ssl 认证, 官网的说明https://prometheus.io/docs/guides/basic-auth/ 开启 web 配置文件1./prometheus --web.config.file=&quot;web.yml&quot;  --web.listen-address=&quot;0.0.0.0:9001&quot;  生成密码密码需要 bcrypt 加密，这里使用 htpasswd 工具生成 Ubuntu和Debian安装CentOS和Fedora安装1apt install apache2-utils1yum install httpd-tools  1htpasswd -nB &#x27;admin&#x27;  web 配置文件vim...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://s3.babudiu.com/iuxt/public/dog.svg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">张理坤</div><div class="author-info-description">张理坤的博客</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">373</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">222</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/iuxt"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/iuxt" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:x@zahui.fan" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/165330963" rel="external nofollow noreferrer" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="https://stackoverflow.com/users/15620461/" rel="external nofollow noreferrer" target="_blank" title="StackOverflow"><i class="fa-brands fa-stack-overflow"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa-solid fa-square-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">此博客为我记录运维工作总结所用，供网友阅读参考，如有侵权，请通知我，我会核实后进行处理。</br>
<strong style="color: red;">欢迎加入技术交流群：</strong>
<div class="aside-qrcode" >
<img src="https://src.babudiu.com/card/wechat_ops_group.JPG" title="微信群" width="100%" height="auto">
</div>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E6%88%96%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%89%93%E5%BC%80-snmp-%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.</span> <span class="toc-text">交换机或服务器打开 snmp 协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">生成配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#H3C-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.1.</span> <span class="toc-text">H3C 交换机配置示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%AA%E6%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.2.</span> <span class="toc-text">浪潮服务器配置示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81-snmp-exporter"><span class="toc-number">3.3.</span> <span class="toc-text">验证 snmp exporter</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#prometheus-%E9%87%87%E9%9B%86"><span class="toc-number">4.</span> <span class="toc-text">prometheus 采集</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/cb400b2a/" title="我们为什么要用容器(或者说k8s)"><img src="https://s3.babudiu.com/iuxt/public/kubernetes.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="我们为什么要用容器(或者说k8s)"/></a><div class="content"><a class="title" href="/posts/cb400b2a/" title="我们为什么要用容器(或者说k8s)">我们为什么要用容器(或者说k8s)</a><time datetime="2025-12-21T13:04:45.000Z" title="更新于 2025-12-21 21:04:45">2025-12-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/scpj14/" title="单节点Kubernetes更换ip地址"><img src="https://s3.babudiu.com/iuxt/public/kubernetes.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="单节点Kubernetes更换ip地址"/></a><div class="content"><a class="title" href="/posts/scpj14/" title="单节点Kubernetes更换ip地址">单节点Kubernetes更换ip地址</a><time datetime="2025-12-21T13:03:00.000Z" title="更新于 2025-12-21 21:03:00">2025-12-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/518e617c/" title="git常用操作记录"><img src="https://s3.babudiu.com/iuxt/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="git常用操作记录"/></a><div class="content"><a class="title" href="/posts/518e617c/" title="git常用操作记录">git常用操作记录</a><time datetime="2025-12-20T13:26:16.000Z" title="更新于 2025-12-20 21:26:16">2025-12-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/t79irt/" title="容器调试工具之BusyBox"><img src="https://s3.babudiu.com/iuxt/public/skeleton1.svg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="容器调试工具之BusyBox"/></a><div class="content"><a class="title" href="/posts/t79irt/" title="容器调试工具之BusyBox">容器调试工具之BusyBox</a><time datetime="2025-12-14T14:47:12.000Z" title="更新于 2025-12-14 22:47:12">2025-12-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/syv4vu/" title="minio自建对象存储"><img src="https://s3.babudiu.com/iuxt/2025/07/9b62bab970676aeef01b597ccff9a533.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="minio自建对象存储"/></a><div class="content"><a class="title" href="/posts/syv4vu/" title="minio自建对象存储">minio自建对象存储</a><time datetime="2025-12-07T05:34:57.000Z" title="更新于 2025-12-07 13:34:57">2025-12-07</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener external nofollow noreferrer" href='https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral'>
  本网站由<img src='https://s3.babudiu.com/iuxt/public/upyun.svg' alt='又拍云' width='70' height='28' style="vertical-align:bottom">
  提供CDN加速/云存储服务
</a>
</br>
<a href="https://beian.miit.gov.cn/" rel="external nofollow noreferrer" target="_blank">沪ICP备2021015230号-1</a>
</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const createScriptElement = config => {
    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => {
      ele.setAttribute(key, value)
    })
    return ele
  }

  const loadGiscus = (el = document, key) => {
    const mappingConfig = isShuoshuo
      ? { 'data-mapping': 'specific', 'data-term': key }
      : { 'data-mapping': (option && option['data-mapping']) || 'pathname' }

    const giscusConfig = {
      src: 'https://giscus.babudiu.com/client.js',
      'data-repo': 'iuxt/iuxt.github.io',
      'data-repo-id': 'R_kgDOMszkdA',
      'data-category-id': 'DIC_kwDOMszkdM4CiMyw',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true,
      ...option,
      ...mappingConfig
    }

    const scriptElement = createScriptElement(giscusConfig)

    el.querySelector('#giscus-wrap').appendChild(scriptElement)

    if (isShuoshuo) {
      window.shuoshuoComment.destroyGiscus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.babudiu.com')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if (isShuoshuo) {
    'Giscus' === 'Giscus'
      ? window.shuoshuoComment = { loadComment: loadGiscus }
      : window.loadOtherComment = loadGiscus
    return
  }

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script></div><script async data-pjax src="https://events.vercount.one/js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜搜搜" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>